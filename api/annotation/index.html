
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../core/">
      
      
        <link rel="next" href="../dbmethods/">
      
      
      <link rel="icon" href="../../img/icons8_layers.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.6">
    
    
      
        <title>Annotation - VoDEx Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vodexannotation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="VoDEx Docs" class="md-header__button md-logo" aria-label="VoDEx Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            VoDEx Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Annotation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/LemonJust/vodex" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    LemonJust/vodex
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../install/" class="md-tabs__link">
        
  
    
  
  Installation

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../qstart/" class="md-tabs__link">
          
  
    
  
  Quick Start

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../examples/" class="md-tabs__link">
        
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../db/" class="md-tabs__link">
        
  
    
  
  Database

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../contribute/" class="md-tabs__link">
        
  
    
  
  Contributions

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../data/" class="md-tabs__link">
        
  
    
  
  Data

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../napari/" class="md-tabs__link">
          
  
    
  
  napari_vodex

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="VoDEx Docs" class="md-nav__button md-logo" aria-label="VoDEx Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>

    </a>
    VoDEx Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/LemonJust/vodex" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    LemonJust/vodex
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../qstart/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Quick Start
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../qstart/new_experiment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Experiment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../qstart/load_experiment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load Experiment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../qstart/load_volumes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load Volumes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    API
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Annotation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Annotation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.vodex.annotation" class="md-nav__link">
    annotation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.annotation.Annotation" class="md-nav__link">
    Annotation
  </a>
  
    <nav class="md-nav" aria-label="Annotation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Annotation.cycle_info" class="md-nav__link">
    cycle_info()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Annotation.from_cycle" class="md-nav__link">
    from_cycle()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Annotation.from_df" class="md-nav__link">
    from_df()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Annotation.from_timeline" class="md-nav__link">
    from_timeline()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Annotation.get_timeline" class="md-nav__link">
    get_timeline()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.annotation.Cycle" class="md-nav__link">
    Cycle
  </a>
  
    <nav class="md-nav" aria-label="Cycle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Cycle.fit_cycles_to_frames" class="md-nav__link">
    fit_cycles_to_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Cycle.fit_frames" class="md-nav__link">
    fit_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Cycle.fit_labels_to_frames" class="md-nav__link">
    fit_labels_to_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Cycle.from_df" class="md-nav__link">
    from_df()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Cycle.from_dict" class="md-nav__link">
    from_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Cycle.from_json" class="md-nav__link">
    from_json()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Cycle.to_df" class="md-nav__link">
    to_df()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Cycle.to_dict" class="md-nav__link">
    to_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Cycle.to_json" class="md-nav__link">
    to_json()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.annotation.Labels" class="md-nav__link">
    Labels
  </a>
  
    <nav class="md-nav" aria-label="Labels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Labels.from_df" class="md-nav__link">
    from_df()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Labels.from_dict" class="md-nav__link">
    from_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.annotation.TimeLabel" class="md-nav__link">
    TimeLabel
  </a>
  
    <nav class="md-nav" aria-label="TimeLabel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.TimeLabel.from_dict" class="md-nav__link">
    from_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.TimeLabel.to_dict" class="md-nav__link">
    to_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.annotation.Timeline" class="md-nav__link">
    Timeline
  </a>
  
    <nav class="md-nav" aria-label="Timeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Timeline.from_df" class="md-nav__link">
    from_df()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Timeline.from_dict" class="md-nav__link">
    from_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Timeline.from_json" class="md-nav__link">
    from_json()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Timeline.get_label_per_frame" class="md-nav__link">
    get_label_per_frame()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Timeline.to_df" class="md-nav__link">
    to_df()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Timeline.to_dict" class="md-nav__link">
    to_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.annotation.Timeline.to_json" class="md-nav__link">
    to_json()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dbmethods/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dbmethods
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../loaders/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Loaders
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../experiment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experiment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../napari/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    napari_vodex
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            napari_vodex
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../napari/how-to/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="vodexannotation">vodex.annotation</h1>


<div class="doc doc-object doc-module">



<a id="src.vodex.annotation"></a>
  <div class="doc doc-contents first">
  
      <p>This module provides the classes for constructing time annotations for imaging data.</p>
<p>'TimeLabel', 'Labels', 'Cycle', 'Timeline', and 'Annotation' classes help to construct and store time annotations. The
'TimeLabel' class stores information about specific time-located events during the experiment, such as a specific
condition described by a group and label. The 'Labels' class stores information about a group of time labels,
such as temperature, light, sound, image on the screen, drug, or behavior. The 'Cycle' class stores and preprocesses
information about repeated cycles of labels, useful for creating annotations for periodic conditions. The 'Timeline'
class stores and preprocesses information about the sequence of labels, useful for creating annotations for
non-periodic conditions. Finally, the 'Annotation' class stores and preprocesses information about the time annotation
of the experiment; it uses either the 'Cycle' or 'Timeline' classes to initialize the annotation.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="src.vodex.annotation.Annotation" class="doc doc-heading">
          <code>Annotation</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Time annotation of the experiment.</p>
<p>Either frame_to_label_dict or n_frames need to be provided to infer the number of frames.
If both are provided , they need to agree.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>labels</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Labels" href="#src.vodex.annotation.Labels">Labels</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Labels used to build the annotation</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>info</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a short description of the annotation</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>frame_to_label</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.annotation.TimeLabel" href="#src.vodex.annotation.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>what label it is for each frame</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>frame_to_cycle</code></td>
          <td>
                <code><span title="typing.List">List</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>what cycle it is for each frame</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>cycle</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Cycle" href="#src.vodex.annotation.Cycle">Cycle</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>for annotation from cycles keeps the cycle</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>total number of frames, will be inferred from frame_to_label if not provided</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/vodex/annotation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-775">775</a></span>
<span class="normal"><a href="#__codelineno-0-776">776</a></span>
<span class="normal"><a href="#__codelineno-0-777">777</a></span>
<span class="normal"><a href="#__codelineno-0-778">778</a></span>
<span class="normal"><a href="#__codelineno-0-779">779</a></span>
<span class="normal"><a href="#__codelineno-0-780">780</a></span>
<span class="normal"><a href="#__codelineno-0-781">781</a></span>
<span class="normal"><a href="#__codelineno-0-782">782</a></span>
<span class="normal"><a href="#__codelineno-0-783">783</a></span>
<span class="normal"><a href="#__codelineno-0-784">784</a></span>
<span class="normal"><a href="#__codelineno-0-785">785</a></span>
<span class="normal"><a href="#__codelineno-0-786">786</a></span>
<span class="normal"><a href="#__codelineno-0-787">787</a></span>
<span class="normal"><a href="#__codelineno-0-788">788</a></span>
<span class="normal"><a href="#__codelineno-0-789">789</a></span>
<span class="normal"><a href="#__codelineno-0-790">790</a></span>
<span class="normal"><a href="#__codelineno-0-791">791</a></span>
<span class="normal"><a href="#__codelineno-0-792">792</a></span>
<span class="normal"><a href="#__codelineno-0-793">793</a></span>
<span class="normal"><a href="#__codelineno-0-794">794</a></span>
<span class="normal"><a href="#__codelineno-0-795">795</a></span>
<span class="normal"><a href="#__codelineno-0-796">796</a></span>
<span class="normal"><a href="#__codelineno-0-797">797</a></span>
<span class="normal"><a href="#__codelineno-0-798">798</a></span>
<span class="normal"><a href="#__codelineno-0-799">799</a></span>
<span class="normal"><a href="#__codelineno-0-800">800</a></span>
<span class="normal"><a href="#__codelineno-0-801">801</a></span>
<span class="normal"><a href="#__codelineno-0-802">802</a></span>
<span class="normal"><a href="#__codelineno-0-803">803</a></span>
<span class="normal"><a href="#__codelineno-0-804">804</a></span>
<span class="normal"><a href="#__codelineno-0-805">805</a></span>
<span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span>
<span class="normal"><a href="#__codelineno-0-810">810</a></span>
<span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span>
<span class="normal"><a href="#__codelineno-0-815">815</a></span>
<span class="normal"><a href="#__codelineno-0-816">816</a></span>
<span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span>
<span class="normal"><a href="#__codelineno-0-823">823</a></span>
<span class="normal"><a href="#__codelineno-0-824">824</a></span>
<span class="normal"><a href="#__codelineno-0-825">825</a></span>
<span class="normal"><a href="#__codelineno-0-826">826</a></span>
<span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span>
<span class="normal"><a href="#__codelineno-0-830">830</a></span>
<span class="normal"><a href="#__codelineno-0-831">831</a></span>
<span class="normal"><a href="#__codelineno-0-832">832</a></span>
<span class="normal"><a href="#__codelineno-0-833">833</a></span>
<span class="normal"><a href="#__codelineno-0-834">834</a></span>
<span class="normal"><a href="#__codelineno-0-835">835</a></span>
<span class="normal"><a href="#__codelineno-0-836">836</a></span>
<span class="normal"><a href="#__codelineno-0-837">837</a></span>
<span class="normal"><a href="#__codelineno-0-838">838</a></span>
<span class="normal"><a href="#__codelineno-0-839">839</a></span>
<span class="normal"><a href="#__codelineno-0-840">840</a></span>
<span class="normal"><a href="#__codelineno-0-841">841</a></span>
<span class="normal"><a href="#__codelineno-0-842">842</a></span>
<span class="normal"><a href="#__codelineno-0-843">843</a></span>
<span class="normal"><a href="#__codelineno-0-844">844</a></span>
<span class="normal"><a href="#__codelineno-0-845">845</a></span>
<span class="normal"><a href="#__codelineno-0-846">846</a></span>
<span class="normal"><a href="#__codelineno-0-847">847</a></span>
<span class="normal"><a href="#__codelineno-0-848">848</a></span>
<span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span>
<span class="normal"><a href="#__codelineno-0-851">851</a></span>
<span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span>
<span class="normal"><a href="#__codelineno-0-863">863</a></span>
<span class="normal"><a href="#__codelineno-0-864">864</a></span>
<span class="normal"><a href="#__codelineno-0-865">865</a></span>
<span class="normal"><a href="#__codelineno-0-866">866</a></span>
<span class="normal"><a href="#__codelineno-0-867">867</a></span>
<span class="normal"><a href="#__codelineno-0-868">868</a></span>
<span class="normal"><a href="#__codelineno-0-869">869</a></span>
<span class="normal"><a href="#__codelineno-0-870">870</a></span>
<span class="normal"><a href="#__codelineno-0-871">871</a></span>
<span class="normal"><a href="#__codelineno-0-872">872</a></span>
<span class="normal"><a href="#__codelineno-0-873">873</a></span>
<span class="normal"><a href="#__codelineno-0-874">874</a></span>
<span class="normal"><a href="#__codelineno-0-875">875</a></span>
<span class="normal"><a href="#__codelineno-0-876">876</a></span>
<span class="normal"><a href="#__codelineno-0-877">877</a></span>
<span class="normal"><a href="#__codelineno-0-878">878</a></span>
<span class="normal"><a href="#__codelineno-0-879">879</a></span>
<span class="normal"><a href="#__codelineno-0-880">880</a></span>
<span class="normal"><a href="#__codelineno-0-881">881</a></span>
<span class="normal"><a href="#__codelineno-0-882">882</a></span>
<span class="normal"><a href="#__codelineno-0-883">883</a></span>
<span class="normal"><a href="#__codelineno-0-884">884</a></span>
<span class="normal"><a href="#__codelineno-0-885">885</a></span>
<span class="normal"><a href="#__codelineno-0-886">886</a></span>
<span class="normal"><a href="#__codelineno-0-887">887</a></span>
<span class="normal"><a href="#__codelineno-0-888">888</a></span>
<span class="normal"><a href="#__codelineno-0-889">889</a></span>
<span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span>
<span class="normal"><a href="#__codelineno-0-901">901</a></span>
<span class="normal"><a href="#__codelineno-0-902">902</a></span>
<span class="normal"><a href="#__codelineno-0-903">903</a></span>
<span class="normal"><a href="#__codelineno-0-904">904</a></span>
<span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span>
<span class="normal"><a href="#__codelineno-0-907">907</a></span>
<span class="normal"><a href="#__codelineno-0-908">908</a></span>
<span class="normal"><a href="#__codelineno-0-909">909</a></span>
<span class="normal"><a href="#__codelineno-0-910">910</a></span>
<span class="normal"><a href="#__codelineno-0-911">911</a></span>
<span class="normal"><a href="#__codelineno-0-912">912</a></span>
<span class="normal"><a href="#__codelineno-0-913">913</a></span>
<span class="normal"><a href="#__codelineno-0-914">914</a></span>
<span class="normal"><a href="#__codelineno-0-915">915</a></span>
<span class="normal"><a href="#__codelineno-0-916">916</a></span>
<span class="normal"><a href="#__codelineno-0-917">917</a></span>
<span class="normal"><a href="#__codelineno-0-918">918</a></span>
<span class="normal"><a href="#__codelineno-0-919">919</a></span>
<span class="normal"><a href="#__codelineno-0-920">920</a></span>
<span class="normal"><a href="#__codelineno-0-921">921</a></span>
<span class="normal"><a href="#__codelineno-0-922">922</a></span>
<span class="normal"><a href="#__codelineno-0-923">923</a></span>
<span class="normal"><a href="#__codelineno-0-924">924</a></span>
<span class="normal"><a href="#__codelineno-0-925">925</a></span>
<span class="normal"><a href="#__codelineno-0-926">926</a></span>
<span class="normal"><a href="#__codelineno-0-927">927</a></span>
<span class="normal"><a href="#__codelineno-0-928">928</a></span>
<span class="normal"><a href="#__codelineno-0-929">929</a></span>
<span class="normal"><a href="#__codelineno-0-930">930</a></span>
<span class="normal"><a href="#__codelineno-0-931">931</a></span>
<span class="normal"><a href="#__codelineno-0-932">932</a></span>
<span class="normal"><a href="#__codelineno-0-933">933</a></span>
<span class="normal"><a href="#__codelineno-0-934">934</a></span>
<span class="normal"><a href="#__codelineno-0-935">935</a></span>
<span class="normal"><a href="#__codelineno-0-936">936</a></span>
<span class="normal"><a href="#__codelineno-0-937">937</a></span>
<span class="normal"><a href="#__codelineno-0-938">938</a></span>
<span class="normal"><a href="#__codelineno-0-939">939</a></span>
<span class="normal"><a href="#__codelineno-0-940">940</a></span>
<span class="normal"><a href="#__codelineno-0-941">941</a></span>
<span class="normal"><a href="#__codelineno-0-942">942</a></span>
<span class="normal"><a href="#__codelineno-0-943">943</a></span>
<span class="normal"><a href="#__codelineno-0-944">944</a></span>
<span class="normal"><a href="#__codelineno-0-945">945</a></span>
<span class="normal"><a href="#__codelineno-0-946">946</a></span>
<span class="normal"><a href="#__codelineno-0-947">947</a></span>
<span class="normal"><a href="#__codelineno-0-948">948</a></span>
<span class="normal"><a href="#__codelineno-0-949">949</a></span>
<span class="normal"><a href="#__codelineno-0-950">950</a></span>
<span class="normal"><a href="#__codelineno-0-951">951</a></span>
<span class="normal"><a href="#__codelineno-0-952">952</a></span>
<span class="normal"><a href="#__codelineno-0-953">953</a></span>
<span class="normal"><a href="#__codelineno-0-954">954</a></span>
<span class="normal"><a href="#__codelineno-0-955">955</a></span>
<span class="normal"><a href="#__codelineno-0-956">956</a></span>
<span class="normal"><a href="#__codelineno-0-957">957</a></span>
<span class="normal"><a href="#__codelineno-0-958">958</a></span>
<span class="normal"><a href="#__codelineno-0-959">959</a></span>
<span class="normal"><a href="#__codelineno-0-960">960</a></span>
<span class="normal"><a href="#__codelineno-0-961">961</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-775" name="__codelineno-0-775"></a><span class="k">class</span> <span class="nc">Annotation</span><span class="p">:</span>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a><span class="sd">    Time annotation of the experiment.</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a><span class="sd">    Either frame_to_label_dict or n_frames need to be provided to infer the number of frames.</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a><span class="sd">    If both are provided , they need to agree.</span>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a><span class="sd">        labels: Labels used to build the annotation</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a><span class="sd">        info: a short description of the annotation</span>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a><span class="sd">        frame_to_label: what label it is for each frame</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a><span class="sd">        frame_to_cycle: what cycle it is for each frame</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a><span class="sd">        cycle: for annotation from cycles keeps the cycle</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a><span class="sd">        n_frames: total number of frames, will be inferred from frame_to_label if not provided</span>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a>                 <span class="n">frame_to_label</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">],</span> <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a>                 <span class="n">cycle</span><span class="p">:</span> <span class="n">Cycle</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">frame_to_cycle</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>        <span class="c1"># get total experiment length in frames, check that it is consistent</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>        <span class="k">if</span> <span class="n">frame_to_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a>            <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>                <span class="n">frame_to_label</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;The number of frames in the frame_to_label,&quot;</span> \
<a id="__codelineno-0-799" name="__codelineno-0-799"></a>                                 <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frame_to_label</span><span class="p">)</span><span class="si">}</span><span class="s2">,&quot;</span> \
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>                                 <span class="sa">f</span><span class="s2">&quot;and the number of frames provided,&quot;</span> \
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>                                 <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n_frames</span><span class="si">}</span><span class="s2">, do not match.&quot;</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">=</span> <span class="n">n_frames</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">frame_to_label</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">group</span>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="n">info</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>        <span class="c1"># None if the annotation is not from a cycle</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>        <span class="k">assert</span> <span class="p">(</span><span class="n">frame_to_cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>                <span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">),</span> <span class="s2">&quot;Creating Annotation: &quot;</span> \
<a id="__codelineno-0-812" name="__codelineno-0-812"></a>                                <span class="s2">&quot;You have to provide both cycle and frame_to_cycle.&quot;</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>        <span class="c1"># if cycle is provided , check the input and add the info</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>        <span class="k">if</span> <span class="n">cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">frame_to_cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>            <span class="c1"># check that frame_to_cycle is int</span>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>            <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>                <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a>                <span class="n">frame_to_cycle</span><span class="p">),</span> <span class="s2">&quot;frame_to_cycle should be a list of int&quot;</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a>            <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>                <span class="n">frame_to_cycle</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;The number of frames in the frame_to_cycle,&quot;</span> \
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>                                 <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frame_to_cycle</span><span class="p">)</span><span class="si">}</span><span class="s2">,&quot;</span> \
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>                                 <span class="sa">f</span><span class="s2">&quot;and the number of frames provided,&quot;</span> \
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>                                 <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n_frames</span><span class="si">}</span><span class="s2">, do not match.&quot;</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">=</span> <span class="n">cycle</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_cycle</span> <span class="o">=</span> <span class="n">frame_to_cycle</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Annotation</span><span class="p">):</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a>            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n_frames</span><span class="p">,</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_label</span><span class="p">,</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">labels</span><span class="p">,</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">info</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>            <span class="p">]</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a>            <span class="c1"># if one of the annotations has a cycle but the other doesn&#39;t</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">!=</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a>                <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>            <span class="c1"># if both have a cycle, compare cycles as well</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>                <span class="n">is_same</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">cycle</span><span class="p">,</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_cycle</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_cycle</span><span class="p">])</span>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a>            <span class="nb">print</span><span class="p">(</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a>                <span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Annotation</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a>    <span class="k">def</span> <span class="nf">from_cycle</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span> <span class="n">cycle</span><span class="p">:</span> <span class="n">Cycle</span><span class="p">,</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a>                   <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a><span class="sd">        Creates an Annotation object from Cycle.</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a><span class="sd">            n_frames: total number of frames, must be provided</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a><span class="sd">            labels: Labels used to build the annotation</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a><span class="sd">            cycle: the cycle to create annotation from</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a><span class="sd">            info: a short description of the annotation</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a><span class="sd">            (Annotation): Annotation object</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a>        <span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">fit_labels_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a>        <span class="n">frame_to_cycle</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">fit_cycles_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a>                   <span class="n">cycle</span><span class="o">=</span><span class="n">cycle</span><span class="p">,</span> <span class="n">frame_to_cycle</span><span class="o">=</span><span class="n">frame_to_cycle</span><span class="p">)</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a>    <span class="k">def</span> <span class="nf">from_timeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span> <span class="n">timeline</span><span class="p">:</span> <span class="n">Timeline</span><span class="p">,</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a>                      <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a><span class="sd">        Creates an Annotation object from Timeline.</span>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a><span class="sd">            n_frames: total number of frames, must be provided</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="sd">            labels: Labels used to build the annotation</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a><span class="sd">            timeline: the timeline to create annotation from</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a><span class="sd">            info: a short description of the annotation</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a><span class="sd">            (Annotation): Annotation object</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a>        <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">==</span> <span class="n">timeline</span><span class="o">.</span><span class="n">full_length</span><span class="p">,</span> <span class="s2">&quot;number of frames and total timing should be the same&quot;</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a>        <span class="c1"># make a fake cycle the length of the whole recording</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a>        <span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">timeline</span><span class="o">.</span><span class="n">per_frame_list</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a>    <span class="k">def</span> <span class="nf">from_df</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a>                <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a>                <span class="n">is_cycle</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a><span class="sd">        Creates an Annotation object from a dataframe.</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a><span class="sd">            n_frames: total number of frames, must be provided</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a><span class="sd">            df: dataframe with columns &#39;frame&#39; and &#39;label&#39;</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a><span class="sd">            timing_conversion: a dictionary to convert the timing of the annotation.</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a><span class="sd">                For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a><span class="sd">                and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a><span class="sd">                You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a><span class="sd">                for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a><span class="sd">                You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a><span class="sd">                but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a><span class="sd">                for example this is valid for the example above:</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a><span class="sd">                If timing_conversion is None, then the timing is not converted</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a><span class="sd">                and &#39;duration_frames&#39; must be provided in the dataframe.</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a><span class="sd">            is_cycle: if True, the annotation is for a cycle</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a><span class="sd">            info: a short description of the annotation</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a><span class="sd">            (Annotation): Annotation object</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a>        <span class="k">if</span> <span class="n">is_cycle</span><span class="p">:</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a>            <span class="n">cycle</span> <span class="o">=</span> <span class="n">Cycle</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="o">=</span><span class="n">timing_conversion</span><span class="p">)</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a>            <span class="n">labels</span> <span class="o">=</span> <span class="n">Labels</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a>            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_cycle</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a>            <span class="n">timeline</span> <span class="o">=</span> <span class="n">Timeline</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="o">=</span><span class="n">timing_conversion</span><span class="p">)</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a>            <span class="n">labels</span> <span class="o">=</span> <span class="n">Labels</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a>            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_timeline</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">timeline</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a>    <span class="k">def</span> <span class="nf">get_timeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timeline</span><span class="p">:</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a><span class="sd">        Transforms frame_to_label to Timeline</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a><span class="sd">            timeline of the resulting annotation</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a>        <span class="n">duration</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a>        <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a>        <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span><span class="p">):</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a>            <span class="n">duration</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">group</span><span class="p">))</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a>            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a>        <span class="k">return</span> <span class="n">Timeline</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a>    <span class="k">def</span> <span class="nf">cycle_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a><span class="sd">        Creates and returns a description of a cycle.</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a><span class="sd">            human-readable information about the cycle.</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a>            <span class="n">cycle_info</span> <span class="o">=</span> <span class="s2">&quot;Annotation doesn&#39;t have a cycle&quot;</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a>            <span class="n">cycle_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="p">)</span><span class="si">}</span><span class="s2"> full cycles&quot;</span> \
<a id="__codelineno-0-949" name="__codelineno-0-949"></a>                         <span class="sa">f</span><span class="s2">&quot; [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">cycle_length</span><span class="si">}</span><span class="s2"> exactly]</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a>            <span class="n">cycle_info</span> <span class="o">=</span> <span class="n">cycle_info</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a>        <span class="k">return</span> <span class="n">cycle_info</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a>        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Annotation type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a>            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a>        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Total frames : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a>        <span class="k">return</span> <span class="n">description</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Annotation.cycle_info" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">cycle_info</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates and returns a description of a cycle.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>human-readable information about the cycle.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-938">938</a></span>
<span class="normal"><a href="#__codelineno-0-939">939</a></span>
<span class="normal"><a href="#__codelineno-0-940">940</a></span>
<span class="normal"><a href="#__codelineno-0-941">941</a></span>
<span class="normal"><a href="#__codelineno-0-942">942</a></span>
<span class="normal"><a href="#__codelineno-0-943">943</a></span>
<span class="normal"><a href="#__codelineno-0-944">944</a></span>
<span class="normal"><a href="#__codelineno-0-945">945</a></span>
<span class="normal"><a href="#__codelineno-0-946">946</a></span>
<span class="normal"><a href="#__codelineno-0-947">947</a></span>
<span class="normal"><a href="#__codelineno-0-948">948</a></span>
<span class="normal"><a href="#__codelineno-0-949">949</a></span>
<span class="normal"><a href="#__codelineno-0-950">950</a></span>
<span class="normal"><a href="#__codelineno-0-951">951</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-938" name="__codelineno-0-938"></a><span class="k">def</span> <span class="nf">cycle_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a><span class="sd">    Creates and returns a description of a cycle.</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a><span class="sd">        human-readable information about the cycle.</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a>        <span class="n">cycle_info</span> <span class="o">=</span> <span class="s2">&quot;Annotation doesn&#39;t have a cycle&quot;</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a>        <span class="n">cycle_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="p">)</span><span class="si">}</span><span class="s2"> full cycles&quot;</span> \
<a id="__codelineno-0-949" name="__codelineno-0-949"></a>                     <span class="sa">f</span><span class="s2">&quot; [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">cycle_length</span><span class="si">}</span><span class="s2"> exactly]</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a>        <span class="n">cycle_info</span> <span class="o">=</span> <span class="n">cycle_info</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a>    <span class="k">return</span> <span class="n">cycle_info</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Annotation.from_cycle" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_cycle</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates an Annotation object from Cycle.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>total number of frames, must be provided</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>labels</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Labels" href="#src.vodex.annotation.Labels">Labels</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Labels used to build the annotation</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cycle</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Cycle" href="#src.vodex.annotation.Cycle">Cycle</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the cycle to create annotation from</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>info</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a short description of the annotation</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    (Annotation): Annotation object</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span>
<span class="normal"><a href="#__codelineno-0-851">851</a></span>
<span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span>
<span class="normal"><a href="#__codelineno-0-863">863</a></span>
<span class="normal"><a href="#__codelineno-0-864">864</a></span>
<span class="normal"><a href="#__codelineno-0-865">865</a></span>
<span class="normal"><a href="#__codelineno-0-866">866</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-849" name="__codelineno-0-849"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a><span class="k">def</span> <span class="nf">from_cycle</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span> <span class="n">cycle</span><span class="p">:</span> <span class="n">Cycle</span><span class="p">,</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a>               <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a><span class="sd">    Creates an Annotation object from Cycle.</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a><span class="sd">        n_frames: total number of frames, must be provided</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a><span class="sd">        labels: Labels used to build the annotation</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a><span class="sd">        cycle: the cycle to create annotation from</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a><span class="sd">        info: a short description of the annotation</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a><span class="sd">        (Annotation): Annotation object</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a>    <span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">fit_labels_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a>    <span class="n">frame_to_cycle</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">fit_cycles_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a>               <span class="n">cycle</span><span class="o">=</span><span class="n">cycle</span><span class="p">,</span> <span class="n">frame_to_cycle</span><span class="o">=</span><span class="n">frame_to_cycle</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Annotation.from_df" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_df</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_cycle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates an Annotation object from a dataframe.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>total number of frames, must be provided</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>df</code></td>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dataframe with columns 'frame' and 'label'</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>timing_conversion</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary to convert the timing of the annotation.
For example, if you want to convert the timing from frames to seconds,
and you were recording at 30 frames per second, you can use
timing_conversion = {'frames': 1, 'seconds': 1/30}
You can list multiple units in the dictionary, and the timing will be converted to all of them,
for example if there are also 10 frames per volume, you can use:
timing_conversion = {'frames': 1, 'seconds': 1/30, 'volumes': 1/10}
You must include 'frames' in the dictionary! The value of frames does not have to be 1,
but it must be consistent with the other units. the rest of the values.
for example this is valid for the example above:
timing_conversion = {'frames': 10, 'seconds': 1/3, 'volumes': 1}.
If timing_conversion is None, then the timing is not converted
and 'duration_frames' must be provided in the dataframe.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>is_cycle</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if True, the annotation is for a cycle</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>info</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a short description of the annotation</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    (Annotation): Annotation object</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-887">887</a></span>
<span class="normal"><a href="#__codelineno-0-888">888</a></span>
<span class="normal"><a href="#__codelineno-0-889">889</a></span>
<span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span>
<span class="normal"><a href="#__codelineno-0-901">901</a></span>
<span class="normal"><a href="#__codelineno-0-902">902</a></span>
<span class="normal"><a href="#__codelineno-0-903">903</a></span>
<span class="normal"><a href="#__codelineno-0-904">904</a></span>
<span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span>
<span class="normal"><a href="#__codelineno-0-907">907</a></span>
<span class="normal"><a href="#__codelineno-0-908">908</a></span>
<span class="normal"><a href="#__codelineno-0-909">909</a></span>
<span class="normal"><a href="#__codelineno-0-910">910</a></span>
<span class="normal"><a href="#__codelineno-0-911">911</a></span>
<span class="normal"><a href="#__codelineno-0-912">912</a></span>
<span class="normal"><a href="#__codelineno-0-913">913</a></span>
<span class="normal"><a href="#__codelineno-0-914">914</a></span>
<span class="normal"><a href="#__codelineno-0-915">915</a></span>
<span class="normal"><a href="#__codelineno-0-916">916</a></span>
<span class="normal"><a href="#__codelineno-0-917">917</a></span>
<span class="normal"><a href="#__codelineno-0-918">918</a></span>
<span class="normal"><a href="#__codelineno-0-919">919</a></span>
<span class="normal"><a href="#__codelineno-0-920">920</a></span>
<span class="normal"><a href="#__codelineno-0-921">921</a></span>
<span class="normal"><a href="#__codelineno-0-922">922</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-887" name="__codelineno-0-887"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="k">def</span> <span class="nf">from_df</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a>            <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a>            <span class="n">is_cycle</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a><span class="sd">    Creates an Annotation object from a dataframe.</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a><span class="sd">        n_frames: total number of frames, must be provided</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a><span class="sd">        df: dataframe with columns &#39;frame&#39; and &#39;label&#39;</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a><span class="sd">        timing_conversion: a dictionary to convert the timing of the annotation.</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a><span class="sd">            For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a><span class="sd">            and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a><span class="sd">            You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a><span class="sd">            for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a><span class="sd">            You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a><span class="sd">            but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a><span class="sd">            for example this is valid for the example above:</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a><span class="sd">            If timing_conversion is None, then the timing is not converted</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a><span class="sd">            and &#39;duration_frames&#39; must be provided in the dataframe.</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a><span class="sd">        is_cycle: if True, the annotation is for a cycle</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a><span class="sd">        info: a short description of the annotation</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a><span class="sd">        (Annotation): Annotation object</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a>    <span class="k">if</span> <span class="n">is_cycle</span><span class="p">:</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a>        <span class="n">cycle</span> <span class="o">=</span> <span class="n">Cycle</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="o">=</span><span class="n">timing_conversion</span><span class="p">)</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a>        <span class="n">labels</span> <span class="o">=</span> <span class="n">Labels</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_cycle</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a>        <span class="n">timeline</span> <span class="o">=</span> <span class="n">Timeline</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="o">=</span><span class="n">timing_conversion</span><span class="p">)</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a>        <span class="n">labels</span> <span class="o">=</span> <span class="n">Labels</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_timeline</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">timeline</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Annotation.from_timeline" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_timeline</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">timeline</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates an Annotation object from Timeline.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>total number of frames, must be provided</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>labels</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Labels" href="#src.vodex.annotation.Labels">Labels</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Labels used to build the annotation</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>timeline</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Timeline" href="#src.vodex.annotation.Timeline">Timeline</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the timeline to create annotation from</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>info</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a short description of the annotation</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    (Annotation): Annotation object</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-868">868</a></span>
<span class="normal"><a href="#__codelineno-0-869">869</a></span>
<span class="normal"><a href="#__codelineno-0-870">870</a></span>
<span class="normal"><a href="#__codelineno-0-871">871</a></span>
<span class="normal"><a href="#__codelineno-0-872">872</a></span>
<span class="normal"><a href="#__codelineno-0-873">873</a></span>
<span class="normal"><a href="#__codelineno-0-874">874</a></span>
<span class="normal"><a href="#__codelineno-0-875">875</a></span>
<span class="normal"><a href="#__codelineno-0-876">876</a></span>
<span class="normal"><a href="#__codelineno-0-877">877</a></span>
<span class="normal"><a href="#__codelineno-0-878">878</a></span>
<span class="normal"><a href="#__codelineno-0-879">879</a></span>
<span class="normal"><a href="#__codelineno-0-880">880</a></span>
<span class="normal"><a href="#__codelineno-0-881">881</a></span>
<span class="normal"><a href="#__codelineno-0-882">882</a></span>
<span class="normal"><a href="#__codelineno-0-883">883</a></span>
<span class="normal"><a href="#__codelineno-0-884">884</a></span>
<span class="normal"><a href="#__codelineno-0-885">885</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-868" name="__codelineno-0-868"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a><span class="k">def</span> <span class="nf">from_timeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span> <span class="n">timeline</span><span class="p">:</span> <span class="n">Timeline</span><span class="p">,</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a>                  <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a><span class="sd">    Creates an Annotation object from Timeline.</span>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a><span class="sd">        n_frames: total number of frames, must be provided</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="sd">        labels: Labels used to build the annotation</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a><span class="sd">        timeline: the timeline to create annotation from</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a><span class="sd">        info: a short description of the annotation</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a><span class="sd">        (Annotation): Annotation object</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a>    <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">==</span> <span class="n">timeline</span><span class="o">.</span><span class="n">full_length</span><span class="p">,</span> <span class="s2">&quot;number of frames and total timing should be the same&quot;</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a>    <span class="c1"># make a fake cycle the length of the whole recording</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a>    <span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">timeline</span><span class="o">.</span><span class="n">per_frame_list</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Annotation.get_timeline" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_timeline</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Transforms frame_to_label to Timeline</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Timeline" href="#src.vodex.annotation.Timeline">Timeline</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>timeline of the resulting annotation</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-924">924</a></span>
<span class="normal"><a href="#__codelineno-0-925">925</a></span>
<span class="normal"><a href="#__codelineno-0-926">926</a></span>
<span class="normal"><a href="#__codelineno-0-927">927</a></span>
<span class="normal"><a href="#__codelineno-0-928">928</a></span>
<span class="normal"><a href="#__codelineno-0-929">929</a></span>
<span class="normal"><a href="#__codelineno-0-930">930</a></span>
<span class="normal"><a href="#__codelineno-0-931">931</a></span>
<span class="normal"><a href="#__codelineno-0-932">932</a></span>
<span class="normal"><a href="#__codelineno-0-933">933</a></span>
<span class="normal"><a href="#__codelineno-0-934">934</a></span>
<span class="normal"><a href="#__codelineno-0-935">935</a></span>
<span class="normal"><a href="#__codelineno-0-936">936</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-924" name="__codelineno-0-924"></a><span class="k">def</span> <span class="nf">get_timeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timeline</span><span class="p">:</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a><span class="sd">    Transforms frame_to_label to Timeline</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a><span class="sd">        timeline of the resulting annotation</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a>    <span class="n">duration</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a>    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a>    <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span><span class="p">):</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a>        <span class="n">duration</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">group</span><span class="p">))</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a>        <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a>    <span class="k">return</span> <span class="n">Timeline</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="src.vodex.annotation.Cycle" class="doc doc-heading">
          <code>Cycle</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Stores and preprocesses information about the repeated cycle of labels.
Use it to create annotation when you have some periodic conditions.
For example: light on , light off, light on, light off... will be made of list of labels [light_on, light_off]
that repeat to cover the whole tie of the experiment. All labels must be from the same label group.
Create multiple cycles to describe different label groups.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>label_order</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.annotation.TimeLabel" href="#src.vodex.annotation.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of labels in the right order in which they follow</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>duration</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="numpy.NDArray">NDArray</span>, <span title="typing.List">List</span>[int]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>duration of the corresponding labels, in frames (based on your imaging).
Note that these are frames, not volumes !</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the name of the cycle, the same as the name of the grou p of the labels.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>label_order</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.annotation.TimeLabel" href="#src.vodex.annotation.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the order in which the labels follow in a cycle.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>duration</code></td>
          <td>
                <code><span title="typing.List">List</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the duration of each label from the label_order ( in frames )</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>cycle_length</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the length of the cycle ( in frames )</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>per_frame_list</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.annotation.TimeLabel" href="#src.vodex.annotation.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>mapping of frames to corresponding frames for one full cycle only.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/vodex/annotation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="k">class</span> <span class="nc">Cycle</span><span class="p">:</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="sd">    Stores and preprocesses information about the repeated cycle of labels.</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="sd">    Use it to create annotation when you have some periodic conditions.</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="sd">    For example: light on , light off, light on, light off... will be made of list of labels [light_on, light_off]</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">    that repeat to cover the whole tie of the experiment. All labels must be from the same label group.</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="sd">    Create multiple cycles to describe different label groups.</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a><span class="sd">        label_order: a list of labels in the right order in which they follow</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="sd">        duration: duration of the corresponding labels, in frames (based on your imaging).</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="sd">            Note that these are frames, not volumes !</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a><span class="sd">        name: the name of the cycle, the same as the name of the grou p of the labels.</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="sd">        label_order: the order in which the labels follow in a cycle.</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="sd">        duration: the duration of each label from the label_order ( in frames )</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a><span class="sd">        cycle_length: the length of the cycle ( in frames )</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a><span class="sd">        per_frame_list: mapping of frames to corresponding frames for one full cycle only.</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_order</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">],</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>                 <span class="n">duration</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]):</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>        <span class="c1"># check that all labels are from the same group</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>        <span class="n">label_group</span> <span class="o">=</span> <span class="n">label_order</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">group</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">label_order</span><span class="p">:</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>            <span class="k">assert</span> <span class="n">label</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">label_group</span><span class="p">,</span> \
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>                <span class="sa">f</span><span class="s2">&quot;All labels should be from the same group, but got </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">group</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">label_group</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>        <span class="k">assert</span> <span class="n">label_group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> \
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>            <span class="sa">f</span><span class="s2">&quot;All labels should be from the same group, label group can not be None&quot;</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>        <span class="c1"># check that timing is int</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>                   <span class="n">duration</span><span class="p">),</span> <span class="s2">&quot;timing should be a list of int&quot;</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">label_group</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]</span> <span class="o">=</span> <span class="n">label_order</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">list_of_int</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>        <span class="c1"># list the length of the cycle, each element is the TimeLabel</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>        <span class="c1"># TODO : turn it into an index ?</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_label_per_frame</span><span class="p">()</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Cycle</span><span class="p">):</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">label_order</span><span class="p">,</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">cycle_length</span><span class="p">,</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">per_frame_list</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>            <span class="p">]</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Cycle</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>    <span class="k">def</span> <span class="nf">_get_label_per_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="sd">        Creates a list of labels per frame for one cycle only.</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">            labels per frame for one full cycle</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>        <span class="n">per_frame_label_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>            <span class="n">per_frame_label_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_time</span> <span class="o">*</span> <span class="p">[</span><span class="n">label</span><span class="p">])</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>        <span class="k">return</span> <span class="n">per_frame_label_list</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cycle : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Length: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Label </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: for </span><span class="si">{</span><span class="n">label_time</span><span class="si">}</span><span class="s2"> frames</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>        <span class="k">return</span> <span class="n">description</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>    <span class="k">def</span> <span class="nf">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="sd">        Calculates how many cycles you need to fully cover n_frames.</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="sd">        Assumes the cycle starts at the beginning of the recording.</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="sd">            n_frames: number of frames to cover, must be &gt;= 0.</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a><span class="sd">            number of cycles (n_cycles) necessary to cover n_frames:</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="sd">            n_cycles*self.cycle_length &gt;= n_frames</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>        <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;n_frames must be positive&quot;</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>        <span class="n">n_cycles</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">n_frames</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span><span class="p">))</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>        <span class="k">return</span> <span class="n">n_cycles</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>    <span class="k">def</span> <span class="nf">fit_labels_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a><span class="sd">        Create a list of labels corresponding to each frame in the range of n_frames</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a><span class="sd">            n_frames: number of frames to fit labels to, must be &gt;= 0.</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="sd">            labels per frame for each frame in range of n_frames</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>        <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>        <span class="n">label_per_frame_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span><span class="p">,</span> <span class="n">n_cycles</span><span class="p">)</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>        <span class="c1"># crop the tail</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">label_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">])</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>    <span class="k">def</span> <span class="nf">fit_cycles_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">        Create a list of cycle ids (what cycle iteration it is) corresponding to each frame in the range of n_frames</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">            n_frames: number of frames to fit cycle iterations to, must be &gt;= 0.</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a><span class="sd">            cycle id per frame for each frame in range of n_frames</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>        <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>        <span class="n">cycle_per_frame_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n_cycles</span><span class="p">):</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>            <span class="n">cycle_per_frame_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span><span class="p">)</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>        <span class="c1"># crop the tail</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>        <span class="k">return</span> <span class="n">cycle_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">]</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="sd">        Put all the information about a Cycle object into a dictionary.</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="sd">            a dictionary with fields &#39;timing&#39; and &#39;label_order&#39; which store self.duration and self.label order.</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>        <span class="n">label_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;timing&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="s1">&#39;label_order&#39;</span><span class="p">:</span> <span class="n">label_order</span><span class="p">}</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>        <span class="k">return</span> <span class="n">d</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>    <span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">        Put all the information about a Cycle object into a json file.</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">            a json with fields &#39;timing&#39; and &#39;label_order&#39; which store self.duration and self.label order.</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>    <span class="k">def</span> <span class="nf">to_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="sd">        Put all the information about a Cycle object into a dataframe.</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a><span class="sd">            timing_conversion: a dictionary to convert the timing into a different unit.</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="sd">                For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="sd">                and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a><span class="sd">                You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">                for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="sd">                You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="sd">                but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><span class="sd">                for example this is valid for the example above:</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">                if timing_conversion is None, then the timing is not converted.</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">                if timing_conversion is not None, then the timing is converted and both the original and converted</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">                timing are added to the dataframe.</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><span class="sd">            a dataframe with columns &#39;timing&#39;, &#39;group&#39;, &#39;name&#39; and &#39;description&#39;.</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><span class="sd">            &#39;timing&#39; will be written in all the units in the timing_conversion dictionary,</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="sd">            or just in frames, if timing_conversion is None.</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>        <span class="c1"># TODO: move to/from methids to a separte class and inherit both Cycle and Timeline from it</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>        <span class="c1"># prepare timing columns</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>        <span class="k">if</span> <span class="n">timing_conversion</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>            <span class="n">timing_conversion</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;frames&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>        <span class="k">assert</span> <span class="s1">&#39;frames&#39;</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="s2">&quot;frames must be in the timing_conversion dictionary&quot;</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>        <span class="n">timing_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">timing_columns</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">])</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>        <span class="c1"># write timing columns</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>        <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>            <span class="n">frames_per_unit</span> <span class="o">=</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="s1">&#39;frames&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="n">unit</span><span class="p">]</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>            <span class="n">duration</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span> <span class="o">/</span> <span class="n">frames_per_unit</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>            <span class="c1"># if all are integers, turn to integer</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">duration</span><span class="p">):</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>                <span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>            <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>        <span class="c1"># write labels</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">group</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">description</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>        <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a><span class="sd">        Create a Cycle object from a dictionary.</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a><span class="sd">            d: dictionary to initialize the cycle.</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><span class="sd">            (Cycle): a Cycle object with label_order and duration initialized from &#39;label_order&#39; and</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><span class="sd">                    &#39;timing&#39; fields of the dictionary.</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>        <span class="n">label_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">TimeLabel</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">ld</span><span class="p">)</span> <span class="k">for</span> <span class="n">ld</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;label_order&#39;</span><span class="p">]]</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">label_order</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;timing&#39;</span><span class="p">])</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>    <span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a><span class="sd">        Create a Cycle object from a json string.</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a><span class="sd">            j : json string to initialise the cycle</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a><span class="sd">            (Cycle): a Cycle object with label_order and duration initialised from &#39;label_order&#39; and</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><span class="sd">                    &#39;timing&#39; fields of the json srting.</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>        <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a>    <span class="k">def</span> <span class="nf">from_df</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="sd">        Create a Cycle object from a dataframe.</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a><span class="sd">            df : dataframe to initialise the cycle.</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><span class="sd">                Must have columns &#39;group&#39;, &#39;name&#39;, optional column &#39;description&#39;.</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="sd">                Either column &#39;duration_frames&#39; or duration column in any other unit</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a><span class="sd">                and a timing_conversion dictionary to transform it to frames.</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><span class="sd">                For example if column &#39;duration_seconds&#39; is present,</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a><span class="sd">                the timing_conversion dictionary should be</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a><span class="sd">                {&#39;frames&#39;: 30, &#39;seconds&#39;: 1} if the recording was at 30 frames per second.</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="sd">            timing_conversion: a dictionary to convert the timing into a different unit.</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="sd">                For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><span class="sd">                and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="sd">                You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a><span class="sd">                for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a><span class="sd">                You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">                but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="sd">                for example this is valid for the example above:</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a><span class="sd">                If timing_conversion is None, then the timing is not converted</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a><span class="sd">                and &#39;duration_frames&#39; must be provided in the dataframe.</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a><span class="sd">            (Cycle): a Cycle object with labels and duration initialised from &#39;group&#39;, &#39;name&#39;, &#39;description&#39; and</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="sd">                    duration fields of the dataframe. In the order in which they appear in the dataframe.</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>        <span class="c1"># TODO: add a check that the dataframe is valid</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>        <span class="c1"># TODO: move to/from methids to a separte class and inherit both Cycle and Timeline from it</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a>        <span class="n">label_order</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>            <span class="n">label_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TimeLabel</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>                                         <span class="n">group</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">],</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a>                                         <span class="n">description</span><span class="o">=</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>                                         <span class="p">)</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a>                               <span class="p">)</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>        <span class="k">if</span> <span class="s1">&#39;duration_frames&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a>            <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_frames&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a>            <span class="k">assert</span> <span class="n">timing_conversion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;if duration_frames is not in the dataframe, &quot;</span> \
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>                                                  <span class="s2">&quot;timing_conversion must be provided&quot;</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a>            <span class="c1"># check that timing_conversion is a dictionary</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timing_conversion</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span> <span class="s2">&quot;timing_conversion must be a dictionary&quot;</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>            <span class="c1"># check that frames are present in the timing_conversion dictionary</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>            <span class="k">assert</span> <span class="s1">&#39;frames&#39;</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="s2">&quot;frames must be in the timing_conversion dictionary&quot;</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a>            <span class="c1"># list units that are present in both dataframe and timing_conversion dictionary</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>            <span class="n">unit_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">unit</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>            <span class="c1"># check that at least one unit from the timing_conversion dictionary is present in the dataframe</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">unit_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;timing_conversion dictionary must have at least one &quot;</span> \
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>                                       <span class="s2">&quot;of the following keys in addition to &#39;frames&#39;: &quot;</span> <span class="o">+</span> \
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>                                       <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">col_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">col_name</span> <span class="ow">in</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>                                                  <span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">}])</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">unit_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>            <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">*</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="s1">&#39;frames&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="n">unit</span><span class="p">]</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>            <span class="c1"># if all values in duration are integer, convert to int, else raise an assertion</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">duration_frames</span><span class="p">):</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>                <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">duration_frames</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>                <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;duration in frames must be integer after conversion from &quot;</span> <span class="o">+</span> <span class="n">unit</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">label_order</span><span class="p">,</span> <span class="n">duration_frames</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Cycle.fit_cycles_to_frames" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">fit_cycles_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a list of cycle ids (what cycle iteration it is) corresponding to each frame in the range of n_frames</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>number of frames to fit cycle iterations to, must be &gt;= 0.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    cycle id per frame for each frame in range of n_frames</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="k">def</span> <span class="nf">fit_cycles_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">    Create a list of cycle ids (what cycle iteration it is) corresponding to each frame in the range of n_frames</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">        n_frames: number of frames to fit cycle iterations to, must be &gt;= 0.</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a><span class="sd">        cycle id per frame for each frame in range of n_frames</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>    <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>    <span class="n">cycle_per_frame_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n_cycles</span><span class="p">):</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>        <span class="n">cycle_per_frame_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span><span class="p">)</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>    <span class="c1"># crop the tail</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>    <span class="k">return</span> <span class="n">cycle_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Cycle.fit_frames" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculates how many cycles you need to fully cover n_frames.
Assumes the cycle starts at the beginning of the recording.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>number of frames to cover, must be &gt;= 0.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>number of cycles (n_cycles) necessary to cover n_frames:</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>n_cycles*self.cycle_length &gt;= n_frames</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="k">def</span> <span class="nf">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="sd">    Calculates how many cycles you need to fully cover n_frames.</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="sd">    Assumes the cycle starts at the beginning of the recording.</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="sd">        n_frames: number of frames to cover, must be &gt;= 0.</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a><span class="sd">        number of cycles (n_cycles) necessary to cover n_frames:</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="sd">        n_cycles*self.cycle_length &gt;= n_frames</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>    <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;n_frames must be positive&quot;</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>    <span class="n">n_cycles</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">n_frames</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span><span class="p">))</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>    <span class="k">return</span> <span class="n">n_cycles</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Cycle.fit_labels_to_frames" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">fit_labels_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a list of labels corresponding to each frame in the range of n_frames</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>number of frames to fit labels to, must be &gt;= 0.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.annotation.TimeLabel" href="#src.vodex.annotation.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>labels per frame for each frame in range of n_frames</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="k">def</span> <span class="nf">fit_labels_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a><span class="sd">    Create a list of labels corresponding to each frame in the range of n_frames</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a><span class="sd">        n_frames: number of frames to fit labels to, must be &gt;= 0.</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="sd">        labels per frame for each frame in range of n_frames</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>    <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>    <span class="n">label_per_frame_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span><span class="p">,</span> <span class="n">n_cycles</span><span class="p">)</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>    <span class="c1"># crop the tail</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">label_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Cycle.from_df" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a Cycle object from a dataframe.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>df</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dataframe to initialise the cycle.
Must have columns 'group', 'name', optional column 'description'.
Either column 'duration_frames' or duration column in any other unit
and a timing_conversion dictionary to transform it to frames.
For example if column 'duration_seconds' is present,
the timing_conversion dictionary should be
{'frames': 30, 'seconds': 1} if the recording was at 30 frames per second.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>timing_conversion</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary to convert the timing into a different unit.
For example, if you want to convert the timing from frames to seconds,
and you were recording at 30 frames per second, you can use
timing_conversion = {'frames': 1, 'seconds': 1/30}
You can list multiple units in the dictionary, and the timing will be converted to all of them,
for example if there are also 10 frames per volume, you can use:
timing_conversion = {'frames': 1, 'seconds': 1/30, 'volumes': 1/10}
You must include 'frames' in the dictionary! The value of frames does not have to be 1,
but it must be consistent with the other units. the rest of the values.
for example this is valid for the example above:
timing_conversion = {'frames': 10, 'seconds': 1/3, 'volumes': 1}.
If timing_conversion is None, then the timing is not converted
and 'duration_frames' must be provided in the dataframe.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    (Cycle): a Cycle object with labels and duration initialised from 'group', 'name', 'description' and
            duration fields of the dataframe. In the order in which they appear in the dataframe.</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="k">def</span> <span class="nf">from_df</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="sd">    Create a Cycle object from a dataframe.</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a><span class="sd">        df : dataframe to initialise the cycle.</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><span class="sd">            Must have columns &#39;group&#39;, &#39;name&#39;, optional column &#39;description&#39;.</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="sd">            Either column &#39;duration_frames&#39; or duration column in any other unit</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a><span class="sd">            and a timing_conversion dictionary to transform it to frames.</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><span class="sd">            For example if column &#39;duration_seconds&#39; is present,</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a><span class="sd">            the timing_conversion dictionary should be</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a><span class="sd">            {&#39;frames&#39;: 30, &#39;seconds&#39;: 1} if the recording was at 30 frames per second.</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="sd">        timing_conversion: a dictionary to convert the timing into a different unit.</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="sd">            For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><span class="sd">            and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="sd">            You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a><span class="sd">            for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a><span class="sd">            You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">            but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="sd">            for example this is valid for the example above:</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a><span class="sd">            If timing_conversion is None, then the timing is not converted</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a><span class="sd">            and &#39;duration_frames&#39; must be provided in the dataframe.</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a><span class="sd">        (Cycle): a Cycle object with labels and duration initialised from &#39;group&#39;, &#39;name&#39;, &#39;description&#39; and</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="sd">                duration fields of the dataframe. In the order in which they appear in the dataframe.</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>    <span class="c1"># TODO: add a check that the dataframe is valid</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>    <span class="c1"># TODO: move to/from methids to a separte class and inherit both Cycle and Timeline from it</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a>    <span class="n">label_order</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>        <span class="n">label_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TimeLabel</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>                                     <span class="n">group</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">],</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a>                                     <span class="n">description</span><span class="o">=</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>                                     <span class="p">)</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a>                           <span class="p">)</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>    <span class="k">if</span> <span class="s1">&#39;duration_frames&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a>        <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_frames&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a>        <span class="k">assert</span> <span class="n">timing_conversion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;if duration_frames is not in the dataframe, &quot;</span> \
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>                                              <span class="s2">&quot;timing_conversion must be provided&quot;</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a>        <span class="c1"># check that timing_conversion is a dictionary</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timing_conversion</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span> <span class="s2">&quot;timing_conversion must be a dictionary&quot;</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>        <span class="c1"># check that frames are present in the timing_conversion dictionary</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>        <span class="k">assert</span> <span class="s1">&#39;frames&#39;</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="s2">&quot;frames must be in the timing_conversion dictionary&quot;</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a>        <span class="c1"># list units that are present in both dataframe and timing_conversion dictionary</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>        <span class="n">unit_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">unit</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>        <span class="c1"># check that at least one unit from the timing_conversion dictionary is present in the dataframe</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">unit_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;timing_conversion dictionary must have at least one &quot;</span> \
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>                                   <span class="s2">&quot;of the following keys in addition to &#39;frames&#39;: &quot;</span> <span class="o">+</span> \
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>                                   <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">col_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">col_name</span> <span class="ow">in</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>                                              <span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">}])</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>        <span class="n">unit</span> <span class="o">=</span> <span class="n">unit_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>        <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">*</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="s1">&#39;frames&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="n">unit</span><span class="p">]</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>        <span class="c1"># if all values in duration are integer, convert to int, else raise an assertion</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">duration_frames</span><span class="p">):</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>            <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">duration_frames</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>            <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;duration in frames must be integer after conversion from &quot;</span> <span class="o">+</span> <span class="n">unit</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">label_order</span><span class="p">,</span> <span class="n">duration_frames</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Cycle.from_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a Cycle object from a dictionary.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>d</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dictionary to initialize the cycle.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Cycle" href="#src.vodex.annotation.Cycle">Cycle</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a Cycle object with label_order and duration initialized from 'label_order' and
    'timing' fields of the dictionary.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-445" name="__codelineno-0-445"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a><span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a><span class="sd">    Create a Cycle object from a dictionary.</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a><span class="sd">        d: dictionary to initialize the cycle.</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><span class="sd">        (Cycle): a Cycle object with label_order and duration initialized from &#39;label_order&#39; and</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><span class="sd">                &#39;timing&#39; fields of the dictionary.</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>    <span class="n">label_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">TimeLabel</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">ld</span><span class="p">)</span> <span class="k">for</span> <span class="n">ld</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;label_order&#39;</span><span class="p">]]</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">label_order</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;timing&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Cycle.from_json" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">j</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a Cycle object from a json string.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>j</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>json string to initialise the cycle</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Cycle" href="#src.vodex.annotation.Cycle">Cycle</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a Cycle object with label_order and duration initialised from 'label_order' and
    'timing' fields of the json srting.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-460" name="__codelineno-0-460"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a><span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a><span class="sd">    Create a Cycle object from a json string.</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a><span class="sd">        j : json string to initialise the cycle</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a><span class="sd">        (Cycle): a Cycle object with label_order and duration initialised from &#39;label_order&#39; and</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><span class="sd">                &#39;timing&#39; fields of the json srting.</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>    <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Cycle.to_df" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_df</span><span class="p">(</span><span class="n">timing_conversion</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Put all the information about a Cycle object into a dataframe.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>timing_conversion</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary to convert the timing into a different unit.
For example, if you want to convert the timing from frames to seconds,
and you were recording at 30 frames per second, you can use
timing_conversion = {'frames': 1, 'seconds': 1/30}
You can list multiple units in the dictionary, and the timing will be converted to all of them,
for example if there are also 10 frames per volume, you can use:
timing_conversion = {'frames': 1, 'seconds': 1/30, 'volumes': 1/10}
You must include 'frames' in the dictionary! The value of frames does not have to be 1,
but it must be consistent with the other units. the rest of the values.
for example this is valid for the example above:
timing_conversion = {'frames': 10, 'seconds': 1/3, 'volumes': 1}.
if timing_conversion is None, then the timing is not converted.
if timing_conversion is not None, then the timing is converted and both the original and converted
timing are added to the dataframe.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dataframe with columns 'timing', 'group', 'name' and 'description'.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>'timing' will be written in all the units in the timing_conversion dictionary,</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>or just in frames, if timing_conversion is None.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-396" name="__codelineno-0-396"></a><span class="k">def</span> <span class="nf">to_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="sd">    Put all the information about a Cycle object into a dataframe.</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a><span class="sd">        timing_conversion: a dictionary to convert the timing into a different unit.</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="sd">            For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="sd">            and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a><span class="sd">            You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">            for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="sd">            You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="sd">            but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><span class="sd">            for example this is valid for the example above:</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">            if timing_conversion is None, then the timing is not converted.</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">            if timing_conversion is not None, then the timing is converted and both the original and converted</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">            timing are added to the dataframe.</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><span class="sd">        a dataframe with columns &#39;timing&#39;, &#39;group&#39;, &#39;name&#39; and &#39;description&#39;.</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><span class="sd">        &#39;timing&#39; will be written in all the units in the timing_conversion dictionary,</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="sd">        or just in frames, if timing_conversion is None.</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>    <span class="c1"># TODO: move to/from methids to a separte class and inherit both Cycle and Timeline from it</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>    <span class="c1"># prepare timing columns</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>    <span class="k">if</span> <span class="n">timing_conversion</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>        <span class="n">timing_conversion</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;frames&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>    <span class="k">assert</span> <span class="s1">&#39;frames&#39;</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="s2">&quot;frames must be in the timing_conversion dictionary&quot;</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>    <span class="n">timing_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">timing_columns</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">])</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>    <span class="c1"># write timing columns</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>    <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>        <span class="n">frames_per_unit</span> <span class="o">=</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="s1">&#39;frames&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="n">unit</span><span class="p">]</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>        <span class="n">duration</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span> <span class="o">/</span> <span class="n">frames_per_unit</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>        <span class="c1"># if all are integers, turn to integer</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">duration</span><span class="p">):</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>            <span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>    <span class="c1"># write labels</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">group</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">description</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Cycle.to_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Put all the information about a Cycle object into a dictionary.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary with fields 'timing' and 'label_order' which store self.duration and self.label order.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="sd">    Put all the information about a Cycle object into a dictionary.</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="sd">        a dictionary with fields &#39;timing&#39; and &#39;label_order&#39; which store self.duration and self.label order.</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>    <span class="n">label_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;timing&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="s1">&#39;label_order&#39;</span><span class="p">:</span> <span class="n">label_order</span><span class="p">}</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>    <span class="k">return</span> <span class="n">d</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Cycle.to_json" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_json</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Put all the information about a Cycle object into a json file.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a json with fields 'timing' and 'label_order' which store self.duration and self.label order.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">    Put all the information about a Cycle object into a json file.</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">        a json with fields &#39;timing&#39; and &#39;label_order&#39; which store self.duration and self.label order.</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="src.vodex.annotation.Labels" class="doc doc-heading">
          <code>Labels</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Stores information about a group of time labels. Any specific aspect of the experiment that you want to document.
    For example: temperature|light|sound|image on the screen|drug|behaviour ... etc.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>group</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the name of the group</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>group_info</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>description of what this group is about. Just for storing the information.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>state_names</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the state names</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>state_info</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>description of each individual state {state name : description}. Just for storing the information.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>group</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the name of the group</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>group_info</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>description of what this group is about. Just for storing the information.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>state_names</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the state names</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>states</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>list of states, each state as a TimeLabel object</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/vodex/annotation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="k">class</span> <span class="nc">Labels</span><span class="p">:</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="sd">    Stores information about a group of time labels. Any specific aspect of the experiment that you want to document.</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">        For example: temperature|light|sound|image on the screen|drug|behaviour ... etc.</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">        group : the name of the group</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">        group_info : description of what this group is about. Just for storing the information.</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="sd">        state_names: the state names</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">        state_info: description of each individual state {state name : description}. Just for storing the information.</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="sd">        group: the name of the group</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">        group_info: description of what this group is about. Just for storing the information.</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">        state_names: the state names</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">        states: list of states, each state as a TimeLabel object</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">state_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>                 <span class="n">group_info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">state_info</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>        <span class="k">if</span> <span class="n">state_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>            <span class="n">state_info</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">group_info</span> <span class="o">=</span> <span class="n">group_info</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state_names</span> <span class="o">=</span> <span class="n">state_names</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>        <span class="c1"># create states</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">states</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>        <span class="k">for</span> <span class="n">state_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_names</span><span class="p">:</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>            <span class="k">if</span> <span class="n">state_name</span> <span class="ow">in</span> <span class="n">state_info</span><span class="p">:</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>                <span class="n">state</span> <span class="o">=</span> <span class="n">TimeLabel</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>                                  <span class="n">description</span><span class="o">=</span><span class="n">state_info</span><span class="p">[</span><span class="n">state_name</span><span class="p">],</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>                                  <span class="n">group</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">)</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state_name</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>                <span class="n">state</span> <span class="o">=</span> <span class="n">TimeLabel</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">)</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state_name</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Labels</span><span class="p">):</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">group</span><span class="p">,</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">group_info</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">group_info</span><span class="p">,</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>                <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state_names</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">state_names</span><span class="p">),</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>                <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">states</span><span class="p">)</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>            <span class="p">]</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Labels</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Label group : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;States:</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span class="k">for</span> <span class="n">state_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_names</span><span class="p">:</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">state_name</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span class="k">return</span> <span class="n">description</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="sd">        Create a Labels object from a dictionary.</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="sd">            (Labels): a Labels object with attributes &#39;group&#39;, &#39;group_info&#39;, &#39;state_names&#39;, &#39;states&#39;</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="sd">                    filled from the dictionary fields.</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>        <span class="n">group_info</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>        <span class="n">state_info</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>        <span class="k">if</span> <span class="s1">&#39;group_info&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>            <span class="n">group_info</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group_info&#39;</span><span class="p">]</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>        <span class="k">if</span> <span class="s1">&#39;state_info&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>            <span class="n">state_info</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;state_info&#39;</span><span class="p">]</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">],</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;state_names&#39;</span><span class="p">],</span> <span class="n">group_info</span><span class="o">=</span><span class="n">group_info</span><span class="p">,</span> <span class="n">state_info</span><span class="o">=</span><span class="n">state_info</span><span class="p">)</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>    <span class="k">def</span> <span class="nf">from_df</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">        Create a Labels object from a dataframe.</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">                The dataframe must have columns &#39;group&#39;, &#39;name&#39;, optional column &#39;description&#39;.</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">                &#39;group&#39; column must be the same for all rows. &#39;name&#39; columns contains the state names,</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">                state names can repeat and only the unique state names will be used. The descriptions are optional,</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">                if provided then the descriptions of the same state name must be the same or left empty.</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">        Arg:</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">            df: the dataframe</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">            group: if not None, keep only the rows with this group name.</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">                Must be provided if there are multiple groups in the dataframe.</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">            (Labels): a Labels object with attributes &#39;group&#39;, &#39;group_info&#39;, &#39;state_names&#39;, &#39;states&#39;</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">                    inferred and filled from the dataframe.</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>        <span class="c1"># if group is not none, keep only the group rows</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>        <span class="k">if</span> <span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>            <span class="k">if</span> <span class="n">group</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Group </span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s2"> not found in the dataframe.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span><span class="p">]</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>        <span class="c1"># check that group is the same for all rows</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>        <span class="n">group</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>                <span class="sa">f</span><span class="s2">&quot;More than one group found in the dataframe: </span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>        <span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>        <span class="n">state_names</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>        <span class="n">state_info</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>        <span class="k">for</span> <span class="n">state_name</span> <span class="ow">in</span> <span class="n">state_names</span><span class="p">:</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>            <span class="k">if</span> <span class="s1">&#39;description&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>                <span class="c1"># check that all descriptions are either the same or empty</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>                <span class="n">description</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">state_name</span><span class="p">][</span><span class="s1">&#39;description&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">description</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>                        <span class="sa">f</span><span class="s2">&quot;More than one description found for state </span><span class="si">{</span><span class="n">state_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">description</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>                    <span class="c1"># one must be an empty string or None</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="s1">&#39;&#39;</span> <span class="ow">in</span> <span class="n">description</span> <span class="ow">or</span> <span class="kc">None</span> <span class="ow">in</span> <span class="n">description</span><span class="p">):</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>                            <span class="sa">f</span><span class="s2">&quot;More than one description found for state </span><span class="si">{</span><span class="n">state_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>                    <span class="n">state_info</span><span class="p">[</span><span class="n">state_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>                <span class="n">state_info</span><span class="p">[</span><span class="n">state_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">state_names</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">group_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">state_info</span><span class="o">=</span><span class="n">state_info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Labels.from_df" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a Labels object from a dataframe.
        The dataframe must have columns 'group', 'name', optional column 'description'.
        'group' column must be the same for all rows. 'name' columns contains the state names,
        state names can repeat and only the unique state names will be used. The descriptions are optional,
        if provided then the descriptions of the same state name must be the same or left empty.</p>

<details class="arg" open>
  <summary>Arg</summary>
  <p>df: the dataframe
group: if not None, keep only the rows with this group name.
    Must be provided if there are multiple groups in the dataframe.</p>
</details>      <p>Returns:
    (Labels): a Labels object with attributes 'group', 'group_info', 'state_names', 'states'
            inferred and filled from the dataframe.</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="k">def</span> <span class="nf">from_df</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">    Create a Labels object from a dataframe.</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">            The dataframe must have columns &#39;group&#39;, &#39;name&#39;, optional column &#39;description&#39;.</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">            &#39;group&#39; column must be the same for all rows. &#39;name&#39; columns contains the state names,</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">            state names can repeat and only the unique state names will be used. The descriptions are optional,</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">            if provided then the descriptions of the same state name must be the same or left empty.</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">    Arg:</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">        df: the dataframe</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">        group: if not None, keep only the rows with this group name.</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">            Must be provided if there are multiple groups in the dataframe.</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">        (Labels): a Labels object with attributes &#39;group&#39;, &#39;group_info&#39;, &#39;state_names&#39;, &#39;states&#39;</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">                inferred and filled from the dataframe.</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>    <span class="c1"># if group is not none, keep only the group rows</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>    <span class="k">if</span> <span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>        <span class="k">if</span> <span class="n">group</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Group </span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s2"> not found in the dataframe.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span><span class="p">]</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>    <span class="c1"># check that group is the same for all rows</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>    <span class="n">group</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>            <span class="sa">f</span><span class="s2">&quot;More than one group found in the dataframe: </span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>    <span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>    <span class="n">state_names</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>    <span class="n">state_info</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>    <span class="k">for</span> <span class="n">state_name</span> <span class="ow">in</span> <span class="n">state_names</span><span class="p">:</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>        <span class="k">if</span> <span class="s1">&#39;description&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>            <span class="c1"># check that all descriptions are either the same or empty</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>            <span class="n">description</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">state_name</span><span class="p">][</span><span class="s1">&#39;description&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">description</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>                    <span class="sa">f</span><span class="s2">&quot;More than one description found for state </span><span class="si">{</span><span class="n">state_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">description</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>                <span class="c1"># one must be an empty string or None</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="s1">&#39;&#39;</span> <span class="ow">in</span> <span class="n">description</span> <span class="ow">or</span> <span class="kc">None</span> <span class="ow">in</span> <span class="n">description</span><span class="p">):</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>                        <span class="sa">f</span><span class="s2">&quot;More than one description found for state </span><span class="si">{</span><span class="n">state_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>                <span class="n">state_info</span><span class="p">[</span><span class="n">state_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>            <span class="n">state_info</span><span class="p">[</span><span class="n">state_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">state_names</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">group_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">state_info</span><span class="o">=</span><span class="n">state_info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Labels.from_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a Labels object from a dictionary.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Labels" href="#src.vodex.annotation.Labels">Labels</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a Labels object with attributes 'group', 'group_info', 'state_names', 'states'
    filled from the dictionary fields.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="sd">    Create a Labels object from a dictionary.</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="sd">        (Labels): a Labels object with attributes &#39;group&#39;, &#39;group_info&#39;, &#39;state_names&#39;, &#39;states&#39;</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="sd">                filled from the dictionary fields.</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>    <span class="n">group_info</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>    <span class="n">state_info</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>    <span class="k">if</span> <span class="s1">&#39;group_info&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>        <span class="n">group_info</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group_info&#39;</span><span class="p">]</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>    <span class="k">if</span> <span class="s1">&#39;state_info&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>        <span class="n">state_info</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;state_info&#39;</span><span class="p">]</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">],</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;state_names&#39;</span><span class="p">],</span> <span class="n">group_info</span><span class="o">=</span><span class="n">group_info</span><span class="p">,</span> <span class="n">state_info</span><span class="o">=</span><span class="n">state_info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="src.vodex.annotation.TimeLabel" class="doc doc-heading">
          <code>TimeLabel</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Stores information about a particular time-located event during the experiment: any specific condition,
described by a group and the label.
For example: group 'light', label 'on': the light was on; group 'light', label 'off': the light was off.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the name for the time label. This is a unique identifier of the label.
        Different labels must have different names.
        Different labels are compared based on their names, so the same name means it is the same event.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>description</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a detailed description of the label. This is to give you more info, but it is not used for
anything else.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>group</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the group that the label belongs to.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the name for the time label. This is a unique identifier of the label.
        Different labels must have different names.
        Different labels are compared based on their names, so the same name means it is the same event.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>description</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a detailed description of the label. This is to give you more info, but it is not used for
anything else.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>group</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the group that the label belongs to.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/vodex/annotation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-0-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-0-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-0-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-0-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-0-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-0-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-0-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-0-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-0-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-0-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-0-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-0-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-0-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-0-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="k">class</span> <span class="nc">TimeLabel</span><span class="p">:</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">    Stores information about a particular time-located event during the experiment: any specific condition,</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">    described by a group and the label.</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="sd">    For example: group &#39;light&#39;, label &#39;on&#39;: the light was on; group &#39;light&#39;, label &#39;off&#39;: the light was off.</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="sd">        name: the name for the time label. This is a unique identifier of the label.</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">                    Different labels must have different names.</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">                    Different labels are compared based on their names, so the same name means it is the same event.</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">        description: a detailed description of the label. This is to give you more info, but it is not used for</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">            anything else.</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">        group: the group that the label belongs to.</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">        name: the name for the time label. This is a unique identifier of the label.</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">                    Different labels must have different names.</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">                    Different labels are compared based on their names, so the same name means it is the same event.</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">        description: a detailed description of the label. This is to give you more info, but it is not used for</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">            anything else.</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">        group: the group that the label belongs to.</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">name</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">group</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">description</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>        <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="s2">&quot; : &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="s2">&quot;. Group: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>        <span class="k">return</span> <span class="n">description</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>        <span class="c1"># necessary for instances to behave sanely in dicts and sets.</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">))</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeLabel</span><span class="p">):</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>            <span class="c1"># comparing by name</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>            <span class="n">same_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>                <span class="n">same_group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">group</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>                <span class="k">return</span> <span class="n">same_name</span> <span class="ow">and</span> <span class="n">same_group</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>                <span class="k">return</span> <span class="n">same_name</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>            <span class="nb">print</span><span class="p">(</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>                <span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">TimeLabel</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">        Put all the information about a TimeLabel object into a dictionary.</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">            a dictionary with fields &#39;name&#39;, &#39;group&#39;, &#39;description&#39; which store the corresponding attributes.</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>        <span class="k">return</span> <span class="n">d</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">        Create a TimeLabel object from a dictionary.</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="sd">            (TimeLabel): a TimeLabel object with attributes &#39;name&#39;, &#39;group&#39;, &#39;description&#39;</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="sd">                    filled from the dictionary fields.</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="n">description</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>        <span class="n">group</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="k">if</span> <span class="s1">&#39;description&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>            <span class="n">description</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="k">if</span> <span class="s1">&#39;group&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>            <span class="n">group</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.TimeLabel.from_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a TimeLabel object from a dictionary.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.TimeLabel" href="#src.vodex.annotation.TimeLabel">TimeLabel</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a TimeLabel object with attributes 'name', 'group', 'description'
    filled from the dictionary fields.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">    Create a TimeLabel object from a dictionary.</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="sd">        (TimeLabel): a TimeLabel object with attributes &#39;name&#39;, &#39;group&#39;, &#39;description&#39;</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="sd">                filled from the dictionary fields.</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="n">description</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>    <span class="n">group</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>    <span class="k">if</span> <span class="s1">&#39;description&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>        <span class="n">description</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>    <span class="k">if</span> <span class="s1">&#39;group&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>        <span class="n">group</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.TimeLabel.to_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Put all the information about a TimeLabel object into a dictionary.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary with fields 'name', 'group', 'description' which store the corresponding attributes.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span>
<span class="normal"><a href="#__codelineno-0-95">95</a></span>
<span class="normal"><a href="#__codelineno-0-96">96</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">    Put all the information about a TimeLabel object into a dictionary.</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">        a dictionary with fields &#39;name&#39;, &#39;group&#39;, &#39;description&#39; which store the corresponding attributes.</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="k">return</span> <span class="n">d</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="src.vodex.annotation.Timeline" class="doc doc-heading">
          <code>Timeline</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Information about the sequence of labels. Use it when you have non-periodic conditions.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>label_order</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.annotation.TimeLabel" href="#src.vodex.annotation.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of labels in the right order in which they follow</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>duration</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="numpy.NDArray">NDArray</span>, <span title="typing.List">List</span>[int]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>duration of the corresponding labels, in frames (based on your imaging). Note that these are
frames, not volumes !</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/vodex/annotation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span>
<span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span>
<span class="normal"><a href="#__codelineno-0-733">733</a></span>
<span class="normal"><a href="#__codelineno-0-734">734</a></span>
<span class="normal"><a href="#__codelineno-0-735">735</a></span>
<span class="normal"><a href="#__codelineno-0-736">736</a></span>
<span class="normal"><a href="#__codelineno-0-737">737</a></span>
<span class="normal"><a href="#__codelineno-0-738">738</a></span>
<span class="normal"><a href="#__codelineno-0-739">739</a></span>
<span class="normal"><a href="#__codelineno-0-740">740</a></span>
<span class="normal"><a href="#__codelineno-0-741">741</a></span>
<span class="normal"><a href="#__codelineno-0-742">742</a></span>
<span class="normal"><a href="#__codelineno-0-743">743</a></span>
<span class="normal"><a href="#__codelineno-0-744">744</a></span>
<span class="normal"><a href="#__codelineno-0-745">745</a></span>
<span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span>
<span class="normal"><a href="#__codelineno-0-750">750</a></span>
<span class="normal"><a href="#__codelineno-0-751">751</a></span>
<span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span>
<span class="normal"><a href="#__codelineno-0-756">756</a></span>
<span class="normal"><a href="#__codelineno-0-757">757</a></span>
<span class="normal"><a href="#__codelineno-0-758">758</a></span>
<span class="normal"><a href="#__codelineno-0-759">759</a></span>
<span class="normal"><a href="#__codelineno-0-760">760</a></span>
<span class="normal"><a href="#__codelineno-0-761">761</a></span>
<span class="normal"><a href="#__codelineno-0-762">762</a></span>
<span class="normal"><a href="#__codelineno-0-763">763</a></span>
<span class="normal"><a href="#__codelineno-0-764">764</a></span>
<span class="normal"><a href="#__codelineno-0-765">765</a></span>
<span class="normal"><a href="#__codelineno-0-766">766</a></span>
<span class="normal"><a href="#__codelineno-0-767">767</a></span>
<span class="normal"><a href="#__codelineno-0-768">768</a></span>
<span class="normal"><a href="#__codelineno-0-769">769</a></span>
<span class="normal"><a href="#__codelineno-0-770">770</a></span>
<span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="k">class</span> <span class="nc">Timeline</span><span class="p">:</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">    Information about the sequence of labels. Use it when you have non-periodic conditions.</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">        label_order: a list of labels in the right order in which they follow</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="sd">        duration: duration of the corresponding labels, in frames (based on your imaging). Note that these are</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a><span class="sd">            frames, not volumes !</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_order</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">],</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a>                 <span class="n">duration</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]):</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a>        <span class="c1"># check that all labels are from the same group</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a>        <span class="n">label_group</span> <span class="o">=</span> <span class="n">label_order</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">group</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a>        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">label_order</span><span class="p">:</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>            <span class="k">assert</span> <span class="n">label</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">label_group</span><span class="p">,</span> \
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>                <span class="sa">f</span><span class="s2">&quot;All labels should be from the same group, but got </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">group</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">label_group</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>        <span class="k">assert</span> <span class="n">label_group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> \
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>            <span class="sa">f</span><span class="s2">&quot;All labels should be from the same group, label group can not be None&quot;</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a>        <span class="c1"># check that timing is int</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>                   <span class="n">duration</span><span class="p">),</span> <span class="s2">&quot;timing should be a list of int&quot;</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">label_group</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span> <span class="o">=</span> <span class="n">label_order</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">list_of_int</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>        <span class="c1"># list the length of the cycle, each element is the TimeLabel</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>        <span class="c1"># TODO : turn it into an index ?</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_label_per_frame</span><span class="p">()</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Timeline</span><span class="p">):</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">label_order</span><span class="p">,</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">full_length</span><span class="p">,</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">per_frame_list</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>            <span class="p">]</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>            <span class="nb">print</span><span class="p">(</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>                <span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Timeline</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>    <span class="k">def</span> <span class="nf">get_label_per_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a><span class="sd">        A list of labels per frame for the duration of the experiment.</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a><span class="sd">            labels per frame for the experiment.</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>        <span class="n">per_frame_label_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>            <span class="n">per_frame_label_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_time</span> <span class="o">*</span> <span class="p">[</span><span class="n">label</span><span class="p">])</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>        <span class="k">return</span> <span class="n">per_frame_label_list</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Timeline : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Length: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a>        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Label </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: for </span><span class="si">{</span><span class="n">label_time</span><span class="si">}</span><span class="s2"> frames</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a>        <span class="k">return</span> <span class="n">description</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">        Put all the information about a Timeline object into a dictionary.</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a><span class="sd">            a dictionary with fields &#39;label_order&#39; and &#39;timing&#39; .</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;timing&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a>                <span class="s1">&#39;label_order&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">],</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a>                <span class="p">}</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a>    <span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a><span class="sd">        Put all the information about a Timeline object into a json string.</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a><span class="sd">            a json string with fields &#39;label_order&#39; and &#39;timing&#39; .</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>    <span class="k">def</span> <span class="nf">to_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a><span class="sd">        Put all the information about a Timeline object into a dataframe.</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a><span class="sd">            timing_conversion: a dictionary to convert the timing into a different unit.</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a><span class="sd">                For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a><span class="sd">                and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a><span class="sd">                You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a><span class="sd">                for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a><span class="sd">                You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a><span class="sd">                but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a><span class="sd">                for example this is valid for the example above:</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a><span class="sd">                if timing_conversion is None, then the timing is not converted.</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a><span class="sd">                if timing_conversion is not None, then the timing is converted and both the original and converted</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a><span class="sd">                timing are added to the dataframe.</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a><span class="sd">            a dataframe with columns &#39;timing&#39;, &#39;group&#39;, &#39;name&#39; and &#39;description&#39;.</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a><span class="sd">            &#39;timing&#39; will be written in all the units in the timing_conversion dictionary,</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a><span class="sd">            or just in frames, if timing_conversion is None.</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a>        <span class="c1"># prepare timing columns</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>        <span class="k">if</span> <span class="n">timing_conversion</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>            <span class="n">timing_conversion</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;frames&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>        <span class="k">assert</span> <span class="s1">&#39;frames&#39;</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="s2">&quot;frames must be in the timing_conversion dictionary&quot;</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>        <span class="n">timing_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">timing_columns</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">])</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>        <span class="c1"># write timing columns</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>        <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a>            <span class="n">frames_per_unit</span> <span class="o">=</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="s1">&#39;frames&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="n">unit</span><span class="p">]</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a>            <span class="n">duration</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span> <span class="o">/</span> <span class="n">frames_per_unit</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a>            <span class="c1"># if all are integers, turn to integer</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">duration</span><span class="p">):</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>                <span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a>            <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>        <span class="c1"># write labels</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">group</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">description</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a>        <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a>    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a><span class="sd">        Create a Timeline object from a dictionary.</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="sd">            d: dictionary to initialize the timeline.</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">            (Timeline): a Timeline object with label_order and duration initialized from &#39;label_order&#39; and</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">                    &#39;timing&#39; fields of the dictionary.</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>        <span class="n">label_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">TimeLabel</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">ld</span><span class="p">)</span> <span class="k">for</span> <span class="n">ld</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;label_order&#39;</span><span class="p">]]</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">label_order</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;timing&#39;</span><span class="p">])</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>    <span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a><span class="sd">        Create a Timeline object from a json string.</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a><span class="sd">            j : json string to initialise the cycle</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a><span class="sd">            (Timeline): a Timeline object with label_order and duration initialised from &#39;label_order&#39; and</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a><span class="sd">                    &#39;timing&#39; fields of the json srting.</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a>        <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a>    <span class="k">def</span> <span class="nf">from_df</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a><span class="sd">        Create a Timeline object from a dataframe.</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="sd">            df : dataframe to initialise the timeline.</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="sd">                Must have columns &#39;group&#39;, &#39;name&#39;, optional column &#39;description&#39;.</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="sd">                Either column &#39;duration_frames&#39; or duration column in any other unit</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="sd">                and a timing_conversion dictionary to transform it to frames.</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a><span class="sd">                For example if column &#39;duration_seconds&#39; is present,</span>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a><span class="sd">                the timing_conversion dictionary should be</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a><span class="sd">                {&#39;frames&#39;: 30, &#39;seconds&#39;: 1} if the recording was at 30 frames per second.</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a><span class="sd">            timing_conversion: a dictionary to convert the timing into a different unit.</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="sd">                For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a><span class="sd">                and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a><span class="sd">                You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a><span class="sd">                for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a><span class="sd">                You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a><span class="sd">                but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a><span class="sd">                for example this is valid for the example above:</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a><span class="sd">                If timing_conversion is None, then the timing is not converted</span>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a><span class="sd">                and &#39;duration_frames&#39; must be provided in the dataframe.</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a><span class="sd">            (Timeline): a Timeline object with labels and duration initialised from &#39;group&#39;, &#39;name&#39;, &#39;description&#39; and</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a><span class="sd">                    duration fields of the dataframe. In the order in which they appear in the dataframe.</span>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a>        <span class="n">label_order</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a>            <span class="n">label_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TimeLabel</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a>                                         <span class="n">group</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">],</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a>                                         <span class="n">description</span><span class="o">=</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a>                                         <span class="p">)</span>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a>                               <span class="p">)</span>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a>        <span class="k">if</span> <span class="s1">&#39;duration_frames&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a>            <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_frames&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a>            <span class="k">assert</span> <span class="n">timing_conversion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;if duration_frames is not in the dataframe, &quot;</span> \
<a id="__codelineno-0-752" name="__codelineno-0-752"></a>                                                  <span class="s2">&quot;timing_conversion must be provided&quot;</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a>            <span class="c1"># check that timing_conversion is a dictionary</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a>            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timing_conversion</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span> <span class="s2">&quot;timing_conversion must be a dictionary&quot;</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a>            <span class="c1"># check that frames are present in the timing_conversion dictionary</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a>            <span class="k">assert</span> <span class="s1">&#39;frames&#39;</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="s2">&quot;frames must be in the timing_conversion dictionary&quot;</span>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a>            <span class="c1"># list units that are present in both dataframe and timing_conversion dictionary</span>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a>            <span class="n">unit_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">unit</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a>            <span class="c1"># check that at least one unit from the timing_conversion dictionary is present in the dataframe</span>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a>            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">unit_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;timing_conversion dictionary must have at least one &quot;</span> \
<a id="__codelineno-0-761" name="__codelineno-0-761"></a>                                       <span class="s2">&quot;of the following keys in addition to &#39;frames&#39;: &quot;</span> <span class="o">+</span> \
<a id="__codelineno-0-762" name="__codelineno-0-762"></a>                                       <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">col_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">col_name</span> <span class="ow">in</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a>                                                  <span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">}])</span>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">unit_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a>            <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">*</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="s1">&#39;frames&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="n">unit</span><span class="p">]</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a>            <span class="c1"># if all values in duration are integer, convert to int, else raise an assertion</span>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a>            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">duration_frames</span><span class="p">):</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a>                <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">duration_frames</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a>                <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;duration in frames must be integer after conversion from &quot;</span> <span class="o">+</span> <span class="n">unit</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">label_order</span><span class="p">,</span> <span class="n">duration_frames</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Timeline.from_df" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a Timeline object from a dataframe.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>df</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dataframe to initialise the timeline.
Must have columns 'group', 'name', optional column 'description'.
Either column 'duration_frames' or duration column in any other unit
and a timing_conversion dictionary to transform it to frames.
For example if column 'duration_seconds' is present,
the timing_conversion dictionary should be
{'frames': 30, 'seconds': 1} if the recording was at 30 frames per second.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>timing_conversion</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary to convert the timing into a different unit.
For example, if you want to convert the timing from frames to seconds,
and you were recording at 30 frames per second, you can use
timing_conversion = {'frames': 1, 'seconds': 1/30}
You can list multiple units in the dictionary, and the timing will be converted to all of them,
for example if there are also 10 frames per volume, you can use:
timing_conversion = {'frames': 1, 'seconds': 1/30, 'volumes': 1/10}
You must include 'frames' in the dictionary! The value of frames does not have to be 1,
but it must be consistent with the other units. the rest of the values.
for example this is valid for the example above:
timing_conversion = {'frames': 10, 'seconds': 1/3, 'volumes': 1}.
If timing_conversion is None, then the timing is not converted
and 'duration_frames' must be provided in the dataframe.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Timeline" href="#src.vodex.annotation.Timeline">Timeline</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a Timeline object with labels and duration initialised from 'group', 'name', 'description' and
    duration fields of the dataframe. In the order in which they appear in the dataframe.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span>
<span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span>
<span class="normal"><a href="#__codelineno-0-733">733</a></span>
<span class="normal"><a href="#__codelineno-0-734">734</a></span>
<span class="normal"><a href="#__codelineno-0-735">735</a></span>
<span class="normal"><a href="#__codelineno-0-736">736</a></span>
<span class="normal"><a href="#__codelineno-0-737">737</a></span>
<span class="normal"><a href="#__codelineno-0-738">738</a></span>
<span class="normal"><a href="#__codelineno-0-739">739</a></span>
<span class="normal"><a href="#__codelineno-0-740">740</a></span>
<span class="normal"><a href="#__codelineno-0-741">741</a></span>
<span class="normal"><a href="#__codelineno-0-742">742</a></span>
<span class="normal"><a href="#__codelineno-0-743">743</a></span>
<span class="normal"><a href="#__codelineno-0-744">744</a></span>
<span class="normal"><a href="#__codelineno-0-745">745</a></span>
<span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span>
<span class="normal"><a href="#__codelineno-0-750">750</a></span>
<span class="normal"><a href="#__codelineno-0-751">751</a></span>
<span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span>
<span class="normal"><a href="#__codelineno-0-756">756</a></span>
<span class="normal"><a href="#__codelineno-0-757">757</a></span>
<span class="normal"><a href="#__codelineno-0-758">758</a></span>
<span class="normal"><a href="#__codelineno-0-759">759</a></span>
<span class="normal"><a href="#__codelineno-0-760">760</a></span>
<span class="normal"><a href="#__codelineno-0-761">761</a></span>
<span class="normal"><a href="#__codelineno-0-762">762</a></span>
<span class="normal"><a href="#__codelineno-0-763">763</a></span>
<span class="normal"><a href="#__codelineno-0-764">764</a></span>
<span class="normal"><a href="#__codelineno-0-765">765</a></span>
<span class="normal"><a href="#__codelineno-0-766">766</a></span>
<span class="normal"><a href="#__codelineno-0-767">767</a></span>
<span class="normal"><a href="#__codelineno-0-768">768</a></span>
<span class="normal"><a href="#__codelineno-0-769">769</a></span>
<span class="normal"><a href="#__codelineno-0-770">770</a></span>
<span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-710" name="__codelineno-0-710"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a><span class="k">def</span> <span class="nf">from_df</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a><span class="sd">    Create a Timeline object from a dataframe.</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="sd">        df : dataframe to initialise the timeline.</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="sd">            Must have columns &#39;group&#39;, &#39;name&#39;, optional column &#39;description&#39;.</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="sd">            Either column &#39;duration_frames&#39; or duration column in any other unit</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="sd">            and a timing_conversion dictionary to transform it to frames.</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a><span class="sd">            For example if column &#39;duration_seconds&#39; is present,</span>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a><span class="sd">            the timing_conversion dictionary should be</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a><span class="sd">            {&#39;frames&#39;: 30, &#39;seconds&#39;: 1} if the recording was at 30 frames per second.</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a><span class="sd">        timing_conversion: a dictionary to convert the timing into a different unit.</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="sd">            For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a><span class="sd">            and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a><span class="sd">            You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a><span class="sd">            for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a><span class="sd">            You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a><span class="sd">            but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a><span class="sd">            for example this is valid for the example above:</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a><span class="sd">            If timing_conversion is None, then the timing is not converted</span>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a><span class="sd">            and &#39;duration_frames&#39; must be provided in the dataframe.</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a><span class="sd">        (Timeline): a Timeline object with labels and duration initialised from &#39;group&#39;, &#39;name&#39;, &#39;description&#39; and</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a><span class="sd">                duration fields of the dataframe. In the order in which they appear in the dataframe.</span>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a>    <span class="n">label_order</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a>    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a>        <span class="n">label_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TimeLabel</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a>                                     <span class="n">group</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">],</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a>                                     <span class="n">description</span><span class="o">=</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a>                                     <span class="p">)</span>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a>                           <span class="p">)</span>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a>    <span class="k">if</span> <span class="s1">&#39;duration_frames&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a>        <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_frames&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a>        <span class="k">assert</span> <span class="n">timing_conversion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;if duration_frames is not in the dataframe, &quot;</span> \
<a id="__codelineno-0-752" name="__codelineno-0-752"></a>                                              <span class="s2">&quot;timing_conversion must be provided&quot;</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a>        <span class="c1"># check that timing_conversion is a dictionary</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timing_conversion</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span> <span class="s2">&quot;timing_conversion must be a dictionary&quot;</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a>        <span class="c1"># check that frames are present in the timing_conversion dictionary</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a>        <span class="k">assert</span> <span class="s1">&#39;frames&#39;</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="s2">&quot;frames must be in the timing_conversion dictionary&quot;</span>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a>        <span class="c1"># list units that are present in both dataframe and timing_conversion dictionary</span>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a>        <span class="n">unit_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">unit</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a>        <span class="c1"># check that at least one unit from the timing_conversion dictionary is present in the dataframe</span>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">unit_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;timing_conversion dictionary must have at least one &quot;</span> \
<a id="__codelineno-0-761" name="__codelineno-0-761"></a>                                   <span class="s2">&quot;of the following keys in addition to &#39;frames&#39;: &quot;</span> <span class="o">+</span> \
<a id="__codelineno-0-762" name="__codelineno-0-762"></a>                                   <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">col_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">col_name</span> <span class="ow">in</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a>                                              <span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">}])</span>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a>        <span class="n">unit</span> <span class="o">=</span> <span class="n">unit_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a>        <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">*</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="s1">&#39;frames&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="n">unit</span><span class="p">]</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a>        <span class="c1"># if all values in duration are integer, convert to int, else raise an assertion</span>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a>        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">duration_frames</span><span class="p">):</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a>            <span class="n">duration_frames</span> <span class="o">=</span> <span class="n">duration_frames</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a>            <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;duration in frames must be integer after conversion from &quot;</span> <span class="o">+</span> <span class="n">unit</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">label_order</span><span class="p">,</span> <span class="n">duration_frames</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Timeline.from_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a Timeline object from a dictionary.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>d</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dictionary to initialize the timeline.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Timeline" href="#src.vodex.annotation.Timeline">Timeline</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a Timeline object with label_order and duration initialized from 'label_order' and
    'timing' fields of the dictionary.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-680" name="__codelineno-0-680"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a><span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a><span class="sd">    Create a Timeline object from a dictionary.</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="sd">        d: dictionary to initialize the timeline.</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">        (Timeline): a Timeline object with label_order and duration initialized from &#39;label_order&#39; and</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">                &#39;timing&#39; fields of the dictionary.</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>    <span class="n">label_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">TimeLabel</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">ld</span><span class="p">)</span> <span class="k">for</span> <span class="n">ld</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;label_order&#39;</span><span class="p">]]</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">label_order</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;timing&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Timeline.from_json" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">j</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a Timeline object from a json string.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>j</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>json string to initialise the cycle</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.annotation.Timeline" href="#src.vodex.annotation.Timeline">Timeline</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a Timeline object with label_order and duration initialised from 'label_order' and
    'timing' fields of the json srting.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-695" name="__codelineno-0-695"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a><span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a><span class="sd">    Create a Timeline object from a json string.</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a><span class="sd">        j : json string to initialise the cycle</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a><span class="sd">        (Timeline): a Timeline object with label_order and duration initialised from &#39;label_order&#39; and</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a><span class="sd">                &#39;timing&#39; fields of the json srting.</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a>    <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Timeline.get_label_per_frame" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_label_per_frame</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>A list of labels per frame for the duration of the experiment.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.annotation.TimeLabel" href="#src.vodex.annotation.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>labels per frame for the experiment.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-590" name="__codelineno-0-590"></a><span class="k">def</span> <span class="nf">get_label_per_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a><span class="sd">    A list of labels per frame for the duration of the experiment.</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a><span class="sd">        labels per frame for the experiment.</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>    <span class="n">per_frame_label_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>    <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>        <span class="n">per_frame_label_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_time</span> <span class="o">*</span> <span class="p">[</span><span class="n">label</span><span class="p">])</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>    <span class="k">return</span> <span class="n">per_frame_label_list</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Timeline.to_df" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_df</span><span class="p">(</span><span class="n">timing_conversion</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Put all the information about a Timeline object into a dataframe.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>timing_conversion</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary to convert the timing into a different unit.
For example, if you want to convert the timing from frames to seconds,
and you were recording at 30 frames per second, you can use
timing_conversion = {'frames': 1, 'seconds': 1/30}
You can list multiple units in the dictionary, and the timing will be converted to all of them,
for example if there are also 10 frames per volume, you can use:
timing_conversion = {'frames': 1, 'seconds': 1/30, 'volumes': 1/10}
You must include 'frames' in the dictionary! The value of frames does not have to be 1,
but it must be consistent with the other units. the rest of the values.
for example this is valid for the example above:
timing_conversion = {'frames': 10, 'seconds': 1/3, 'volumes': 1}.
if timing_conversion is None, then the timing is not converted.
if timing_conversion is not None, then the timing is converted and both the original and converted
timing are added to the dataframe.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dataframe with columns 'timing', 'group', 'name' and 'description'.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>'timing' will be written in all the units in the timing_conversion dictionary,</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>or just in frames, if timing_conversion is None.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-632" name="__codelineno-0-632"></a><span class="k">def</span> <span class="nf">to_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a><span class="sd">    Put all the information about a Timeline object into a dataframe.</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a><span class="sd">        timing_conversion: a dictionary to convert the timing into a different unit.</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a><span class="sd">            For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a><span class="sd">            and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a><span class="sd">            You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a><span class="sd">            for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a><span class="sd">            You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a><span class="sd">            but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a><span class="sd">            for example this is valid for the example above:</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a><span class="sd">            if timing_conversion is None, then the timing is not converted.</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a><span class="sd">            if timing_conversion is not None, then the timing is converted and both the original and converted</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a><span class="sd">            timing are added to the dataframe.</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a><span class="sd">        a dataframe with columns &#39;timing&#39;, &#39;group&#39;, &#39;name&#39; and &#39;description&#39;.</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a><span class="sd">        &#39;timing&#39; will be written in all the units in the timing_conversion dictionary,</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a><span class="sd">        or just in frames, if timing_conversion is None.</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a>    <span class="c1"># prepare timing columns</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>    <span class="k">if</span> <span class="n">timing_conversion</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>        <span class="n">timing_conversion</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;frames&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>    <span class="k">assert</span> <span class="s1">&#39;frames&#39;</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="s2">&quot;frames must be in the timing_conversion dictionary&quot;</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>    <span class="n">timing_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">timing_columns</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">])</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>    <span class="c1"># write timing columns</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>    <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">timing_conversion</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a>        <span class="n">frames_per_unit</span> <span class="o">=</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="s1">&#39;frames&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">timing_conversion</span><span class="p">[</span><span class="n">unit</span><span class="p">]</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a>        <span class="n">duration</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span> <span class="o">/</span> <span class="n">frames_per_unit</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a>        <span class="c1"># if all are integers, turn to integer</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">duration</span><span class="p">):</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>            <span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a>        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;duration_&#39;</span> <span class="o">+</span> <span class="n">unit</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>    <span class="c1"># write labels</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">group</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">description</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Timeline.to_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Put all the information about a Timeline object into a dictionary.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary with fields 'label_order' and 'timing' .</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-612" name="__codelineno-0-612"></a><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">    Put all the information about a Timeline object into a dictionary.</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a><span class="sd">        a dictionary with fields &#39;label_order&#39; and &#39;timing&#39; .</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a>    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;timing&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a>            <span class="s1">&#39;label_order&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">],</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a>            <span class="p">}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.annotation.Timeline.to_json" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_json</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Put all the information about a Timeline object into a json string.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a json string with fields 'label_order' and 'timing' .</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/annotation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a><span class="sd">    Put all the information about a Timeline object into a json string.</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a><span class="sd">        a json string with fields &#39;label_order&#39; and &#39;timing&#39; .</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../core/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Core">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Core
              </div>
            </div>
          </a>
        
        
          
          <a href="../dbmethods/" class="md-footer__link md-footer__link--next" aria-label="Next: Dbmethods">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Dbmethods
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2023 Anna Nadtochiy
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/LemonJust" target="_blank" rel="noopener" title="LemonJust on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/in/anna-nadtochiy/" target="_blank" rel="noopener" title="LemonJust (Anna Nadtochiy) on LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.top", "navigation.instant", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "navigation.footer", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>