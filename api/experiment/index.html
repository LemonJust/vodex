
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../loaders/">
      
      
        <link rel="next" href="../../examples/">
      
      
      <link rel="icon" href="../../img/icons8_layers.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.6">
    
    
      
        <title>Experiment - VoDEx Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vodexexperiment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="VoDEx Docs" class="md-header__button md-logo" aria-label="VoDEx Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            VoDEx Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Experiment
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/LemonJust/vodex" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    LemonJust/vodex
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../install/" class="md-tabs__link">
        
  
    
  
  Installation

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../qstart/" class="md-tabs__link">
          
  
    
  
  Quick Start

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../examples/" class="md-tabs__link">
        
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../db/" class="md-tabs__link">
        
  
    
  
  Database

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../contribute/" class="md-tabs__link">
        
  
    
  
  Contributions

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../data/" class="md-tabs__link">
        
  
    
  
  Data

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../napari/" class="md-tabs__link">
          
  
    
  
  napari_vodex

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="VoDEx Docs" class="md-nav__button md-logo" aria-label="VoDEx Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>

    </a>
    VoDEx Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/LemonJust/vodex" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    LemonJust/vodex
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../qstart/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Quick Start
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../qstart/new_experiment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Experiment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../qstart/load_experiment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load Experiment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../qstart/load_volumes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load Volumes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    API
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../annotation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dbmethods/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dbmethods
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../loaders/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Loaders
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Experiment
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Experiment
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.vodex.experiment" class="md-nav__link">
    experiment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment" class="md-nav__link">
    Experiment
  </a>
  
    <nav class="md-nav" aria-label="Experiment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.annotations" class="md-nav__link">
    annotations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.cycles" class="md-nav__link">
    cycles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.data_dir" class="md-nav__link">
    data_dir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.file_names" class="md-nav__link">
    file_names
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.frames_per_file" class="md-nav__link">
    frames_per_file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.frames_per_volume" class="md-nav__link">
    frames_per_volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.full_volumes" class="md-nav__link">
    full_volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.labels" class="md-nav__link">
    labels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.labels_df" class="md-nav__link">
    labels_df
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.n_frames" class="md-nav__link">
    n_frames
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.n_full_volumes" class="md-nav__link">
    n_full_volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.n_head_frames" class="md-nav__link">
    n_head_frames
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.n_tail_frames" class="md-nav__link">
    n_tail_frames
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.n_volumes" class="md-nav__link">
    n_volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.starting_slice" class="md-nav__link">
    starting_slice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.volumes" class="md-nav__link">
    volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.add_annotations" class="md-nav__link">
    add_annotations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.add_annotations_from_df" class="md-nav__link">
    add_annotations_from_df()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.add_annotations_from_volume_annotation_df" class="md-nav__link">
    add_annotations_from_volume_annotation_df()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.batch_volumes" class="md-nav__link">
    batch_volumes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.choose_frames" class="md-nav__link">
    choose_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.choose_volumes" class="md-nav__link">
    choose_volumes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.close" class="md-nav__link">
    close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.create" class="md-nav__link">
    create()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.delete_annotations" class="md-nav__link">
    delete_annotations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.from_dir" class="md-nav__link">
    from_dir()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.get_volume_annotation_df" class="md-nav__link">
    get_volume_annotation_df()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.get_volume_annotations" class="md-nav__link">
    get_volume_annotations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.list_conditions_per_cycle" class="md-nav__link">
    list_conditions_per_cycle()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.list_cycle_iterations" class="md-nav__link">
    list_cycle_iterations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.list_volumes" class="md-nav__link">
    list_volumes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.load" class="md-nav__link">
    load()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.load_slices" class="md-nav__link">
    load_slices()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.load_volumes" class="md-nav__link">
    load_volumes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.experiment.Experiment.save" class="md-nav__link">
    save()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../napari/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    napari_vodex
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            napari_vodex
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../napari/how-to/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="vodexexperiment">vodex.experiment</h1>


<div class="doc doc-object doc-module">



<a id="src.vodex.experiment"></a>
  <div class="doc doc-contents first">
  
      <p>This module contains the 'Experiment' class, which provides a summary of the information about an experiment. The
class can initialise, save, and load the database, search for frames based on volumes or annotations, and load image
data using the appropriate loader. To initialise the database, it integrates the information from the FileManager,
FrameManager, VolumeManager, as well as Annotations, to create a database.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="src.vodex.experiment.Experiment" class="doc doc-heading">
          <code>Experiment</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>The class can initialise, save, and load the database, search for frames based on volumes or annotations, and load image
data using the appropriate loader. To initialise the database, it integrates the information from the File, Frame,
and Volume managers, as well as Annotations, to create a database.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>db_reader</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.dbmethods.DbReader" href="../dbmethods/#src.vodex.dbmethods.DbReader">DbReader</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a DbReader object connected to the database with the experiment description.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>db</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a DbReader object connected to the database with the experiment description.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>loader</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.ImageLoader" href="../core/#src.vodex.core.ImageLoader">ImageLoader</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>an ImageLoader object to load metadata and image data from files.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/vodex/experiment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-0-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-0-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-0-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-0-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-0-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-0-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-0-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-0-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-0-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-0-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-0-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-0-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-0-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-0-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-0-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span>
<span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="k">class</span> <span class="nc">Experiment</span><span class="p">:</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sd">    The class can initialise, save, and load the database, search for frames based on volumes or annotations, and load image</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">    data using the appropriate loader. To initialise the database, it integrates the information from the File, Frame,</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">    and Volume managers, as well as Annotations, to create a database.</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">        db_reader: a DbReader object connected to the database with the experiment description.</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">        db: a DbReader object connected to the database with the experiment description.</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">        loader: an ImageLoader object to load metadata and image data from files.</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_reader</span><span class="p">:</span> <span class="n">DbReader</span><span class="p">):</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">        Initialize the experiment with the given DbReader object.</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">db_reader</span><span class="p">,</span> <span class="n">DbReader</span><span class="p">),</span> <span class="s2">&quot;Need DbReader to initialise the Experiment&quot;</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_reader</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>        <span class="c1"># will add the loader the first time you are loading anything</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>        <span class="c1"># in load_frames() or load_volumes()</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="p">:</span> <span class="n">ImageLoader</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="k">def</span> <span class="nf">n_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">        Returns the total number of frames in the experiment.</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>        <span class="c1"># TODO: cash this value when property is called for the first time</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_n_frames</span><span class="p">()</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>    <span class="k">def</span> <span class="nf">n_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">        Returns the total number of volumes in the experiment.</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">        This might include partial volumes at the beginning of the experiment (ID: -1)</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        and at the end of the experiment (ID : -2).</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>        <span class="c1"># TODO: cash this value when property is called for the first time</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_volume_list</span><span class="p">())</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="k">def</span> <span class="nf">n_full_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">        Returns the total number of full volumes in the experiment.</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span class="c1"># TODO: cash this value when property is called for the first time</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_options</span><span class="p">()</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;num_full_volumes&#39;</span><span class="p">])</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span class="k">def</span> <span class="nf">n_head_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">        Returns the number of frames in the first partial volume,</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">        or 0 if there is no partial volume at the beginning.</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>        <span class="c1"># TODO: cash this value when property is called for the first time</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_options</span><span class="p">()</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;num_head_frames&#39;</span><span class="p">])</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span class="k">def</span> <span class="nf">n_tail_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">        Returns the number of frames in the last partial volume,</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">        or 0 if there is no partial volume at the end.</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span class="c1"># TODO: cash this value when property is called for the first time</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_options</span><span class="p">()</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;num_tail_frames&#39;</span><span class="p">])</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>    <span class="k">def</span> <span class="nf">volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">:</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">        Returns the list of volume IDs in the experiment.</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">        This might include partial volumes at the beginning of the experiment (ID: -1)</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">        and at the end of the experiment (ID : -2).</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>        <span class="c1"># TODO: cash this value when property is called for the first time</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="n">volume_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_volume_list</span><span class="p">())</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">volume_list</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The are some frames at the beginning of the recording &quot;</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>                          <span class="sa">f</span><span class="s2">&quot;that don&#39;t correspond to a full volume.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">volume_list</span> <span class="o">==</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The are some frames at the end of the recording &quot;</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>                          <span class="sa">f</span><span class="s2">&quot;that don&#39;t correspond to a full volume.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="k">return</span> <span class="n">volume_list</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>    <span class="k">def</span> <span class="nf">full_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">:</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">        Returns the list of full volume IDs in the experiment.</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>        <span class="n">volume_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">volumes</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>        <span class="k">return</span> <span class="n">volume_list</span><span class="p">[</span><span class="n">volume_list</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>    <span class="k">def</span> <span class="nf">batch_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">overlap</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>                      <span class="n">volumes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>                      <span class="n">full_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">        Returns a list of volume IDs that can be used to load batches of volumes.</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="sd">        The batch size is given in number of volumes, and the overlap is given in number of volumes.</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">        If full_only is True, only full volumes are returned.</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">            batch_size: the number of volumes in each batch.</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">            overlap: the number of volumes that overlap between batches.</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">            volumes: the list of volumes to be batched.</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">            full_only: if True, only full volumes are returned. If volumes is not None, this argument is ignored.</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">            A list of lists (n_batches x batch_size) of volume IDs that can be used to load batches of volumes.</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>        <span class="k">if</span> <span class="n">overlap</span> <span class="o">&gt;=</span> <span class="n">batch_size</span><span class="p">:</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Overlap must be smaller than batch size.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>        <span class="k">if</span> <span class="n">volumes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>            <span class="n">volume_list</span> <span class="o">=</span> <span class="n">volumes</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>            <span class="k">if</span> <span class="n">full_only</span><span class="p">:</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>                <span class="n">volume_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>                <span class="n">volume_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">volumes</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>        <span class="c1"># turn into a list if numpy array</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">volume_list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>            <span class="n">volume_list</span> <span class="o">=</span> <span class="n">volume_list</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>        <span class="n">batch_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">volume_list</span><span class="p">),</span> <span class="n">batch_size</span> <span class="o">-</span> <span class="n">overlap</span><span class="p">):</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>            <span class="n">batch_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">volume_list</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="n">batch_size</span><span class="p">])</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>        <span class="k">return</span> <span class="n">batch_list</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>    <span class="k">def</span> <span class="nf">annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">        Returns the list of annotation names that have been added to the experiment.</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_Names_from_AnnotationTypes</span><span class="p">()</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="k">def</span> <span class="nf">labels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="sd">        Returns a dict with annotation names, labels and label descriptions</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">        that have been added to the experiment.</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>        <span class="n">annotation_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">annotations</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>        <span class="n">label_dict</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span class="k">for</span> <span class="n">annotation_name</span> <span class="ow">in</span> <span class="n">annotation_names</span><span class="p">:</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>            <span class="n">label_names</span><span class="p">,</span> <span class="n">descriptions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_Name_and_Description_from_AnnotationTypeLabels</span><span class="p">(</span><span class="n">annotation_name</span><span class="p">)</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>            <span class="n">label_dict</span><span class="p">[</span><span class="n">annotation_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>                <span class="s1">&#39;labels&#39;</span><span class="p">:</span> <span class="n">label_names</span><span class="p">,</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>                <span class="s1">&#39;descriptions&#39;</span><span class="p">:</span> <span class="n">descriptions</span><span class="p">}</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>        <span class="k">return</span> <span class="n">label_dict</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>    <span class="k">def</span> <span class="nf">labels_df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="sd">        Returns a dataframe with annotation names, labels and label descriptions</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">        that have been added to the experiment.</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>        <span class="n">annotation_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">annotations</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>        <span class="n">label_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;annotation&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="p">[]}</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>        <span class="k">for</span> <span class="n">annotation_name</span> <span class="ow">in</span> <span class="n">annotation_names</span><span class="p">:</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>            <span class="n">label_names</span><span class="p">,</span> <span class="n">descriptions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_Name_and_Description_from_AnnotationTypeLabels</span><span class="p">(</span><span class="n">annotation_name</span><span class="p">)</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>            <span class="n">label_dict</span><span class="p">[</span><span class="s1">&#39;annotation&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">annotation_name</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">label_names</span><span class="p">))</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>            <span class="n">label_dict</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_names</span><span class="p">)</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>            <span class="n">label_dict</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">descriptions</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">label_names</span><span class="p">])</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">label_dict</span><span class="p">)</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>    <span class="k">def</span> <span class="nf">cycles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="sd">        Returns the list of cycle names that have been added to the experiment.</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_cycle_names</span><span class="p">()</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>    <span class="k">def</span> <span class="nf">file_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">        Returns the list of file names that have been added to the experiment.</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>        <span class="c1"># TODO: cash this value when property is called for the first time</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_file_names</span><span class="p">()</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>    <span class="k">def</span> <span class="nf">frames_per_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">        Returns the list of frames per file that have been added to the experiment.</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>        <span class="c1"># TODO: cash this value when property is called for the first time</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_frames_per_file</span><span class="p">()</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>    <span class="k">def</span> <span class="nf">data_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="sd">        Returns the path to the data directory.</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>        <span class="c1"># TODO: cash this value when property is called for the first time</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_data_dir</span><span class="p">()</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>    <span class="k">def</span> <span class="nf">frames_per_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="sd">        Returns the number of frames per volume.</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>        <span class="c1"># TODO: cash this value when property is called for the first time</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_fpv</span><span class="p">()</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>    <span class="k">def</span> <span class="nf">starting_slice</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">        Returns the number of the first slice in the experiment.</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>        <span class="c1"># TODO: cash this value when property is called for the first time</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_fgf</span><span class="p">()</span>  <span class="c1"># fgf stands for first good frame</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">volume_manager</span><span class="p">:</span> <span class="n">VolumeManager</span><span class="p">,</span> <span class="n">annotations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Annotation</span><span class="p">],</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">        Creates a database instance from the core classes and initialises the experiment.</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="sd">            volume_manager: VolumeManager object that summarises the information about the image data.</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="sd">            annotations: list of annotations to add to the experiment descriptions.</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="sd">            verbose: whether to print the information about Filemanager, VolumeManager and Annotations on the screen.</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="sd">            (Experiment): initialised experiment.</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>            <span class="nb">print</span><span class="p">(</span><span class="n">volume_manager</span><span class="o">.</span><span class="n">file_manager</span><span class="p">)</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>            <span class="nb">print</span><span class="p">(</span><span class="n">volume_manager</span><span class="p">)</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>            <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">annotations</span><span class="p">:</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>                <span class="nb">print</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>                <span class="k">if</span> <span class="n">annotation</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>                    <span class="nb">print</span><span class="p">(</span><span class="n">annotation</span><span class="o">.</span><span class="n">cycle_info</span><span class="p">())</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>        <span class="n">db</span> <span class="o">=</span> <span class="n">DbWriter</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>        <span class="n">db</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span><span class="n">volumes</span><span class="o">=</span><span class="n">volume_manager</span><span class="p">,</span> <span class="n">annotations</span><span class="o">=</span><span class="n">annotations</span><span class="p">)</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>        <span class="n">db_reader</span> <span class="o">=</span> <span class="n">DbReader</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">db_reader</span><span class="p">)</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>    <span class="k">def</span> <span class="nf">from_dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">frames_per_volume</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>                 <span class="n">starting_slice</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="sd">        Creates a database instance from a directory and initialises the experiment.</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">        The directory should contain the image files.</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a><span class="sd">        Annotations are not initialised, but can be added later.</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>        <span class="c1"># initialise volume manager</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>        <span class="n">volume_manager</span> <span class="o">=</span> <span class="n">VolumeManager</span><span class="o">.</span><span class="n">from_dir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">,</span> <span class="n">frames_per_volume</span><span class="p">,</span> <span class="n">fgf</span><span class="o">=</span><span class="n">starting_slice</span><span class="p">)</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">volume_manager</span><span class="p">,</span> <span class="p">[],</span> <span class="n">verbose</span><span class="p">)</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">        Saves a database into a file.</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a><span class="sd">            file_name: full path to a file to save database.</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a><span class="sd">                (Usually the filename would end with .db)</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>        <span class="n">DbWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>    <span class="k">def</span> <span class="nf">add_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Annotation</span><span class="p">]):</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><span class="sd">        Adds annotations to existing experiment.</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><span class="sd">        Does NOT save the changes to disc! run self.save() to save.</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="sd">            annotations: a list of annotations to add to the database.</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>        <span class="n">DbWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span><span class="o">.</span><span class="n">add_annotations</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>    <span class="k">def</span> <span class="nf">add_annotations_from_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>                                <span class="n">cycles</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>                                <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>                                <span class="n">groups</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>                                <span class="n">info</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">        Adds annotations to existing experiment from a data frame.</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">        Does NOT save the changes to disc! run self.save() to save.</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="sd">            annotation_df: a dataframe with the annotation information</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">            cycles: a list of the annotation names that are cycles or a boolean.</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">                If False, all annotations are assumed to be timelines.</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">                If True, all annotations are assumed to be cycles.</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">                Specified as {&#39;cycles&#39;: }</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="sd">            timing_conversion: a dictionary to convert the timing of the annotation.</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="sd">                For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="sd">                and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="sd">                You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><span class="sd">                for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a><span class="sd">                You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">                but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">                for example this is valid for the example above:</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="sd">                timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a><span class="sd">                If timing_conversion is None, then the timing is not converted</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a><span class="sd">                and &#39;duration_frames&#39; must be provided in the dataframe.</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a><span class="sd">            groups: the group of the annotation if there are multiple groups in the dataframe.</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="sd">                If None, all groups are added.</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="sd">            info: additional information about the annotation, dictionary with keys:</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="sd">                &#39;annotation name&#39;: information</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>        <span class="n">n_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_n_frames</span><span class="p">()</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>        <span class="k">if</span> <span class="n">groups</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>            <span class="n">groups</span> <span class="o">=</span> <span class="n">annotation_df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>        <span class="n">annotations</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>            <span class="n">group_df</span> <span class="o">=</span> <span class="n">annotation_df</span><span class="p">[</span><span class="n">annotation_df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span><span class="p">]</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>            <span class="k">if</span> <span class="n">cycles</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">cycles</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">cycles</span><span class="p">):</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>                <span class="n">is_cycle</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>                <span class="n">is_cycle</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>            <span class="k">if</span> <span class="n">info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>                <span class="n">group_info</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="n">group</span><span class="p">]</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>                <span class="n">group_info</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>            <span class="n">annotations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Annotation</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">group_df</span><span class="p">,</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>                                                  <span class="n">timing_conversion</span><span class="p">,</span> <span class="n">is_cycle</span><span class="p">,</span> <span class="n">group_info</span><span class="p">))</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">add_annotations</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>    <span class="k">def</span> <span class="nf">delete_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a><span class="sd">        Deletes annotations from existing experiment.</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="sd">        Does NOT save the changes to disc! run self.save() to save.</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a><span class="sd">            annotation_names: a list of annotation names to delete from the database.</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">annotation_names</span><span class="p">:</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>            <span class="n">DbWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span><span class="o">.</span><span class="n">delete_annotation</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a><span class="sd">        Close database connection.</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a><span class="sd">        Loads a database from a file and initialises an Experiment.</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">            file_name: full path to a file to database.</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="sd">        Return:</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="sd">            (Experiment): initialised experiment.</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>        <span class="n">db_reader</span> <span class="o">=</span> <span class="n">DbReader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">db_reader</span><span class="p">)</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>    <span class="k">def</span> <span class="nf">choose_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditions</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]],</span> <span class="n">logic</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;and&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">        Selects the frames that correspond to specified conditions;</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="sd">        Uses &quot;or&quot; or &quot;and&quot; between the conditions depending on logic.</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">        To load the selected frames, use load_frames().</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">            conditions: a list of conditions on the annotation labels</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a><span class="sd">                in a form [(group, name),(group, name), ...] where group is a string for the annotation type</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a><span class="sd">                and name is the name of the label of that annotation type. For example [(&#39;light&#39;, &#39;on&#39;), (&#39;shape&#39;,&#39;c&#39;)]</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="sd">            logic: &quot;and&quot; or &quot;or&quot; , default is &quot;and&quot;.</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="sd">            list of frame ids that were chosen. Remember that frame numbers start at 1.</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>        <span class="k">assert</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;and&quot;</span> <span class="ow">or</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;or&quot;</span><span class="p">,</span> \
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>            <span class="s1">&#39;between_group_logic should be equal to &quot;and&quot; or &quot;or&quot;&#39;</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>        <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>        <span class="k">if</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;and&quot;</span><span class="p">:</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>            <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_and_frames_per_annotations</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>        <span class="k">elif</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;or&quot;</span><span class="p">:</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>            <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_or_frames_per_annotations</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>        <span class="k">return</span> <span class="n">frames</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>    <span class="k">def</span> <span class="nf">choose_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditions</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]],</span> <span class="n">logic</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>                       <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">        Selects only full volumes that correspond to specified conditions;</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="sd">        Uses &quot;or&quot; or &quot;and&quot; between the conditions depending on logic.</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">        To load the selected volumes, use load_volumes()</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="sd">            verbose: Whether to print the information about how many frames were choose/ dropped</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">            conditions: a list of conditions on the annotation labels</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><span class="sd">                in a form [(group, name),(group, name), ...] where group is a string for the annotation type</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><span class="sd">                and name is the name of the label of that annotation type.</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a><span class="sd">                For example [(&#39;light&#39;, &#39;on&#39;), (&#39;shape&#39;,&#39;c&#39;)]</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a><span class="sd">            logic: &quot;and&quot; or &quot;or&quot; , default is &quot;and&quot;.</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="sd">            list of volumes that were chosen.</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><span class="sd">            Remember that frame numbers start at 1, but volumes start at 0.</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>        <span class="c1"># TODO : make all indices start at 1 ?</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;conditions must be a list or a tuple,&quot;</span> \
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>                                                                              <span class="sa">f</span><span class="s2">&quot; but got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="si">}</span><span class="s2"> instead&quot;</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>            <span class="n">conditions</span> <span class="o">=</span> <span class="p">[</span><span class="n">conditions</span><span class="p">]</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>        <span class="c1"># get all the frames that correspond to the conditions</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>        <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">choose_frames</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">logic</span><span class="o">=</span><span class="n">logic</span><span class="p">)</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>        <span class="n">n_frames</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>        <span class="c1"># leave only such frames that correspond to full volumes</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>        <span class="c1"># TODO : not necessary to return the frames?</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>        <span class="n">volumes</span><span class="p">,</span> <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">choose_full_volumes</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>        <span class="n">n_dropped</span> <span class="o">=</span> <span class="n">n_frames</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Choosing only full volumes. &quot;</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>                  <span class="sa">f</span><span class="s2">&quot;Dropped </span><span class="si">{</span><span class="n">n_dropped</span><span class="si">}</span><span class="s2"> frames, kept </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>        <span class="k">return</span> <span class="n">volumes</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>    <span class="k">def</span> <span class="nf">load_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volumes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">:</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a><span class="sd">        Load volumes. Will load the specified full volumes.</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a><span class="sd">        All the returned volumes or slices should have the same number of frames in them.</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><span class="sd">            volumes: the indexes of volumes to load.</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><span class="sd">            verbose: Whether to print the information about the loading</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><span class="sd">            4D array with the loaded volumes. TZYX order.</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>        <span class="c1"># if array convert to list of int</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>            <span class="c1"># make sure it is a 1D array</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">volumes</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;volumes must be a 1D array&quot;</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>            <span class="c1"># make sure all the volumes can be safely converted to integers</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>            <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">volumes</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">==</span> <span class="n">volumes</span><span class="p">),</span> <span class="s2">&quot;All the volumes must be integers&quot;</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>            <span class="n">volumes</span> <span class="o">=</span> <span class="n">volumes</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>        <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_frames_per_volumes</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a>        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">prepare_frames_for_loading</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>        <span class="c1"># unpack</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a>        <span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">,</span> <span class="n">file_ids</span><span class="p">,</span> <span class="n">frame_in_file</span><span class="p">,</span> <span class="n">volumes_per_frame</span> <span class="o">=</span> <span class="n">info</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>        <span class="c1"># get unique volumes and check that they are the same as the ones we asked for</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a>        <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">),</span> <span class="s2">&quot;Requested volumes&quot;</span> \
<a id="__codelineno-0-476" name="__codelineno-0-476"></a>                                                       <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">))</span><span class="si">}</span><span class="s2"> &quot;</span> \
<a id="__codelineno-0-477" name="__codelineno-0-477"></a>                                                       <span class="s2">&quot;can not be found&quot;</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a>        <span class="c1"># make full paths to files ( remember file ids start with 1 )</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="n">file_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">file_id</span> <span class="ow">in</span> <span class="n">file_ids</span><span class="p">]</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;loader&quot;</span><span class="p">):</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="o">=</span> <span class="n">ImageLoader</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>        <span class="n">volumes_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_volumes</span><span class="p">(</span><span class="n">frame_in_file</span><span class="p">,</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a>                                               <span class="n">files</span><span class="p">,</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>                                               <span class="n">volumes_per_frame</span><span class="p">,</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a>                                               <span class="n">show_file_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>                                               <span class="n">show_progress</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a>        <span class="k">return</span> <span class="n">volumes_img</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a>    <span class="k">def</span> <span class="nf">get_volume_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volumes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>                               <span class="n">annotation_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="sd">        Get annotations for volumes.</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a><span class="sd">        Will get the labels for the specified full volumes from each available annotation.</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">            volumes: the indexes of volumes to get annotation for. If a multidimensional array is passed,</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="sd">                will flatten it and get annotations for all the volumes in it.</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="sd">            annotation_names: the names of the annotations to get. If None, will get all the annotations.</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a><span class="sd">            a dictionary with the annotations for each annotation type.</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a><span class="sd">            The keys are the annotation types, the values are lists of labels for each volume.</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="sd">            The last key is &quot;volumes&quot; and the value is a list of volumes.</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>        <span class="c1"># TODO: throw a warning if some volumes are not in the database</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a>        <span class="c1"># if array convert to list of int</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>            <span class="c1"># turn into a 1D array</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>            <span class="n">volumes</span> <span class="o">=</span> <span class="n">volumes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a>            <span class="c1"># make sure all the volumes can be safely converted to integers</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>            <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">volumes</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">==</span> <span class="n">volumes</span><span class="p">),</span> <span class="s2">&quot;All the volumes must be integers&quot;</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a>            <span class="n">volumes</span> <span class="o">=</span> <span class="n">volumes</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a>        <span class="c1"># get annotations for the volumes</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>        <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_volume_annotations</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">annotation_names</span><span class="o">=</span><span class="n">annotation_names</span><span class="p">)</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>        <span class="c1"># prepare dict for the annotations</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a>        <span class="n">annotation</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">annotations</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>        <span class="n">annotation</span><span class="p">[</span><span class="s2">&quot;volumes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>        <span class="c1"># get a single label per volume</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a>        <span class="k">for</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">volumes</span><span class="p">:</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>            <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">annotations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>                <span class="n">volume_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;volume_ids&quot;</span><span class="p">])</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>                <span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">])</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>                <span class="c1"># check that the volume has the same labels</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>                <span class="n">labels_per_volume</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">volume_ids</span> <span class="o">==</span> <span class="n">volume</span><span class="p">])</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels_per_volume</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Volume </span><span class="si">{</span><span class="n">volume</span><span class="si">}</span><span class="s2"> has different labels (</span><span class="si">{</span><span class="n">labels_per_volume</span><span class="si">}</span><span class="s2">) &quot;</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>                                     <span class="sa">f</span><span class="s2">&quot;for the same annotation </span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s2">. Can&#39;t assign a single label to the volume.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>                <span class="c1"># add the label to the dict</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>                <span class="n">annotation</span><span class="p">[</span><span class="n">group</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">labels_per_volume</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>            <span class="c1"># add the volume to the dict</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>            <span class="n">annotation</span><span class="p">[</span><span class="s2">&quot;volumes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">volume</span><span class="p">)</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>        <span class="k">return</span> <span class="n">annotation</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a>    <span class="k">def</span> <span class="nf">get_volume_annotation_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volumes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a>                                 <span class="n">annotation_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="sd">        Get annotations for volumes.</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">        Will get the labels for the specified full volumes from each available annotation as pandas dataframe.</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">            volumes: the indexes of volumes to get annotation for. If a multidimensional array is passed,</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">                will flatten it and get annotations for all the volumes in it.</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="sd">            annotation_names: the names of the annotations to get. If None, will get all the annotations.</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a><span class="sd">            a dataframe with the annotations for each annotation type.</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a><span class="sd">            The columns are volumes and the annotation types with the corresponding labels for each volume.</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>        <span class="c1"># get annotations for the volumes</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a>        <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume_annotations</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">annotation_names</span><span class="o">=</span><span class="n">annotation_names</span><span class="p">)</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a>        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>    <span class="k">def</span> <span class="nf">add_annotations_from_volume_annotation_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volume_annotation_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>                                                  <span class="n">annotation_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a><span class="sd">        Add annotations from volume_annotation dataframe to the experiment.</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="sd">        Use it if you have cropped the volumes from the original movie and</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="sd">        want to add the annotations to the cropped movie.</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a><span class="sd">        The format of the dataframe should be the same as the one returned by get_volume_annotation_df.</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a><span class="sd">        The length of the volumes should be the same as the length of the experiment.</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a><span class="sd">        Will only work for annotation types that are constant for the whole volume. If you have annotations that change</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a><span class="sd">        within the volume, you will need to exclude them.</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a><span class="sd">            volume_annotation_df: the dataframe with the annotations.</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a><span class="sd">            annotation_names: the names of the annotations to add. These must be the column names in the table.</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a><span class="sd">                If None, will add all the annotations in the table and will</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a><span class="sd">                assume that all the columns in the dataframe that are not &quot;volumes&quot; are the annotation names.</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a><span class="sd">                ! If you have modified the table to add additional columns that are NOT annotations,</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="sd">                you must specify the annotation names,</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a><span class="sd">                otherwise vodex will attempt to add those columns as annotations!</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>        <span class="c1"># make a copy of the dataframe to avoid modifying the original</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>        <span class="n">volume_annotation_df</span> <span class="o">=</span> <span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>        <span class="c1"># get the columns in the dataframe that are not &quot;</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>        <span class="k">if</span> <span class="n">annotation_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>            <span class="n">annotation_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>            <span class="n">annotation_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;volumes&quot;</span><span class="p">)</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>        <span class="c1"># add duration column to the dataframe</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>        <span class="n">volume_annotation_df</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames_per_volume</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>        <span class="c1"># get index of the volume -1 (head)</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>        <span class="n">head_volume</span> <span class="o">=</span> <span class="n">volume_annotation_df</span><span class="p">[</span><span class="n">volume_annotation_df</span><span class="p">[</span><span class="s2">&quot;volumes&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>        <span class="c1"># get index of the volume -2 (tail)</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>        <span class="n">tail_volume</span> <span class="o">=</span> <span class="n">volume_annotation_df</span><span class="p">[</span><span class="n">volume_annotation_df</span><span class="p">[</span><span class="s2">&quot;volumes&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>        <span class="c1"># set the duration for partial volumes</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">head_volume</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>            <span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">head_volume</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_head_frames</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>            <span class="c1"># assign the row to the beginning of the dataframe</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>            <span class="n">volume_annotation_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">head_volume</span><span class="p">],</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>                                              <span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">head_volume</span><span class="p">)])</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tail_volume</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>            <span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">tail_volume</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_tail_frames</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>            <span class="c1"># assign the row to the end of the dataframe</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>            <span class="n">volume_annotation_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">tail_volume</span><span class="p">),</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a>                                              <span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">tail_volume</span><span class="p">]])</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>        <span class="c1"># add the annotations to the experiment</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a>        <span class="k">for</span> <span class="n">annotation_name</span> <span class="ow">in</span> <span class="n">annotation_names</span><span class="p">:</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>            <span class="c1"># get the labels for the annotation</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a>            <span class="n">annotation_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;group&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">annotation_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">volume_annotation_df</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>                                          <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">volume_annotation_df</span><span class="p">[</span><span class="n">annotation_name</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a>                                          <span class="s2">&quot;duration_frames&quot;</span><span class="p">:</span> <span class="n">volume_annotation_df</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">})</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a>            <span class="c1"># add the annotation</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">add_annotations_from_df</span><span class="p">(</span><span class="n">annotation_df</span><span class="p">)</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a>    <span class="k">def</span> <span class="nf">load_slices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">volumes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a>                    <span class="n">skip_missing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">:</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">        Load volumes. Will load the specified full volumes.</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a><span class="sd">        All the returned volumes or slices should have the same number of frames in them.</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="sd">            slices: the indexes of slices in the volumes to load.</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="sd">            volumes: the indexes of volumes to load slices for. If None, will load slices for all volumes.</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="sd">            skip_missing: Whether to skip missing volumes.</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="sd">                If False, will raise an error if a slice is missing for any volume.</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="sd">            verbose: Whether to print the information about the loading</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a><span class="sd">            4D array with the loaded slices for selected volumes. TZYX order.</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>        <span class="k">if</span> <span class="n">volumes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>            <span class="n">volumes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_volume_list</span><span class="p">()</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>        <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_frames_per_volumes</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">slices</span><span class="o">=</span><span class="n">slices</span><span class="p">)</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">prepare_frames_for_loading</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>        <span class="c1"># unpack and load</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>        <span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">,</span> <span class="n">file_ids</span><span class="p">,</span> <span class="n">frame_in_file</span><span class="p">,</span> <span class="n">volumes_per_frame</span> <span class="o">=</span> <span class="n">info</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>        <span class="c1"># get unique volumes and check that they are the same as the ones we asked for</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>        <span class="k">if</span> <span class="n">skip_missing</span><span class="p">:</span>  <span class="c1"># throw a warning</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a>            <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">):</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a>                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Requested volumes </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">))</span><span class="si">}</span><span class="s2"> &quot;</span> <span class="o">+</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>                              <span class="sa">f</span><span class="s2">&quot;are not present in the slices </span><span class="si">{</span><span class="n">slices</span><span class="si">}</span><span class="s2">. &quot;</span> <span class="o">+</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a>                              <span class="sa">f</span><span class="s2">&quot;Loaded slices for </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">)</span><span class="si">}</span><span class="s2"> volumes.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># throw an error</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a>            <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">),</span> \
<a id="__codelineno-0-645" name="__codelineno-0-645"></a>                <span class="sa">f</span><span class="s2">&quot;Requested volumes </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">))</span><span class="si">}</span><span class="s2"> &quot;</span> \
<a id="__codelineno-0-646" name="__codelineno-0-646"></a>                <span class="sa">f</span><span class="s2">&quot;are not present in the slices </span><span class="si">{</span><span class="n">slices</span><span class="si">}</span><span class="s2">. &quot;</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a>        <span class="c1"># make full paths to files ( remember file ids start with 1 )</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a>        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="n">file_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">file_id</span> <span class="ow">in</span> <span class="n">file_ids</span><span class="p">]</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;loader&quot;</span><span class="p">):</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="o">=</span> <span class="n">ImageLoader</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a>        <span class="n">volumes_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_volumes</span><span class="p">(</span><span class="n">frame_in_file</span><span class="p">,</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a>                                               <span class="n">files</span><span class="p">,</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a>                                               <span class="n">volumes_per_frame</span><span class="p">,</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a>                                               <span class="n">show_file_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a>                                               <span class="n">show_progress</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>        <span class="c1"># if the z dimension is smaller than the number of slices, throw a warning</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>        <span class="k">if</span> <span class="n">volumes_img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">slices</span><span class="p">):</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Some of the requested slices </span><span class="si">{</span><span class="n">slices</span><span class="si">}</span><span class="s2"> are not present in the volumes. &quot;</span> <span class="o">+</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>                          <span class="sa">f</span><span class="s2">&quot;Loaded </span><span class="si">{</span><span class="n">volumes_img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> slices instead of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">slices</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>        <span class="k">return</span> <span class="n">volumes_img</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>    <span class="k">def</span> <span class="nf">list_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a><span class="sd">        Returns a list of all the volumes IDs in the experiment.</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a><span class="sd">        If partial volumes are present: for &quot;head&quot; returns -1, for &quot;tail&quot; returns -2.</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a><span class="sd">            list of volume IDs</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>        <span class="c1"># TODO : Remove this function and use volumes property instead</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;list_volumes will be removed in vodex 1.1.0 use volumes property instead.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">volumes</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a>    <span class="k">def</span> <span class="nf">list_conditions_per_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">as_volumes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a><span class="sd">        Returns a list of conditions per cycle.</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="sd">            annotation_type: The name of the annotation for which to get the conditions list</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">            as_volumes: weather to return conditions per frame (default) or per volume.</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="sd">                If as_volumes is true, it is expected that the conditions are not changing in the middle of the volume.</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a><span class="sd">                Will throw an error if it happens.</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">            list of the condition ids ( condition per frame or per volume) and corresponding condition names.</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>        <span class="c1"># TODO : check if empty</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a>        <span class="k">if</span> <span class="n">as_volumes</span><span class="p">:</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a>            <span class="n">_</span><span class="p">,</span> <span class="n">condition_ids</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_conditionIds_per_cycle_per_volumes</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>            <span class="n">fpv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_fpv</span><span class="p">()</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>            <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">==</span> <span class="n">fpv</span><span class="p">),</span> <span class="s2">&quot;Can&#39;t list_conditions_per_cycle with as_volumes=True: &quot;</span> \
<a id="__codelineno-0-697" name="__codelineno-0-697"></a>                                                   <span class="s2">&quot;some conditions don&#39;t cover the whole volume.&quot;</span> \
<a id="__codelineno-0-698" name="__codelineno-0-698"></a>                                                   <span class="s2">&quot;You might want to get conditions per frame,&quot;</span> \
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>                                                   <span class="s2">&quot; by setting as_volumes=False&quot;</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a>            <span class="n">_</span><span class="p">,</span> <span class="n">condition_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_conditionIds_per_cycle_per_frame</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>        <span class="n">names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">_get_Names_from_AnnotationTypeLabels</span><span class="p">()</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a>        <span class="k">return</span> <span class="n">condition_ids</span><span class="p">,</span> <span class="n">names</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a>    <span class="k">def</span> <span class="nf">list_cycle_iterations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">as_volumes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a><span class="sd">        Returns a list of cycle iterations for a specified annotation.</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a><span class="sd">        The annotation must have been initialised from a cycle.</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a><span class="sd">            annotation_type: The name of the annotation for which to get the cycle iteratoins list</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a><span class="sd">            as_volumes: weather to return cycle iteratoins per frame ( default) or per volume.</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a><span class="sd">                If as_volumes is true, it is expected that the cycle iteratoins are not changing in the middle of the volume.</span>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a><span class="sd">                Will throw an error if it happens.</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="sd">            as_volumes: bool</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="sd">            list of the condition ids (cycle iterations per frame or per volume)</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a>        <span class="k">if</span> <span class="n">as_volumes</span><span class="p">:</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a>            <span class="n">_</span><span class="p">,</span> <span class="n">cycle_its</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_cycleIterations_per_volumes</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>            <span class="n">fpv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_fpv</span><span class="p">()</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a>            <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">==</span> <span class="n">fpv</span><span class="p">),</span> <span class="s2">&quot;Can&#39;t list_cycle_iterations with as_volumes=True: &quot;</span> \
<a id="__codelineno-0-725" name="__codelineno-0-725"></a>                                                   <span class="s2">&quot;some iterations don&#39;t cover the whole volume.&quot;</span> \
<a id="__codelineno-0-726" name="__codelineno-0-726"></a>                                                   <span class="s2">&quot;You might want to get iterations per frame,&quot;</span> \
<a id="__codelineno-0-727" name="__codelineno-0-727"></a>                                                   <span class="s2">&quot; by setting as_volumes=False&quot;</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>            <span class="n">_</span><span class="p">,</span> <span class="n">cycle_its</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_cycleIterations_per_frame</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>        <span class="k">return</span> <span class="n">cycle_its</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.annotations" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">annotations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the list of annotation names that have been added to the experiment.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.cycles" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">cycles</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the list of cycle names that have been added to the experiment.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.data_dir" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">data_dir</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the path to the data directory.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.file_names" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">file_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the list of file names that have been added to the experiment.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.frames_per_file" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">frames_per_file</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the list of frames per file that have been added to the experiment.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.frames_per_volume" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">frames_per_volume</span><span class="p">:</span> <span class="nb">int</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the number of frames per volume.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.full_volumes" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">full_volumes</span><span class="p">:</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the list of full volume IDs in the experiment.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.labels" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">labels</span><span class="p">:</span> <span class="nb">dict</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a dict with annotation names, labels and label descriptions
that have been added to the experiment.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.labels_df" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">labels_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a dataframe with annotation names, labels and label descriptions
that have been added to the experiment.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.n_frames" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the total number of frames in the experiment.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.n_full_volumes" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">n_full_volumes</span><span class="p">:</span> <span class="nb">int</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the total number of full volumes in the experiment.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.n_head_frames" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">n_head_frames</span><span class="p">:</span> <span class="nb">int</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the number of frames in the first partial volume,
or 0 if there is no partial volume at the beginning.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.n_tail_frames" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">n_tail_frames</span><span class="p">:</span> <span class="nb">int</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the number of frames in the last partial volume,
or 0 if there is no partial volume at the end.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.n_volumes" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">n_volumes</span><span class="p">:</span> <span class="nb">int</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the total number of volumes in the experiment.
This might include partial volumes at the beginning of the experiment (ID: -1)
and at the end of the experiment (ID : -2).</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.starting_slice" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">starting_slice</span><span class="p">:</span> <span class="nb">int</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the number of the first slice in the experiment.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h3 id="src.vodex.experiment.Experiment.volumes" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">volumes</span><span class="p">:</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the list of volume IDs in the experiment.
This might include partial volumes at the beginning of the experiment (ID: -1)
and at the end of the experiment (ID : -2).</p>
  </div>

</div>




<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">db_reader</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Initialize the experiment with the given DbReader object.</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_reader</span><span class="p">:</span> <span class="n">DbReader</span><span class="p">):</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">    Initialize the experiment with the given DbReader object.</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">db_reader</span><span class="p">,</span> <span class="n">DbReader</span><span class="p">),</span> <span class="s2">&quot;Need DbReader to initialise the Experiment&quot;</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_reader</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span class="c1"># will add the loader the first time you are loading anything</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>    <span class="c1"># in load_frames() or load_volumes()</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="p">:</span> <span class="n">ImageLoader</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.add_annotations" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_annotations</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Adds annotations to existing experiment.
Does NOT save the changes to disc! run self.save() to save.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>annotations</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.annotation.Annotation" href="../annotation/#src.vodex.annotation.Annotation">Annotation</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of annotations to add to the database.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-290" name="__codelineno-0-290"></a><span class="k">def</span> <span class="nf">add_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Annotation</span><span class="p">]):</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><span class="sd">    Adds annotations to existing experiment.</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><span class="sd">    Does NOT save the changes to disc! run self.save() to save.</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="sd">        annotations: a list of annotations to add to the database.</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>    <span class="n">DbWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span><span class="o">.</span><span class="n">add_annotations</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.add_annotations_from_df" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_annotations_from_df</span><span class="p">(</span><span class="n">annotation_df</span><span class="p">,</span> <span class="n">cycles</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timing_conversion</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Adds annotations to existing experiment from a data frame.
Does NOT save the changes to disc! run self.save() to save.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>annotation_df</code></td>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dataframe with the annotation information</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cycles</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>[str], bool]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of the annotation names that are cycles or a boolean.
If False, all annotations are assumed to be timelines.
If True, all annotations are assumed to be cycles.
Specified as {'cycles': }</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>timing_conversion</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary to convert the timing of the annotation.
For example, if you want to convert the timing from frames to seconds,
and you were recording at 30 frames per second, you can use
timing_conversion = {'frames': 1, 'seconds': 1/30}
You can list multiple units in the dictionary, and the timing will be converted to all of them,
for example if there are also 10 frames per volume, you can use:
timing_conversion = {'frames': 1, 'seconds': 1/30, 'volumes': 1/10}
You must include 'frames' in the dictionary! The value of frames does not have to be 1,
but it must be consistent with the other units. the rest of the values.
for example this is valid for the example above:
timing_conversion = {'frames': 10, 'seconds': 1/3, 'volumes': 1}.
If timing_conversion is None, then the timing is not converted
and 'duration_frames' must be provided in the dataframe.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>groups</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the group of the annotation if there are multiple groups in the dataframe.
If None, all groups are added.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>info</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>additional information about the annotation, dictionary with keys:
'annotation name': information</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="k">def</span> <span class="nf">add_annotations_from_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>                            <span class="n">cycles</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>                            <span class="n">timing_conversion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>                            <span class="n">groups</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>                            <span class="n">info</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">    Adds annotations to existing experiment from a data frame.</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">    Does NOT save the changes to disc! run self.save() to save.</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="sd">        annotation_df: a dataframe with the annotation information</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">        cycles: a list of the annotation names that are cycles or a boolean.</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">            If False, all annotations are assumed to be timelines.</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">            If True, all annotations are assumed to be cycles.</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">            Specified as {&#39;cycles&#39;: }</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="sd">        timing_conversion: a dictionary to convert the timing of the annotation.</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="sd">            For example, if you want to convert the timing from frames to seconds,</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="sd">            and you were recording at 30 frames per second, you can use</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30}</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="sd">            You can list multiple units in the dictionary, and the timing will be converted to all of them,</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><span class="sd">            for example if there are also 10 frames per volume, you can use:</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 1, &#39;seconds&#39;: 1/30, &#39;volumes&#39;: 1/10}</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a><span class="sd">            You must include &#39;frames&#39; in the dictionary! The value of frames does not have to be 1,</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">            but it must be consistent with the other units. the rest of the values.</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">            for example this is valid for the example above:</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="sd">            timing_conversion = {&#39;frames&#39;: 10, &#39;seconds&#39;: 1/3, &#39;volumes&#39;: 1}.</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a><span class="sd">            If timing_conversion is None, then the timing is not converted</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a><span class="sd">            and &#39;duration_frames&#39; must be provided in the dataframe.</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a><span class="sd">        groups: the group of the annotation if there are multiple groups in the dataframe.</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="sd">            If None, all groups are added.</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="sd">        info: additional information about the annotation, dictionary with keys:</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="sd">            &#39;annotation name&#39;: information</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>    <span class="n">n_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_n_frames</span><span class="p">()</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>    <span class="k">if</span> <span class="n">groups</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>        <span class="n">groups</span> <span class="o">=</span> <span class="n">annotation_df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>    <span class="n">annotations</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>        <span class="n">group_df</span> <span class="o">=</span> <span class="n">annotation_df</span><span class="p">[</span><span class="n">annotation_df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span><span class="p">]</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>        <span class="k">if</span> <span class="n">cycles</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">cycles</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">cycles</span><span class="p">):</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>            <span class="n">is_cycle</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>            <span class="n">is_cycle</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>        <span class="k">if</span> <span class="n">info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>            <span class="n">group_info</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="n">group</span><span class="p">]</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>            <span class="n">group_info</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>        <span class="n">annotations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Annotation</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">group_df</span><span class="p">,</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>                                              <span class="n">timing_conversion</span><span class="p">,</span> <span class="n">is_cycle</span><span class="p">,</span> <span class="n">group_info</span><span class="p">))</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">add_annotations</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.add_annotations_from_volume_annotation_df" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_annotations_from_volume_annotation_df</span><span class="p">(</span><span class="n">volume_annotation_df</span><span class="p">,</span> <span class="n">annotation_names</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Add annotations from volume_annotation dataframe to the experiment.
Use it if you have cropped the volumes from the original movie and
want to add the annotations to the cropped movie.
The format of the dataframe should be the same as the one returned by get_volume_annotation_df.
The length of the volumes should be the same as the length of the experiment.
Will only work for annotation types that are constant for the whole volume. If you have annotations that change
within the volume, you will need to exclude them.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>volume_annotation_df</code></td>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the dataframe with the annotations.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>annotation_names</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the names of the annotations to add. These must be the column names in the table.
If None, will add all the annotations in the table and will
assume that all the columns in the dataframe that are not "volumes" are the annotation names.
! If you have modified the table to add additional columns that are NOT annotations,
you must specify the annotation names,
otherwise vodex will attempt to add those columns as annotations!</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-557" name="__codelineno-0-557"></a><span class="k">def</span> <span class="nf">add_annotations_from_volume_annotation_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volume_annotation_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>                                              <span class="n">annotation_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a><span class="sd">    Add annotations from volume_annotation dataframe to the experiment.</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="sd">    Use it if you have cropped the volumes from the original movie and</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="sd">    want to add the annotations to the cropped movie.</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a><span class="sd">    The format of the dataframe should be the same as the one returned by get_volume_annotation_df.</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a><span class="sd">    The length of the volumes should be the same as the length of the experiment.</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a><span class="sd">    Will only work for annotation types that are constant for the whole volume. If you have annotations that change</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a><span class="sd">    within the volume, you will need to exclude them.</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a><span class="sd">        volume_annotation_df: the dataframe with the annotations.</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a><span class="sd">        annotation_names: the names of the annotations to add. These must be the column names in the table.</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a><span class="sd">            If None, will add all the annotations in the table and will</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a><span class="sd">            assume that all the columns in the dataframe that are not &quot;volumes&quot; are the annotation names.</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a><span class="sd">            ! If you have modified the table to add additional columns that are NOT annotations,</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="sd">            you must specify the annotation names,</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a><span class="sd">            otherwise vodex will attempt to add those columns as annotations!</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>    <span class="c1"># make a copy of the dataframe to avoid modifying the original</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>    <span class="n">volume_annotation_df</span> <span class="o">=</span> <span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>    <span class="c1"># get the columns in the dataframe that are not &quot;</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>    <span class="k">if</span> <span class="n">annotation_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>        <span class="n">annotation_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>        <span class="n">annotation_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;volumes&quot;</span><span class="p">)</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>    <span class="c1"># add duration column to the dataframe</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>    <span class="n">volume_annotation_df</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames_per_volume</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>    <span class="c1"># get index of the volume -1 (head)</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>    <span class="n">head_volume</span> <span class="o">=</span> <span class="n">volume_annotation_df</span><span class="p">[</span><span class="n">volume_annotation_df</span><span class="p">[</span><span class="s2">&quot;volumes&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>    <span class="c1"># get index of the volume -2 (tail)</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>    <span class="n">tail_volume</span> <span class="o">=</span> <span class="n">volume_annotation_df</span><span class="p">[</span><span class="n">volume_annotation_df</span><span class="p">[</span><span class="s2">&quot;volumes&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>    <span class="c1"># set the duration for partial volumes</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">head_volume</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>        <span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">head_volume</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_head_frames</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>        <span class="c1"># assign the row to the beginning of the dataframe</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>        <span class="n">volume_annotation_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">head_volume</span><span class="p">],</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>                                          <span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">head_volume</span><span class="p">)])</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tail_volume</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>        <span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">tail_volume</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_tail_frames</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>        <span class="c1"># assign the row to the end of the dataframe</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>        <span class="n">volume_annotation_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">tail_volume</span><span class="p">),</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a>                                          <span class="n">volume_annotation_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">tail_volume</span><span class="p">]])</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>    <span class="c1"># add the annotations to the experiment</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a>    <span class="k">for</span> <span class="n">annotation_name</span> <span class="ow">in</span> <span class="n">annotation_names</span><span class="p">:</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>        <span class="c1"># get the labels for the annotation</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a>        <span class="n">annotation_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;group&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">annotation_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">volume_annotation_df</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>                                      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">volume_annotation_df</span><span class="p">[</span><span class="n">annotation_name</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a>                                      <span class="s2">&quot;duration_frames&quot;</span><span class="p">:</span> <span class="n">volume_annotation_df</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">})</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a>        <span class="c1"># add the annotation</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">add_annotations_from_df</span><span class="p">(</span><span class="n">annotation_df</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.batch_volumes" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">batch_volumes</span><span class="p">(</span><span class="n">batch_size</span><span class="p">,</span> <span class="n">overlap</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">volumes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">full_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a list of volume IDs that can be used to load batches of volumes.
The batch size is given in number of volumes, and the overlap is given in number of volumes.
If full_only is True, only full volumes are returned.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>batch_size</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the number of volumes in each batch.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>overlap</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the number of volumes that overlap between batches.</p>
            </div>
          </td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>volumes</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="numpy.NDArray">NDArray</span>, <span title="typing.List">List</span>[int]]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the list of volumes to be batched.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>full_only</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if True, only full volumes are returned. If volumes is not None, this argument is ignored.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<span title="typing.List">List</span>[int]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of lists (n_batches x batch_size) of volume IDs that can be used to load batches of volumes.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="k">def</span> <span class="nf">batch_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">overlap</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>                  <span class="n">volumes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>                  <span class="n">full_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">    Returns a list of volume IDs that can be used to load batches of volumes.</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="sd">    The batch size is given in number of volumes, and the overlap is given in number of volumes.</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">    If full_only is True, only full volumes are returned.</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">        batch_size: the number of volumes in each batch.</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">        overlap: the number of volumes that overlap between batches.</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">        volumes: the list of volumes to be batched.</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">        full_only: if True, only full volumes are returned. If volumes is not None, this argument is ignored.</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">        A list of lists (n_batches x batch_size) of volume IDs that can be used to load batches of volumes.</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span class="k">if</span> <span class="n">overlap</span> <span class="o">&gt;=</span> <span class="n">batch_size</span><span class="p">:</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Overlap must be smaller than batch size.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>    <span class="k">if</span> <span class="n">volumes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>        <span class="n">volume_list</span> <span class="o">=</span> <span class="n">volumes</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>        <span class="k">if</span> <span class="n">full_only</span><span class="p">:</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>            <span class="n">volume_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>            <span class="n">volume_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">volumes</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>    <span class="c1"># turn into a list if numpy array</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">volume_list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>        <span class="n">volume_list</span> <span class="o">=</span> <span class="n">volume_list</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>    <span class="n">batch_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">volume_list</span><span class="p">),</span> <span class="n">batch_size</span> <span class="o">-</span> <span class="n">overlap</span><span class="p">):</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>        <span class="n">batch_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">volume_list</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="n">batch_size</span><span class="p">])</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>    <span class="k">return</span> <span class="n">batch_list</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.choose_frames" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">choose_frames</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">logic</span><span class="o">=</span><span class="s1">&#39;and&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Selects the frames that correspond to specified conditions;
Uses "or" or "and" between the conditions depending on logic.
To load the selected frames, use load_frames().</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>conditions</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[tuple, <span title="typing.List">List</span>[<span title="typing.Tuple">Tuple</span>[str, str]]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of conditions on the annotation labels
in a form [(group, name),(group, name), ...] where group is a string for the annotation type
and name is the name of the label of that annotation type. For example [('light', 'on'), ('shape','c')]</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>logic</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>"and" or "or" , default is "and".</p>
            </div>
          </td>
          <td>
                <code>&#39;and&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    list of frame ids that were chosen. Remember that frame numbers start at 1.</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="k">def</span> <span class="nf">choose_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditions</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]],</span> <span class="n">logic</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;and&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">    Selects the frames that correspond to specified conditions;</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="sd">    Uses &quot;or&quot; or &quot;and&quot; between the conditions depending on logic.</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">    To load the selected frames, use load_frames().</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">        conditions: a list of conditions on the annotation labels</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a><span class="sd">            in a form [(group, name),(group, name), ...] where group is a string for the annotation type</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a><span class="sd">            and name is the name of the label of that annotation type. For example [(&#39;light&#39;, &#39;on&#39;), (&#39;shape&#39;,&#39;c&#39;)]</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="sd">        logic: &quot;and&quot; or &quot;or&quot; , default is &quot;and&quot;.</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="sd">        list of frame ids that were chosen. Remember that frame numbers start at 1.</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>    <span class="k">assert</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;and&quot;</span> <span class="ow">or</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;or&quot;</span><span class="p">,</span> \
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>        <span class="s1">&#39;between_group_logic should be equal to &quot;and&quot; or &quot;or&quot;&#39;</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>    <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>    <span class="k">if</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;and&quot;</span><span class="p">:</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>        <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_and_frames_per_annotations</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>    <span class="k">elif</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;or&quot;</span><span class="p">:</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>        <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_or_frames_per_annotations</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>    <span class="k">return</span> <span class="n">frames</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.choose_volumes" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">choose_volumes</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">logic</span><span class="o">=</span><span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Selects only full volumes that correspond to specified conditions;
Uses "or" or "and" between the conditions depending on logic.
To load the selected volumes, use load_volumes()</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>verbose</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to print the information about how many frames were choose/ dropped</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>conditions</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[tuple, <span title="typing.List">List</span>[<span title="typing.Tuple">Tuple</span>[str, str]]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of conditions on the annotation labels
in a form [(group, name),(group, name), ...] where group is a string for the annotation type
and name is the name of the label of that annotation type.
For example [('light', 'on'), ('shape','c')]</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>logic</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>"and" or "or" , default is "and".</p>
            </div>
          </td>
          <td>
                <code>&#39;and&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    list of volumes that were chosen.
    Remember that frame numbers start at 1, but volumes start at 0.</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="k">def</span> <span class="nf">choose_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditions</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]],</span> <span class="n">logic</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>                   <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">    Selects only full volumes that correspond to specified conditions;</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="sd">    Uses &quot;or&quot; or &quot;and&quot; between the conditions depending on logic.</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">    To load the selected volumes, use load_volumes()</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="sd">        verbose: Whether to print the information about how many frames were choose/ dropped</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">        conditions: a list of conditions on the annotation labels</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><span class="sd">            in a form [(group, name),(group, name), ...] where group is a string for the annotation type</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><span class="sd">            and name is the name of the label of that annotation type.</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a><span class="sd">            For example [(&#39;light&#39;, &#39;on&#39;), (&#39;shape&#39;,&#39;c&#39;)]</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a><span class="sd">        logic: &quot;and&quot; or &quot;or&quot; , default is &quot;and&quot;.</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="sd">        list of volumes that were chosen.</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><span class="sd">        Remember that frame numbers start at 1, but volumes start at 0.</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>    <span class="c1"># TODO : make all indices start at 1 ?</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;conditions must be a list or a tuple,&quot;</span> \
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>                                                                          <span class="sa">f</span><span class="s2">&quot; but got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="si">}</span><span class="s2"> instead&quot;</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>        <span class="n">conditions</span> <span class="o">=</span> <span class="p">[</span><span class="n">conditions</span><span class="p">]</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>    <span class="c1"># get all the frames that correspond to the conditions</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>    <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">choose_frames</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">logic</span><span class="o">=</span><span class="n">logic</span><span class="p">)</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>    <span class="n">n_frames</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>    <span class="c1"># leave only such frames that correspond to full volumes</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>    <span class="c1"># TODO : not necessary to return the frames?</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>    <span class="n">volumes</span><span class="p">,</span> <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">choose_full_volumes</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>    <span class="n">n_dropped</span> <span class="o">=</span> <span class="n">n_frames</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Choosing only full volumes. &quot;</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>              <span class="sa">f</span><span class="s2">&quot;Dropped </span><span class="si">{</span><span class="n">n_dropped</span><span class="si">}</span><span class="s2"> frames, kept </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>    <span class="k">return</span> <span class="n">volumes</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.close" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">close</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Close database connection.</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a><span class="sd">    Close database connection.</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.create" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">create</span><span class="p">(</span><span class="n">volume_manager</span><span class="p">,</span> <span class="n">annotations</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates a database instance from the core classes and initialises the experiment.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>volume_manager</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.VolumeManager" href="../core/#src.vodex.core.VolumeManager">VolumeManager</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>VolumeManager object that summarises the information about the image data.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>annotations</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.annotation.Annotation" href="../annotation/#src.vodex.annotation.Annotation">Annotation</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>list of annotations to add to the experiment descriptions.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>verbose</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>whether to print the information about Filemanager, VolumeManager and Annotations on the screen.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.experiment.Experiment" href="#src.vodex.experiment.Experiment">Experiment</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>initialised experiment.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">volume_manager</span><span class="p">:</span> <span class="n">VolumeManager</span><span class="p">,</span> <span class="n">annotations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Annotation</span><span class="p">],</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">    Creates a database instance from the core classes and initialises the experiment.</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="sd">        volume_manager: VolumeManager object that summarises the information about the image data.</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="sd">        annotations: list of annotations to add to the experiment descriptions.</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="sd">        verbose: whether to print the information about Filemanager, VolumeManager and Annotations on the screen.</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="sd">        (Experiment): initialised experiment.</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">volume_manager</span><span class="o">.</span><span class="n">file_manager</span><span class="p">)</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">volume_manager</span><span class="p">)</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>        <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">annotations</span><span class="p">:</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>            <span class="nb">print</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>            <span class="k">if</span> <span class="n">annotation</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>                <span class="nb">print</span><span class="p">(</span><span class="n">annotation</span><span class="o">.</span><span class="n">cycle_info</span><span class="p">())</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>    <span class="n">db</span> <span class="o">=</span> <span class="n">DbWriter</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>    <span class="n">db</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span><span class="n">volumes</span><span class="o">=</span><span class="n">volume_manager</span><span class="p">,</span> <span class="n">annotations</span><span class="o">=</span><span class="n">annotations</span><span class="p">)</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span class="n">db_reader</span> <span class="o">=</span> <span class="n">DbReader</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">db_reader</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.delete_annotations" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">delete_annotations</span><span class="p">(</span><span class="n">annotation_names</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Deletes annotations from existing experiment.
Does NOT save the changes to disc! run self.save() to save.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>annotation_names</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of annotation names to delete from the database.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-357" name="__codelineno-0-357"></a><span class="k">def</span> <span class="nf">delete_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a><span class="sd">    Deletes annotations from existing experiment.</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="sd">    Does NOT save the changes to disc! run self.save() to save.</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a><span class="sd">        annotation_names: a list of annotation names to delete from the database.</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">annotation_names</span><span class="p">:</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>        <span class="n">DbWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span><span class="o">.</span><span class="n">delete_annotation</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.from_dir" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_dir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">,</span> <span class="n">frames_per_volume</span><span class="p">,</span> <span class="n">starting_slice</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates a database instance from a directory and initialises the experiment.
The directory should contain the image files.
Annotations are not initialised, but can be added later.</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-268" name="__codelineno-0-268"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a><span class="k">def</span> <span class="nf">from_dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">frames_per_volume</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>             <span class="n">starting_slice</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="sd">    Creates a database instance from a directory and initialises the experiment.</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">    The directory should contain the image files.</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a><span class="sd">    Annotations are not initialised, but can be added later.</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>    <span class="c1"># initialise volume manager</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>    <span class="n">volume_manager</span> <span class="o">=</span> <span class="n">VolumeManager</span><span class="o">.</span><span class="n">from_dir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">,</span> <span class="n">frames_per_volume</span><span class="p">,</span> <span class="n">fgf</span><span class="o">=</span><span class="n">starting_slice</span><span class="p">)</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">volume_manager</span><span class="p">,</span> <span class="p">[],</span> <span class="n">verbose</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.get_volume_annotation_df" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_volume_annotation_df</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">annotation_names</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get annotations for volumes.
Will get the labels for the specified full volumes from each available annotation as pandas dataframe.
Args:
    volumes: the indexes of volumes to get annotation for. If a multidimensional array is passed,
        will flatten it and get annotations for all the volumes in it.
    annotation_names: the names of the annotations to get. If None, will get all the annotations.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dataframe with the annotations for each annotation type.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The columns are volumes and the annotation types with the corresponding labels for each volume.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-539" name="__codelineno-0-539"></a><span class="k">def</span> <span class="nf">get_volume_annotation_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volumes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a>                             <span class="n">annotation_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="sd">    Get annotations for volumes.</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">    Will get the labels for the specified full volumes from each available annotation as pandas dataframe.</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">        volumes: the indexes of volumes to get annotation for. If a multidimensional array is passed,</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">            will flatten it and get annotations for all the volumes in it.</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="sd">        annotation_names: the names of the annotations to get. If None, will get all the annotations.</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a><span class="sd">        a dataframe with the annotations for each annotation type.</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a><span class="sd">        The columns are volumes and the annotation types with the corresponding labels for each volume.</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>    <span class="c1"># get annotations for the volumes</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a>    <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume_annotations</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">annotation_names</span><span class="o">=</span><span class="n">annotation_names</span><span class="p">)</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a>    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.get_volume_annotations" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_volume_annotations</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">annotation_names</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get annotations for volumes.
Will get the labels for the specified full volumes from each available annotation.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>volumes</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="numpy.NDArray">NDArray</span>, <span title="typing.List">List</span>[int]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the indexes of volumes to get annotation for. If a multidimensional array is passed,
will flatten it and get annotations for all the volumes in it.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>annotation_names</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the names of the annotations to get. If None, will get all the annotations.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary with the annotations for each annotation type.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The keys are the annotation types, the values are lists of labels for each volume.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The last key is "volumes" and the value is a list of volumes.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="k">def</span> <span class="nf">get_volume_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volumes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>                           <span class="n">annotation_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="sd">    Get annotations for volumes.</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a><span class="sd">    Will get the labels for the specified full volumes from each available annotation.</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">        volumes: the indexes of volumes to get annotation for. If a multidimensional array is passed,</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="sd">            will flatten it and get annotations for all the volumes in it.</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="sd">        annotation_names: the names of the annotations to get. If None, will get all the annotations.</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a><span class="sd">        a dictionary with the annotations for each annotation type.</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a><span class="sd">        The keys are the annotation types, the values are lists of labels for each volume.</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="sd">        The last key is &quot;volumes&quot; and the value is a list of volumes.</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>    <span class="c1"># TODO: throw a warning if some volumes are not in the database</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a>    <span class="c1"># if array convert to list of int</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>        <span class="c1"># turn into a 1D array</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>        <span class="n">volumes</span> <span class="o">=</span> <span class="n">volumes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a>        <span class="c1"># make sure all the volumes can be safely converted to integers</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>        <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">volumes</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">==</span> <span class="n">volumes</span><span class="p">),</span> <span class="s2">&quot;All the volumes must be integers&quot;</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a>        <span class="n">volumes</span> <span class="o">=</span> <span class="n">volumes</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a>    <span class="c1"># get annotations for the volumes</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>    <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_volume_annotations</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">annotation_names</span><span class="o">=</span><span class="n">annotation_names</span><span class="p">)</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>    <span class="c1"># prepare dict for the annotations</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a>    <span class="n">annotation</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">annotations</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>    <span class="n">annotation</span><span class="p">[</span><span class="s2">&quot;volumes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>    <span class="c1"># get a single label per volume</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a>    <span class="k">for</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">volumes</span><span class="p">:</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>        <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">annotations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>            <span class="n">volume_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;volume_ids&quot;</span><span class="p">])</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>            <span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">])</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>            <span class="c1"># check that the volume has the same labels</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>            <span class="n">labels_per_volume</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">volume_ids</span> <span class="o">==</span> <span class="n">volume</span><span class="p">])</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels_per_volume</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Volume </span><span class="si">{</span><span class="n">volume</span><span class="si">}</span><span class="s2"> has different labels (</span><span class="si">{</span><span class="n">labels_per_volume</span><span class="si">}</span><span class="s2">) &quot;</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>                                 <span class="sa">f</span><span class="s2">&quot;for the same annotation </span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s2">. Can&#39;t assign a single label to the volume.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>            <span class="c1"># add the label to the dict</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>            <span class="n">annotation</span><span class="p">[</span><span class="n">group</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">labels_per_volume</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>        <span class="c1"># add the volume to the dict</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>        <span class="n">annotation</span><span class="p">[</span><span class="s2">&quot;volumes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">volume</span><span class="p">)</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>    <span class="k">return</span> <span class="n">annotation</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.list_conditions_per_cycle" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">list_conditions_per_cycle</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">,</span> <span class="n">as_volumes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a list of conditions per cycle.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>annotation_type</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the annotation for which to get the conditions list</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>as_volumes</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>weather to return conditions per frame (default) or per volume.
If as_volumes is true, it is expected that the conditions are not changing in the middle of the volume.
Will throw an error if it happens.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    list of the condition ids ( condition per frame or per volume) and corresponding condition names.</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-679" name="__codelineno-0-679"></a><span class="k">def</span> <span class="nf">list_conditions_per_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">as_volumes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a><span class="sd">    Returns a list of conditions per cycle.</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="sd">        annotation_type: The name of the annotation for which to get the conditions list</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">        as_volumes: weather to return conditions per frame (default) or per volume.</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="sd">            If as_volumes is true, it is expected that the conditions are not changing in the middle of the volume.</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a><span class="sd">            Will throw an error if it happens.</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">        list of the condition ids ( condition per frame or per volume) and corresponding condition names.</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>    <span class="c1"># TODO : check if empty</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a>    <span class="k">if</span> <span class="n">as_volumes</span><span class="p">:</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a>        <span class="n">_</span><span class="p">,</span> <span class="n">condition_ids</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_conditionIds_per_cycle_per_volumes</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>        <span class="n">fpv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_fpv</span><span class="p">()</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>        <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">==</span> <span class="n">fpv</span><span class="p">),</span> <span class="s2">&quot;Can&#39;t list_conditions_per_cycle with as_volumes=True: &quot;</span> \
<a id="__codelineno-0-697" name="__codelineno-0-697"></a>                                               <span class="s2">&quot;some conditions don&#39;t cover the whole volume.&quot;</span> \
<a id="__codelineno-0-698" name="__codelineno-0-698"></a>                                               <span class="s2">&quot;You might want to get conditions per frame,&quot;</span> \
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>                                               <span class="s2">&quot; by setting as_volumes=False&quot;</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a>        <span class="n">_</span><span class="p">,</span> <span class="n">condition_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_conditionIds_per_cycle_per_frame</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>    <span class="n">names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">_get_Names_from_AnnotationTypeLabels</span><span class="p">()</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a>    <span class="k">return</span> <span class="n">condition_ids</span><span class="p">,</span> <span class="n">names</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.list_cycle_iterations" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">list_cycle_iterations</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">,</span> <span class="n">as_volumes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a list of cycle iterations for a specified annotation.
The annotation must have been initialised from a cycle.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>annotation_type</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the annotation for which to get the cycle iteratoins list</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>as_volumes</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>weather to return cycle iteratoins per frame ( default) or per volume.
If as_volumes is true, it is expected that the cycle iteratoins are not changing in the middle of the volume.
Will throw an error if it happens.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>as_volumes</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>bool</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    list of the condition ids (cycle iterations per frame or per volume)</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span>
<span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-706" name="__codelineno-0-706"></a><span class="k">def</span> <span class="nf">list_cycle_iterations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">as_volumes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a><span class="sd">    Returns a list of cycle iterations for a specified annotation.</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a><span class="sd">    The annotation must have been initialised from a cycle.</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a><span class="sd">        annotation_type: The name of the annotation for which to get the cycle iteratoins list</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a><span class="sd">        as_volumes: weather to return cycle iteratoins per frame ( default) or per volume.</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a><span class="sd">            If as_volumes is true, it is expected that the cycle iteratoins are not changing in the middle of the volume.</span>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a><span class="sd">            Will throw an error if it happens.</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="sd">        as_volumes: bool</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="sd">        list of the condition ids (cycle iterations per frame or per volume)</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a>    <span class="k">if</span> <span class="n">as_volumes</span><span class="p">:</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a>        <span class="n">_</span><span class="p">,</span> <span class="n">cycle_its</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_cycleIterations_per_volumes</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>        <span class="n">fpv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_fpv</span><span class="p">()</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a>        <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">==</span> <span class="n">fpv</span><span class="p">),</span> <span class="s2">&quot;Can&#39;t list_cycle_iterations with as_volumes=True: &quot;</span> \
<a id="__codelineno-0-725" name="__codelineno-0-725"></a>                                               <span class="s2">&quot;some iterations don&#39;t cover the whole volume.&quot;</span> \
<a id="__codelineno-0-726" name="__codelineno-0-726"></a>                                               <span class="s2">&quot;You might want to get iterations per frame,&quot;</span> \
<a id="__codelineno-0-727" name="__codelineno-0-727"></a>                                               <span class="s2">&quot; by setting as_volumes=False&quot;</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>        <span class="n">_</span><span class="p">,</span> <span class="n">cycle_its</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_cycleIterations_per_frame</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>    <span class="k">return</span> <span class="n">cycle_its</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.list_volumes" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">list_volumes</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a list of all the volumes IDs in the experiment.
If partial volumes are present: for "head" returns -1, for "tail" returns -2.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="numpy.NDArray">NDArray</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>list of volume IDs</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-666" name="__codelineno-0-666"></a><span class="k">def</span> <span class="nf">list_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a><span class="sd">    Returns a list of all the volumes IDs in the experiment.</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a><span class="sd">    If partial volumes are present: for &quot;head&quot; returns -1, for &quot;tail&quot; returns -2.</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a><span class="sd">        list of volume IDs</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>    <span class="c1"># TODO : Remove this function and use volumes property instead</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;list_volumes will be removed in vodex 1.1.0 use volumes property instead.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">volumes</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.load" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">load</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Loads a database from a file and initialises an Experiment.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_name</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="pathlib.Path">Path</span>, str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>full path to a file to database.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Return:
    (Experiment): initialised experiment.</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a><span class="sd">    Loads a database from a file and initialises an Experiment.</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">        file_name: full path to a file to database.</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="sd">    Return:</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="sd">        (Experiment): initialised experiment.</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>    <span class="n">db_reader</span> <span class="o">=</span> <span class="n">DbReader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">db_reader</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.load_slices" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">load_slices</span><span class="p">(</span><span class="n">slices</span><span class="p">,</span> <span class="n">volumes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">skip_missing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Load volumes. Will load the specified full volumes.
All the returned volumes or slices should have the same number of frames in them.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>slices</code></td>
          <td>
                <code><span title="typing.List">List</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the indexes of slices in the volumes to load.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>volumes</code></td>
          <td>
                <code><span title="typing.List">List</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the indexes of volumes to load slices for. If None, will load slices for all volumes.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>skip_missing</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to skip missing volumes.
If False, will raise an error if a slice is missing for any volume.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>verbose</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to print the information about the loading</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    4D array with the loaded slices for selected volumes. TZYX order.</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="k">def</span> <span class="nf">load_slices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">volumes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a>                <span class="n">skip_missing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">:</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">    Load volumes. Will load the specified full volumes.</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a><span class="sd">    All the returned volumes or slices should have the same number of frames in them.</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="sd">        slices: the indexes of slices in the volumes to load.</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="sd">        volumes: the indexes of volumes to load slices for. If None, will load slices for all volumes.</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="sd">        skip_missing: Whether to skip missing volumes.</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="sd">            If False, will raise an error if a slice is missing for any volume.</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="sd">        verbose: Whether to print the information about the loading</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a><span class="sd">        4D array with the loaded slices for selected volumes. TZYX order.</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>    <span class="k">if</span> <span class="n">volumes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>        <span class="n">volumes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_volume_list</span><span class="p">()</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>    <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_frames_per_volumes</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">slices</span><span class="o">=</span><span class="n">slices</span><span class="p">)</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>    <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">prepare_frames_for_loading</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>    <span class="c1"># unpack and load</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>    <span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">,</span> <span class="n">file_ids</span><span class="p">,</span> <span class="n">frame_in_file</span><span class="p">,</span> <span class="n">volumes_per_frame</span> <span class="o">=</span> <span class="n">info</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>    <span class="c1"># get unique volumes and check that they are the same as the ones we asked for</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>    <span class="k">if</span> <span class="n">skip_missing</span><span class="p">:</span>  <span class="c1"># throw a warning</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a>        <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">):</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Requested volumes </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">))</span><span class="si">}</span><span class="s2"> &quot;</span> <span class="o">+</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>                          <span class="sa">f</span><span class="s2">&quot;are not present in the slices </span><span class="si">{</span><span class="n">slices</span><span class="si">}</span><span class="s2">. &quot;</span> <span class="o">+</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a>                          <span class="sa">f</span><span class="s2">&quot;Loaded slices for </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">)</span><span class="si">}</span><span class="s2"> volumes.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>    <span class="k">else</span><span class="p">:</span>  <span class="c1"># throw an error</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a>        <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">),</span> \
<a id="__codelineno-0-645" name="__codelineno-0-645"></a>            <span class="sa">f</span><span class="s2">&quot;Requested volumes </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">))</span><span class="si">}</span><span class="s2"> &quot;</span> \
<a id="__codelineno-0-646" name="__codelineno-0-646"></a>            <span class="sa">f</span><span class="s2">&quot;are not present in the slices </span><span class="si">{</span><span class="n">slices</span><span class="si">}</span><span class="s2">. &quot;</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a>    <span class="c1"># make full paths to files ( remember file ids start with 1 )</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a>    <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="n">file_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">file_id</span> <span class="ow">in</span> <span class="n">file_ids</span><span class="p">]</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;loader&quot;</span><span class="p">):</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="o">=</span> <span class="n">ImageLoader</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a>    <span class="n">volumes_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_volumes</span><span class="p">(</span><span class="n">frame_in_file</span><span class="p">,</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a>                                           <span class="n">files</span><span class="p">,</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a>                                           <span class="n">volumes_per_frame</span><span class="p">,</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a>                                           <span class="n">show_file_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a>                                           <span class="n">show_progress</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>    <span class="c1"># if the z dimension is smaller than the number of slices, throw a warning</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>    <span class="k">if</span> <span class="n">volumes_img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">slices</span><span class="p">):</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Some of the requested slices </span><span class="si">{</span><span class="n">slices</span><span class="si">}</span><span class="s2"> are not present in the volumes. &quot;</span> <span class="o">+</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>                      <span class="sa">f</span><span class="s2">&quot;Loaded </span><span class="si">{</span><span class="n">volumes_img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> slices instead of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">slices</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>    <span class="k">return</span> <span class="n">volumes_img</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.load_volumes" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">load_volumes</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Load volumes. Will load the specified full volumes.
All the returned volumes or slices should have the same number of frames in them.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>volumes</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="numpy.NDArray">NDArray</span>, <span title="typing.List">List</span>[int]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the indexes of volumes to load.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>verbose</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to print the information about the loading</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    4D array with the loaded volumes. TZYX order.</p>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-449" name="__codelineno-0-449"></a><span class="k">def</span> <span class="nf">load_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volumes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">npt</span><span class="o">.</span><span class="n">NDArray</span><span class="p">:</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a><span class="sd">    Load volumes. Will load the specified full volumes.</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a><span class="sd">    All the returned volumes or slices should have the same number of frames in them.</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><span class="sd">        volumes: the indexes of volumes to load.</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><span class="sd">        verbose: Whether to print the information about the loading</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><span class="sd">        4D array with the loaded volumes. TZYX order.</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>    <span class="c1"># if array convert to list of int</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>        <span class="c1"># make sure it is a 1D array</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">volumes</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;volumes must be a 1D array&quot;</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>        <span class="c1"># make sure all the volumes can be safely converted to integers</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>        <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">volumes</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">==</span> <span class="n">volumes</span><span class="p">),</span> <span class="s2">&quot;All the volumes must be integers&quot;</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>        <span class="n">volumes</span> <span class="o">=</span> <span class="n">volumes</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>    <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_frames_per_volumes</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a>    <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">prepare_frames_for_loading</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>    <span class="c1"># unpack</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a>    <span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">,</span> <span class="n">file_ids</span><span class="p">,</span> <span class="n">frame_in_file</span><span class="p">,</span> <span class="n">volumes_per_frame</span> <span class="o">=</span> <span class="n">info</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>    <span class="c1"># get unique volumes and check that they are the same as the ones we asked for</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a>    <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">),</span> <span class="s2">&quot;Requested volumes&quot;</span> \
<a id="__codelineno-0-476" name="__codelineno-0-476"></a>                                                   <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">volumes_per_frame</span><span class="p">))</span><span class="si">}</span><span class="s2"> &quot;</span> \
<a id="__codelineno-0-477" name="__codelineno-0-477"></a>                                                   <span class="s2">&quot;can not be found&quot;</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a>    <span class="c1"># make full paths to files ( remember file ids start with 1 )</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>    <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="n">file_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">file_id</span> <span class="ow">in</span> <span class="n">file_ids</span><span class="p">]</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;loader&quot;</span><span class="p">):</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="o">=</span> <span class="n">ImageLoader</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>    <span class="n">volumes_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_volumes</span><span class="p">(</span><span class="n">frame_in_file</span><span class="p">,</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a>                                           <span class="n">files</span><span class="p">,</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>                                           <span class="n">volumes_per_frame</span><span class="p">,</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a>                                           <span class="n">show_file_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>                                           <span class="n">show_progress</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a>    <span class="k">return</span> <span class="n">volumes_img</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.vodex.experiment.Experiment.save" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">save</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Saves a database into a file.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_name</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="pathlib.Path">Path</span>, str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>full path to a file to save database.
(Usually the filename would end with .db)</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/vodex/experiment.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-280" name="__codelineno-0-280"></a><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">    Saves a database into a file.</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a><span class="sd">        file_name: full path to a file to save database.</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a><span class="sd">            (Usually the filename would end with .db)</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>    <span class="n">DbWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../loaders/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Loaders">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Loaders
              </div>
            </div>
          </a>
        
        
          
          <a href="../../examples/" class="md-footer__link md-footer__link--next" aria-label="Next: Examples">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Examples
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2023 Anna Nadtochiy
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/LemonJust" target="_blank" rel="noopener" title="LemonJust on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/in/anna-nadtochiy/" target="_blank" rel="noopener" title="LemonJust (Anna Nadtochiy) on LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.top", "navigation.instant", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "navigation.footer", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>