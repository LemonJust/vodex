<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Core - VoDEx Docs</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../assets/_mkdocstrings.css" rel="stylesheet">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">VoDEx Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../tutorials/" class="nav-link">Tutorials</a>
                            </li>
                            <li class="navitem">
                                <a href="../how-to-guides/" class="nav-link">How-To Guides</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../reference/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../loaders/" class="dropdown-item">Loaders</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Core</a>
</li>
                                    
<li>
    <a href="../dbmethods/" class="dropdown-item">DataBase methods</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../explanation/" class="nav-link">Explanation</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                            <li class="nav-item">
                                <a rel="prev" href="../loaders/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../dbmethods/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#vodexcore-module" class="nav-link">vodex.core module</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#src.vodex.core" class="nav-link">src.vodex.core</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#src.vodex.core.Annotation" class="nav-link">Annotation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#src.vodex.core.Cycle" class="nav-link">Cycle</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#src.vodex.core.FileManager" class="nav-link">FileManager</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#src.vodex.core.FrameManager" class="nav-link">FrameManager</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#src.vodex.core.Labels" class="nav-link">Labels</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#src.vodex.core.TimeLabel" class="nav-link">TimeLabel</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#src.vodex.core.Timeline" class="nav-link">Timeline</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#src.vodex.core.VolumeManager" class="nav-link">VolumeManager</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="vodexcore-module">vodex.core module</h1>


<div class="doc doc-object doc-module">


<a id="src.vodex.core"></a>
  <div class="doc doc-contents first">
  
      <p>This module contains classes to specify the information about the imaging data, about the experimental conditions
and load the data based on the specified information.</p>
<p>The module contains the following classes:</p>
<ul>
<li>
<p><code>FileManager</code> - Figures out stuff concerning the many files. For example in what order do stacks go?
    Will grab all the files with the provided file_extension
    in the provided folder and order them alphabetically.</p>
</li>
<li>
<p><code>TimeLabel</code> - Describes a particular time-located event during the experiment.
        Any specific aspect of the experiment that you want to document :
        temperature|light|sound|image on the screen|drug|behaviour ... etc.</p>
</li>
<li>
<p><code>Labels</code> - Describes a particular group of time labels.</p>
</li>
<li>
<p><code>Cycle</code> - Information about the repeated cycle of labels. Use it when you have some periodic conditions, like : light
        on , light off, light on, light off... will be made of list of labels [light_on, light_off] that repeat ...</p>
</li>
<li>
<p><code>Timeline</code> - Information about the sequence of labels. Use it when you have non-periodic conditions.</p>
</li>
<li>
<p><code>FrameManager</code> - Deals with frames. Which frames correspond to a volume / cycle/ condition.</p>
</li>
<li>
<p><code>VolumeManager</code> - Figures out how to get full volumes for certain time points.</p>
</li>
<li>
<p><code>Annotation</code> - Time annotation of the experiment.</p>
</li>
<li>
<p><code>Experiment</code> - Information about the experiment.
        Will use all the information you provided to figure out what frames to give you based on your request.</p>
</li>
</ul>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.Annotation" class="doc doc-heading">
        <code>Annotation</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Time annotation of the experiment.</p>
<p>Either frame_to_label_dict or n_frames need to be provided to infer the number of frames.
If both are provided , they need to agree.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>labels</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.Labels" href="#src.vodex.core.Labels">Labels</a></code>
          </td>
          <td><p>Labels used to build the annotation</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>info</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>a short description of the annotation</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>frame_to_label</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>what label it is for each frame</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>frame_to_cycle</code></td>
          <td>
                <code><span title="typing.List">List</span>[int]</code>
          </td>
          <td><p>what cycle it is for each frame</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>cycle</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.Cycle" href="#src.vodex.core.Cycle">Cycle</a></code>
          </td>
          <td><p>for annotation from cycles keeps the cycle</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>total number of frames, will be inferred from frame_to_label if not provided</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Annotation</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Time annotation of the experiment.</span>

<span class="sd">    Either frame_to_label_dict or n_frames need to be provided to infer the number of frames.</span>
<span class="sd">    If both are provided , they need to agree.</span>

<span class="sd">    Args:</span>
<span class="sd">        labels: Labels used to build the annotation</span>
<span class="sd">        info: a short description of the annotation</span>
<span class="sd">        frame_to_label: what label it is for each frame</span>
<span class="sd">        frame_to_cycle: what cycle it is for each frame</span>
<span class="sd">        cycle: for annotation from cycles keeps the cycle</span>
<span class="sd">        n_frames: total number of frames, will be inferred from frame_to_label if not provided</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">],</span> <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">cycle</span><span class="p">:</span> <span class="n">Cycle</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">frame_to_cycle</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="c1"># get total experiment length in frames, check that it is consistent</span>
        <span class="k">if</span> <span class="n">frame_to_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">frame_to_label</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;The number of frames in the frame_to_label,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frame_to_label</span><span class="p">)</span><span class="si">}</span><span class="s2">,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;and the number of frames provided,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n_frames</span><span class="si">}</span><span class="s2">, do not match.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">=</span> <span class="n">n_frames</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">frame_to_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="n">info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># None if the annotation is not from a cycle</span>
        <span class="k">assert</span> <span class="p">(</span><span class="n">frame_to_cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">),</span> <span class="s2">&quot;Creating Annotation: &quot;</span> \
                                                            <span class="s2">&quot;You have to provide both cycle and frame_to_cycle.&quot;</span>
        <span class="c1"># if cycle is provided , check the input and add the info</span>
        <span class="k">if</span> <span class="n">cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">frame_to_cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># check that frame_to_cycle is int</span>
            <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">frame_to_cycle</span><span class="p">),</span> <span class="s2">&quot;frame_to_cycle should be a list of int&quot;</span>
            <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">frame_to_cycle</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;The number of frames in the frame_to_cycle,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frame_to_cycle</span><span class="p">)</span><span class="si">}</span><span class="s2">,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;and the number of frames provided,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n_frames</span><span class="si">}</span><span class="s2">, do not match.&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">=</span> <span class="n">cycle</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_cycle</span> <span class="o">=</span> <span class="n">frame_to_cycle</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Annotation</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n_frames</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_label</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">labels</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">info</span>
            <span class="p">]</span>
            <span class="c1"># if one of the annotations has a cycle but the other doesn&#39;t</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">!=</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="c1"># if both have a cycle, compare cycles as well</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">is_same</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">cycle</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_cycle</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_cycle</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Annotation</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_cycle</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span> <span class="n">cycle</span><span class="p">:</span> <span class="n">Cycle</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an Annotation object from Cycle.</span>

<span class="sd">        Args:</span>
<span class="sd">            n_frames: total number of frames, must be provided</span>
<span class="sd">            labels: Labels used to build the annotation</span>
<span class="sd">            cycle: the cycle to create annotation from</span>
<span class="sd">            info: a short description of the annotation</span>
<span class="sd">        Returns:</span>
<span class="sd">            Annotation object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">fit_labels_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
        <span class="n">frame_to_cycle</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">fit_cycles_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span>
                   <span class="n">cycle</span><span class="o">=</span><span class="n">cycle</span><span class="p">,</span> <span class="n">frame_to_cycle</span><span class="o">=</span><span class="n">frame_to_cycle</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_timeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span> <span class="n">timeline</span><span class="p">:</span> <span class="n">Timeline</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an Annotation object from Timeline.</span>

<span class="sd">        Args:</span>
<span class="sd">            n_frames: total number of frames, must be provided</span>
<span class="sd">            labels: Labels used to build the annotation</span>
<span class="sd">            timeline: the timeline to create annotation from</span>
<span class="sd">            info: a short description of the annotation</span>
<span class="sd">        Returns:</span>
<span class="sd">            Annotation object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">==</span> <span class="n">timeline</span><span class="o">.</span><span class="n">full_length</span><span class="p">,</span> <span class="s2">&quot;number of frames and total timing should be the same&quot;</span>
        <span class="c1"># make a fake cycle the length of the whole recording</span>
        <span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">timeline</span><span class="o">.</span><span class="n">per_frame_list</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_timeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timeline</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transforms frame_to_label to Timeline</span>

<span class="sd">        Returns:</span>
<span class="sd">            timeline of the resulting annotation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span><span class="p">):</span>
            <span class="n">duration</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">group</span><span class="p">))</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Timeline</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cycle_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates and returns a description of a cycle.</span>

<span class="sd">        Returns:</span>
<span class="sd">            human-readable information about the cycle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cycle_info</span> <span class="o">=</span> <span class="s2">&quot;Annotation doesn&#39;t have a cycle&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cycle_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="p">)</span><span class="si">}</span><span class="s2"> full cycles&quot;</span> \
                         <span class="sa">f</span><span class="s2">&quot; [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">full_length</span><span class="si">}</span><span class="s2"> exactly]</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">cycle_info</span> <span class="o">=</span> <span class="n">cycle_info</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">cycle_info</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Annotation type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Total frames : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Annotation.cycle_info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cycle_info</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates and returns a description of a cycle.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td><p>human-readable information about the cycle.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">cycle_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates and returns a description of a cycle.</span>

<span class="sd">    Returns:</span>
<span class="sd">        human-readable information about the cycle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cycle_info</span> <span class="o">=</span> <span class="s2">&quot;Annotation doesn&#39;t have a cycle&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cycle_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="p">)</span><span class="si">}</span><span class="s2"> full cycles&quot;</span> \
                     <span class="sa">f</span><span class="s2">&quot; [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">full_length</span><span class="si">}</span><span class="s2"> exactly]</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">cycle_info</span> <span class="o">=</span> <span class="n">cycle_info</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">cycle_info</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Annotation.from_cycle" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_cycle</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates an Annotation object from Cycle.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>total number of frames, must be provided</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>labels</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.Labels" href="#src.vodex.core.Labels">Labels</a></code>
          </td>
          <td><p>Labels used to build the annotation</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cycle</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.Cycle" href="#src.vodex.core.Cycle">Cycle</a></code>
          </td>
          <td><p>the cycle to create annotation from</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>info</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>a short description of the annotation</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Annotation object</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_cycle</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span> <span class="n">cycle</span><span class="p">:</span> <span class="n">Cycle</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates an Annotation object from Cycle.</span>

<span class="sd">    Args:</span>
<span class="sd">        n_frames: total number of frames, must be provided</span>
<span class="sd">        labels: Labels used to build the annotation</span>
<span class="sd">        cycle: the cycle to create annotation from</span>
<span class="sd">        info: a short description of the annotation</span>
<span class="sd">    Returns:</span>
<span class="sd">        Annotation object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">fit_labels_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
    <span class="n">frame_to_cycle</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">fit_cycles_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span>
               <span class="n">cycle</span><span class="o">=</span><span class="n">cycle</span><span class="p">,</span> <span class="n">frame_to_cycle</span><span class="o">=</span><span class="n">frame_to_cycle</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Annotation.from_timeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_timeline</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">timeline</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates an Annotation object from Timeline.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>total number of frames, must be provided</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>labels</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.Labels" href="#src.vodex.core.Labels">Labels</a></code>
          </td>
          <td><p>Labels used to build the annotation</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>timeline</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.Timeline" href="#src.vodex.core.Timeline">Timeline</a></code>
          </td>
          <td><p>the timeline to create annotation from</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>info</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>a short description of the annotation</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Annotation object</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_timeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span> <span class="n">timeline</span><span class="p">:</span> <span class="n">Timeline</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates an Annotation object from Timeline.</span>

<span class="sd">    Args:</span>
<span class="sd">        n_frames: total number of frames, must be provided</span>
<span class="sd">        labels: Labels used to build the annotation</span>
<span class="sd">        timeline: the timeline to create annotation from</span>
<span class="sd">        info: a short description of the annotation</span>
<span class="sd">    Returns:</span>
<span class="sd">        Annotation object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">==</span> <span class="n">timeline</span><span class="o">.</span><span class="n">full_length</span><span class="p">,</span> <span class="s2">&quot;number of frames and total timing should be the same&quot;</span>
    <span class="c1"># make a fake cycle the length of the whole recording</span>
    <span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">timeline</span><span class="o">.</span><span class="n">per_frame_list</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Annotation.get_timeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_timeline</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Transforms frame_to_label to Timeline</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.Timeline" href="#src.vodex.core.Timeline">Timeline</a></code>
          </td>
          <td><p>timeline of the resulting annotation</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_timeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timeline</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transforms frame_to_label to Timeline</span>

<span class="sd">    Returns:</span>
<span class="sd">        timeline of the resulting annotation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span><span class="p">):</span>
        <span class="n">duration</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">group</span><span class="p">))</span>
        <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Timeline</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.Cycle" class="doc doc-heading">
        <code>Cycle</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Information about the repeated cycle of labels. Use it when you have some periodic conditions, like : light
on , light off, light on, light off... will be made of list of labels [light_on, light_off]
that repeat to cover the whole tie of the experiment. All labels must be from the same label group!</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>label_order</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>a list of labels in the right order in which they follow</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>duration</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="numpy">np</span>.<span title="numpy.array">array</span>, <span title="typing.List">List</span>[int]]</code>
          </td>
          <td><p>duration of the corresponding labels, in frames (based on your imaging).
Note that these are frames, not volumes !</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Cycle</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information about the repeated cycle of labels. Use it when you have some periodic conditions, like : light</span>
<span class="sd">    on , light off, light on, light off... will be made of list of labels [light_on, light_off]</span>
<span class="sd">    that repeat to cover the whole tie of the experiment. All labels must be from the same label group!</span>

<span class="sd">    Args:</span>
<span class="sd">        label_order: a list of labels in the right order in which they follow</span>
<span class="sd">        duration: duration of the corresponding labels, in frames (based on your imaging).</span>
<span class="sd">            Note that these are frames, not volumes !</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_order</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">],</span> <span class="n">duration</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]):</span>
        <span class="c1"># check that all labels are from the same group</span>
        <span class="n">label_group</span> <span class="o">=</span> <span class="n">label_order</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">group</span>
        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">label_order</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">label</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">label_group</span><span class="p">,</span> \
                <span class="sa">f</span><span class="s2">&quot;All labels should be from the same group, but got </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">group</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">label_group</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># check that timing is int</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">duration</span><span class="p">),</span> <span class="s2">&quot;timing should be a list of int&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">label_group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span> <span class="o">=</span> <span class="n">label_order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">list_of_int</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
        <span class="c1"># list the length of the cycle, each element is the TimeLabel</span>
        <span class="c1"># TODO : turn it into an index ?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_label_per_frame</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Cycle</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">label_order</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">full_length</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">per_frame_list</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Cycle</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="nf">get_label_per_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A list of labels per frame for one cycle only.</span>

<span class="sd">        Returns:</span>
<span class="sd">            labels per frame for one full cycle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">per_frame_label_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
            <span class="n">per_frame_label_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_time</span> <span class="o">*</span> <span class="p">[</span><span class="n">label</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">per_frame_label_list</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cycle : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Length: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Label </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: for </span><span class="si">{</span><span class="n">label_time</span><span class="si">}</span><span class="s2"> frames</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates how many cycles you need to fully cover n_frames.</span>

<span class="sd">        Args:</span>
<span class="sd">            n_frames: number of frames to cover</span>
<span class="sd">        Returns:</span>
<span class="sd">            number of cycle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n_cycles</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">n_frames</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">n_cycles</span>

    <span class="k">def</span> <span class="nf">fit_labels_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a list of labels corresponding to each frame in the range of n_frames</span>

<span class="sd">        Args:</span>
<span class="sd">            n_frames: number of frames to fit labels to</span>
<span class="sd">        Returns:</span>
<span class="sd">            label_per_frame_list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
        <span class="n">label_per_frame_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span><span class="p">,</span> <span class="n">n_cycles</span><span class="p">)</span>
        <span class="c1"># crop the tail</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">label_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">fit_cycles_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a list of integers (what cycle iteration it is) corresponding to each frame in the range of n_frames</span>

<span class="sd">        Args:</span>
<span class="sd">            n_frames: number of frames to fit cycle iterations to</span>
<span class="sd">        Returns:</span>
<span class="sd">            cycle_per_frame_list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
        <span class="n">cycle_per_frame_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n_cycles</span><span class="p">):</span>
            <span class="n">cycle_per_frame_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="p">)</span>
        <span class="c1"># crop the tail</span>
        <span class="k">return</span> <span class="n">cycle_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">label_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;timing&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="s1">&#39;label_order&#39;</span><span class="p">:</span> <span class="n">label_order</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
        <span class="n">label_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">TimeLabel</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">ld</span><span class="p">)</span> <span class="k">for</span> <span class="n">ld</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;label_order&#39;</span><span class="p">]]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">label_order</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;timing&#39;</span><span class="p">])</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        j : json string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Cycle.fit_cycles_to_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fit_cycles_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a list of integers (what cycle iteration it is) corresponding to each frame in the range of n_frames</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>number of frames to fit cycle iterations to</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[int]</code>
          </td>
          <td><p>cycle_per_frame_list</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fit_cycles_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a list of integers (what cycle iteration it is) corresponding to each frame in the range of n_frames</span>

<span class="sd">    Args:</span>
<span class="sd">        n_frames: number of frames to fit cycle iterations to</span>
<span class="sd">    Returns:</span>
<span class="sd">        cycle_per_frame_list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
    <span class="n">cycle_per_frame_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n_cycles</span><span class="p">):</span>
        <span class="n">cycle_per_frame_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="p">)</span>
    <span class="c1"># crop the tail</span>
    <span class="k">return</span> <span class="n">cycle_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Cycle.fit_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculates how many cycles you need to fully cover n_frames.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>number of frames to cover</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td><p>number of cycle</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates how many cycles you need to fully cover n_frames.</span>

<span class="sd">    Args:</span>
<span class="sd">        n_frames: number of frames to cover</span>
<span class="sd">    Returns:</span>
<span class="sd">        number of cycle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n_cycles</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">n_frames</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">n_cycles</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Cycle.fit_labels_to_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fit_labels_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a list of labels corresponding to each frame in the range of n_frames</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>number of frames to fit labels to</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>label_per_frame_list</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fit_labels_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a list of labels corresponding to each frame in the range of n_frames</span>

<span class="sd">    Args:</span>
<span class="sd">        n_frames: number of frames to fit labels to</span>
<span class="sd">    Returns:</span>
<span class="sd">        label_per_frame_list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
    <span class="n">label_per_frame_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span><span class="p">,</span> <span class="n">n_cycles</span><span class="p">)</span>
    <span class="c1"># crop the tail</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">label_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Cycle.from_json" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">j</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>j : json string</p>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    j : json string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Cycle.get_label_per_frame" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_label_per_frame</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>A list of labels per frame for one cycle only.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>labels per frame for one full cycle</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_label_per_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A list of labels per frame for one cycle only.</span>

<span class="sd">    Returns:</span>
<span class="sd">        labels per frame for one full cycle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">per_frame_label_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
        <span class="n">per_frame_label_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_time</span> <span class="o">*</span> <span class="p">[</span><span class="n">label</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">per_frame_label_list</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.FileManager" class="doc doc-heading">
        <code>FileManager</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Collects and stores the information about all the image files.
By default, it will search for all the files with the provided file extension
in the provided data director and order them alphabetically.
If a list of file names is provided, will use these files in the provided order.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data_dir</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="pathlib.Path">Path</span>]</code>
          </td>
          <td><p>path to the folder with the files, ends with "/" or "\"</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>file_names</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td><p>names of files relative to the data_dir (TODO:?)</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>frames_per_file</code></td>
          <td>
                <code><span title="typing.List">List</span>[int]</code>
          </td>
          <td><p>number of frames in each file. Will be used ONLY if the file_names were provided.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>file_type</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>file type to search for (if files are not provided). Must be a key in the VX_SUPPORTED_TYPES dict.</p></td>
          <td>
                <code>&#39;TIFF&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data_dir</code></td>
          <td>
                <code><span title="pathlib.Path">Path</span></code>
          </td>
          <td><p>the directory with all the imaging data</p></td>
        </tr>
        <tr>
          <td><code>file_names</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td><p>names of files relative to the data_dir (TODO:?)</p></td>
        </tr>
        <tr>
          <td><code>loader</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.loaders.ImageLoader" href="../loaders/#src.vodex.loaders.ImageLoader">ImageLoader</a></code>
          </td>
          <td><p>initialised image loader (see loaders.ImageLoader for more details)</p></td>
        </tr>
        <tr>
          <td><code>num_frames</code></td>
          <td>
          </td>
          <td><p>a number of frames per file</p></td>
        </tr>
        <tr>
          <td><code>n_files</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>total number of image files</p></td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">FileManager</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Collects and stores the information about all the image files.</span>
<span class="sd">    By default, it will search for all the files with the provided file extension</span>
<span class="sd">    in the provided data director and order them alphabetically.</span>
<span class="sd">    If a list of file names is provided, will use these files in the provided order.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_dir: path to the folder with the files, ends with &quot;/&quot; or &quot;\\&quot;</span>
<span class="sd">        file_names: names of files relative to the data_dir (TODO:?)</span>
<span class="sd">        frames_per_file: number of frames in each file. Will be used ONLY if the file_names were provided.</span>
<span class="sd">        file_type: file type to search for (if files are not provided). Must be a key in the VX_SUPPORTED_TYPES dict.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        data_dir: the directory with all the imaging data</span>
<span class="sd">        file_names: names of files relative to the data_dir (TODO:?)</span>
<span class="sd">        loader: initialised image loader (see loaders.ImageLoader for more details)</span>
<span class="sd">        num_frames: a number of frames per file</span>
<span class="sd">        n_files: total number of image files</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span> <span class="n">file_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;TIFF&quot;</span><span class="p">,</span>
                 <span class="n">file_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="c1"># 1. get data_dir and check it exists</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">is_dir</span><span class="p">(),</span> <span class="sa">f</span><span class="s2">&quot;No directory </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># 2. get files</span>
        <span class="k">if</span> <span class="n">file_names</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">file_names</span><span class="p">]</span>
            <span class="c1"># check that all the elements of the list are same</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tags</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Error initializing FileManager: &quot;</span> \
                                        <span class="sa">f</span><span class="s2">&quot;file_names must be files with the same resolution, but got </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">tags</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">file_type</span> <span class="o">=</span> <span class="n">VX_EXTENSION_TO_TYPE</span><span class="p">[</span><span class="n">tags</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_type</span> <span class="o">=</span> <span class="n">file_type</span>
        <span class="n">file_extensions</span> <span class="o">=</span> <span class="n">VX_SUPPORTED_TYPES</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">file_type</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># TODO : check in accordance with the file extension/ figure out file type from files when provided</span>
        <span class="k">if</span> <span class="n">file_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># if files are not provided , search for tiffs in the data_dir</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_files</span><span class="p">(</span><span class="n">file_extensions</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># if a list of files is provided, check it&#39;s in the folder</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_files</span><span class="p">(</span><span class="n">file_names</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">frames_per_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># not recommended! this information is taken as is and is not verified...</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">frames_per_file</span>

        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Error when initialising FileManager:</span><span class="se">\n</span><span class="s2">&quot;</span> \
                                         <span class="sa">f</span><span class="s2">&quot;No files of type </span><span class="si">{</span><span class="n">file_type</span><span class="si">}</span><span class="s2"> [extensions </span><span class="si">{</span><span class="n">file_extensions</span><span class="si">}</span><span class="s2">]</span><span class="se">\n</span><span class="s2">&quot;</span> \
                                         <span class="sa">f</span><span class="s2">&quot; in </span><span class="si">{</span><span class="n">data_dir</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="c1"># 3. Initialise ImageLoader</span>
        <span class="c1">#    will pick the image loader that works with the provided file type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="p">:</span> <span class="n">ImageLoader</span> <span class="o">=</span> <span class="n">ImageLoader</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

        <span class="c1"># 4. Get number of frames per file (if it wasn&#39;t entered manually)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># if number of frames not provided , search for tiffs in the data_dir</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frames_per_file</span><span class="p">()</span>

        <span class="c1"># check that the type is int</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span><span class="p">),</span> \
            <span class="s2">&quot;self.num_frames should be a list of int&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">n_files</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Image files information :</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;files directory: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;files [number of frames]: </span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">i_file</span><span class="p">,</span> <span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">num_frames</span><span class="p">))</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span><span class="p">)):</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i_file</span><span class="si">}</span><span class="s2">) </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> [</span><span class="si">{</span><span class="n">num_frames</span><span class="si">}</span><span class="s2">]</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">FileManager</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">data_dir</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">file_names</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">loader</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">num_frames</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n_files</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n_files</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">FileManager</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="nf">find_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_extensions</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches for files ending with the provided file extension in the data directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_extensions: extensions of files to search for</span>
<span class="sd">        Returns:</span>
<span class="sd">            A list of file names. File names are with the extension, relative to the data directory</span>
<span class="sd">            (names only, not full paths to files)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;**/*&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">suffix</span> <span class="ow">in</span> <span class="n">file_extensions</span><span class="p">)</span>
        <span class="n">file_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">file_names</span>

    <span class="k">def</span> <span class="nf">check_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a list of files checks that files are in the data directory.</span>
<span class="sd">        Throws an error if any of the files are missing.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_names: list of filenames to check.</span>

<span class="sd">        Returns:</span>
<span class="sd">            If the files are all present in the directory, returns the file_names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: List all the missing files, not just the first encountered.</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_names</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">file</span><span class="o">.</span><span class="n">is_file</span><span class="p">(),</span> <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> is not found&quot;</span>
        <span class="k">return</span> <span class="n">file_names</span>

    <span class="k">def</span> <span class="nf">get_frames_per_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the number of frames per file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a list with number of frames per file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frames_per_file</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">:</span>
            <span class="n">n_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">get_frames_in_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
            <span class="n">frames_per_file</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">frames_per_file</span>

    <span class="k">def</span> <span class="nf">change_files_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes the order of the files. If you notice that files are in the wrong order, provide the new order.</span>
<span class="sd">        If you wish to exclude any files, get rid of them ( don&#39;t include their IDs into the new order ).</span>

<span class="sd">        Args:</span>
<span class="sd">            order: The new order in which the files follow. Refer to file by it&#39;s position in the original list.</span>
<span class="sd">            Should be the same length as the number of files in the original list or smaller, no duplicates.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO : test it</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_files</span><span class="p">,</span> \
            <span class="s2">&quot;Number of files is smaller than elements in the new order list! &quot;</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">order</span><span class="p">)),</span> \
            <span class="s2">&quot;All elements in the new order list must be unique! &quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">order</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">order</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_files</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.FileManager.change_files_order" class="doc doc-heading">
<code class="highlight language-python"><span class="n">change_files_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Changes the order of the files. If you notice that files are in the wrong order, provide the new order.
If you wish to exclude any files, get rid of them ( don't include their IDs into the new order ).</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>order</code></td>
          <td>
                <code><span title="typing.List">List</span>[int]</code>
          </td>
          <td><p>The new order in which the files follow. Refer to file by it's position in the original list.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">change_files_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Changes the order of the files. If you notice that files are in the wrong order, provide the new order.</span>
<span class="sd">    If you wish to exclude any files, get rid of them ( don&#39;t include their IDs into the new order ).</span>

<span class="sd">    Args:</span>
<span class="sd">        order: The new order in which the files follow. Refer to file by it&#39;s position in the original list.</span>
<span class="sd">        Should be the same length as the number of files in the original list or smaller, no duplicates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO : test it</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_files</span><span class="p">,</span> \
        <span class="s2">&quot;Number of files is smaller than elements in the new order list! &quot;</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">order</span><span class="p">)),</span> \
        <span class="s2">&quot;All elements in the new order list must be unique! &quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">order</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">order</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">n_files</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.FileManager.check_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_files</span><span class="p">(</span><span class="n">file_names</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Given a list of files checks that files are in the data directory.
Throws an error if any of the files are missing.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_names</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td><p>list of filenames to check.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td><p>If the files are all present in the directory, returns the file_names.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a list of files checks that files are in the data directory.</span>
<span class="sd">    Throws an error if any of the files are missing.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_names: list of filenames to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        If the files are all present in the directory, returns the file_names.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: List all the missing files, not just the first encountered.</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_names</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">file</span><span class="o">.</span><span class="n">is_file</span><span class="p">(),</span> <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> is not found&quot;</span>
    <span class="k">return</span> <span class="n">file_names</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.FileManager.find_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_files</span><span class="p">(</span><span class="n">file_extensions</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Searches for files ending with the provided file extension in the data directory.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_extensions</code></td>
          <td>
                <code><span title="typing.Tuple">Tuple</span>[str]</code>
          </td>
          <td><p>extensions of files to search for</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td><p>A list of file names. File names are with the extension, relative to the data directory</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td><p>(names only, not full paths to files)</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">find_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_extensions</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Searches for files ending with the provided file extension in the data directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_extensions: extensions of files to search for</span>
<span class="sd">    Returns:</span>
<span class="sd">        A list of file names. File names are with the extension, relative to the data directory</span>
<span class="sd">        (names only, not full paths to files)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;**/*&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">suffix</span> <span class="ow">in</span> <span class="n">file_extensions</span><span class="p">)</span>
    <span class="n">file_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">file_names</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.FileManager.get_frames_per_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_frames_per_file</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get the number of frames per file.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[int]</code>
          </td>
          <td><p>a list with number of frames per file.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_frames_per_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the number of frames per file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        a list with number of frames per file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">frames_per_file</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">:</span>
        <span class="n">n_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">get_frames_in_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
        <span class="n">frames_per_file</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">frames_per_file</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.FrameManager" class="doc doc-heading">
        <code>FrameManager</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Deals with frames. Which frames correspond to a volume / cycle/ condition.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_manager</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.FileManager" href="#src.vodex.core.FileManager">FileManager</a></code>
          </td>
          <td><p>info about the files.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">FrameManager</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deals with frames. Which frames correspond to a volume / cycle/ condition.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_manager: info about the files.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_manager</span><span class="p">:</span> <span class="n">FileManager</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span> <span class="o">=</span> <span class="n">file_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">num_frames</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_in_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_mapping</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">FrameManager</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">file_manager</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_file</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_file</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_in_file</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_in_file</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">FrameManager</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">file_manager</span> <span class="o">=</span> <span class="n">FileManager</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="o">=</span><span class="n">file_names</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="o">=</span><span class="n">frames_per_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">file_manager</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_frame_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates frame range in each file and returns a file index for each frame and frame index in the file.</span>
<span class="sd">        Used to figure out in which stack the requested frames is.</span>
<span class="sd">        Frame number starts at 0.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Two lists mapping frames to files. &#39;frame_to_file&#39; is a list of length equal to the total number of</span>
<span class="sd">            frames in all the files, where each element corresponds to a frame and contains the file index,</span>
<span class="sd">            of the file where that frame can be found. &#39;in_file_frame&#39; is a list of length equal to the total number of</span>
<span class="sd">            frames in all the files, where each element corresponds to the index of the frame inside the file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frame_to_file</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">frame_in_file</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">file_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">n_files</span><span class="p">):</span>
            <span class="n">n_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">num_frames</span><span class="p">[</span><span class="n">file_idx</span><span class="p">]</span>
            <span class="n">frame_to_file</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">n_frames</span> <span class="o">*</span> <span class="p">[</span><span class="n">file_idx</span><span class="p">])</span>
            <span class="n">frame_in_file</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n_frames</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">frame_to_file</span><span class="p">,</span> <span class="n">frame_in_file</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Total </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">num_frames</span><span class="p">)</span><span class="si">}</span><span class="s2"> frames.&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.FrameManager.get_frame_mapping" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_frame_mapping</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculates frame range in each file and returns a file index for each frame and frame index in the file.
Used to figure out in which stack the requested frames is.
Frame number starts at 0.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[int], <span title="typing.List">List</span>[int]</code>
          </td>
          <td><p>Two lists mapping frames to files. 'frame_to_file' is a list of length equal to the total number of</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[int], <span title="typing.List">List</span>[int]</code>
          </td>
          <td><p>frames in all the files, where each element corresponds to a frame and contains the file index,</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[int], <span title="typing.List">List</span>[int]</code>
          </td>
          <td><p>of the file where that frame can be found. 'in_file_frame' is a list of length equal to the total number of</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[int], <span title="typing.List">List</span>[int]</code>
          </td>
          <td><p>frames in all the files, where each element corresponds to the index of the frame inside the file.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_frame_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates frame range in each file and returns a file index for each frame and frame index in the file.</span>
<span class="sd">    Used to figure out in which stack the requested frames is.</span>
<span class="sd">    Frame number starts at 0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Two lists mapping frames to files. &#39;frame_to_file&#39; is a list of length equal to the total number of</span>
<span class="sd">        frames in all the files, where each element corresponds to a frame and contains the file index,</span>
<span class="sd">        of the file where that frame can be found. &#39;in_file_frame&#39; is a list of length equal to the total number of</span>
<span class="sd">        frames in all the files, where each element corresponds to the index of the frame inside the file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">frame_to_file</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">frame_in_file</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">file_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">n_files</span><span class="p">):</span>
        <span class="n">n_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">num_frames</span><span class="p">[</span><span class="n">file_idx</span><span class="p">]</span>
        <span class="n">frame_to_file</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">n_frames</span> <span class="o">*</span> <span class="p">[</span><span class="n">file_idx</span><span class="p">])</span>
        <span class="n">frame_in_file</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n_frames</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">frame_to_file</span><span class="p">,</span> <span class="n">frame_in_file</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.Labels" class="doc doc-heading">
        <code>Labels</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Describes a particular group of time labels.
TODO : also responsible for colors for plotting these labels?</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>group</code></td>
          <td>
          </td>
          <td><p>the name of the group</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>group_info</code></td>
          <td>
          </td>
          <td><p>description of what this group is about. Just for storing the information.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>state_names</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td><p>the state names</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>state_info</code></td>
          <td>
                <code>dict</code>
          </td>
          <td><p>description of each individual state {state name : description}. Just for storing the information.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>group</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>the name of the group</p></td>
        </tr>
        <tr>
          <td><code>group_info</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>description of what this group is about. Just for storing the information.</p></td>
        </tr>
        <tr>
          <td><code>state_names</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td><p>the state names</p></td>
        </tr>
        <tr>
          <td><code>states</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>list of states, each state as a TimeLabel object</p></td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Labels</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Describes a particular group of time labels.</span>
<span class="sd">    TODO : also responsible for colors for plotting these labels?</span>

<span class="sd">    Args:</span>
<span class="sd">        group : the name of the group</span>
<span class="sd">        group_info : description of what this group is about. Just for storing the information.</span>
<span class="sd">        state_names: the state names</span>
<span class="sd">        state_info: description of each individual state {state name : description}. Just for storing the information.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        group (str): the name of the group</span>
<span class="sd">        group_info (str): description of what this group is about. Just for storing the information.</span>
<span class="sd">        state_names (List[str]): the state names</span>
<span class="sd">        states (List[TimeLabel]): list of states, each state as a TimeLabel object</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">state_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">group_info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">state_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">state_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">state_info</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">group_info</span> <span class="o">=</span> <span class="n">group_info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state_names</span> <span class="o">=</span> <span class="n">state_names</span>
        <span class="c1"># create states</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">states</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">state_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">state_name</span> <span class="ow">in</span> <span class="n">state_info</span><span class="p">:</span>
                <span class="n">state</span> <span class="o">=</span> <span class="n">TimeLabel</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">state_info</span><span class="p">[</span><span class="n">state_name</span><span class="p">],</span> <span class="n">group</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">)</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state_name</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">state</span> <span class="o">=</span> <span class="n">TimeLabel</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">)</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state_name</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Labels</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">group</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">group_info</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">group_info</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state_names</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">state_names</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">states</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">states</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Labels</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Label group : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;States:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">state_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_names</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state_name</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.TimeLabel" class="doc doc-heading">
        <code>TimeLabel</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Describes a particular time-located event during the experiment.
Any specific aspect of the experiment that you may want to document :
temperature|light|sound|image on the screen|drug|behaviour ... etc.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>the name for the time label. This is a unique identifier of the label.
        Different labels must have different names.
        Different labels are compared based on their names, so the same name means it is the same event.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>description</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>a detailed description of the label. This is to give you more info, but it is not used for
anything else.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>group</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>the group that the label belongs to.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>the name for the time label. This is a unique identifier of the label.
        Different labels must have different names.
        Different labels are compared based on their names, so the same name means it is the same event.</p></td>
        </tr>
        <tr>
          <td><code>description</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>a detailed description of the label. This is to give you more info, but it is not used for
anything else.</p></td>
        </tr>
        <tr>
          <td><code>group</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>the group that the label belongs to.</p></td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">TimeLabel</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Describes a particular time-located event during the experiment.</span>
<span class="sd">    Any specific aspect of the experiment that you may want to document :</span>
<span class="sd">    temperature|light|sound|image on the screen|drug|behaviour ... etc.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: the name for the time label. This is a unique identifier of the label.</span>
<span class="sd">                    Different labels must have different names.</span>
<span class="sd">                    Different labels are compared based on their names, so the same name means it is the same event.</span>
<span class="sd">        description: a detailed description of the label. This is to give you more info, but it is not used for</span>
<span class="sd">            anything else.</span>
<span class="sd">        group: the group that the label belongs to.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name: the name for the time label. This is a unique identifier of the label.</span>
<span class="sd">                    Different labels must have different names.</span>
<span class="sd">                    Different labels are compared based on their names, so the same name means it is the same event.</span>
<span class="sd">        description: a detailed description of the label. This is to give you more info, but it is not used for</span>
<span class="sd">            anything else.</span>
<span class="sd">        group: the group that the label belongs to.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="s2">&quot; : &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="s2">&quot;. Group: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># necessary for instances to behave sanely in dicts and sets.</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeLabel</span><span class="p">):</span>
            <span class="c1"># comparing by name</span>
            <span class="n">same_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">same_group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">group</span>
                <span class="k">return</span> <span class="n">same_name</span> <span class="ow">and</span> <span class="n">same_group</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">same_name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">TimeLabel</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Put all the information about a TimeLabel object into a dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a dictionary with fields &#39;name&#39;, &#39;group&#39;, &#39;description&#39; storing the corresponding attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
        <span class="k">return</span> <span class="n">d</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a TimeLabel object from a dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (TimeLabel): a TimeLabel object with attributes &#39;name&#39;, &#39;group&#39;, &#39;description&#39;</span>
<span class="sd">            filled from the dictionary fields.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">group</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s1">&#39;description&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;group&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.TimeLabel.from_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a TimeLabel object from a dictionary.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a></code>
          </td>
          <td><p>a TimeLabel object with attributes 'name', 'group', 'description'</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>filled from the dictionary fields.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a TimeLabel object from a dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (TimeLabel): a TimeLabel object with attributes &#39;name&#39;, &#39;group&#39;, &#39;description&#39;</span>
<span class="sd">        filled from the dictionary fields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">group</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s1">&#39;description&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">&#39;group&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.TimeLabel.to_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Put all the information about a TimeLabel object into a dictionary.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td><p>a dictionary with fields 'name', 'group', 'description' storing the corresponding attributes.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Put all the information about a TimeLabel object into a dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        a dictionary with fields &#39;name&#39;, &#39;group&#39;, &#39;description&#39; storing the corresponding attributes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
    <span class="k">return</span> <span class="n">d</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.Timeline" class="doc doc-heading">
        <code>Timeline</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Information about the sequence of labels. Use it when you have non-periodic conditions.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>label_order</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>a list of labels in the right order in which they follow</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>duration</code></td>
          <td>
                <code><span title="typing.List">List</span>[int]</code>
          </td>
          <td><p>duration of the corresponding labels, in frames (based on your imaging). Note that these are
frames, not volumes !</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Timeline</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information about the sequence of labels. Use it when you have non-periodic conditions.</span>

<span class="sd">    Args:</span>
<span class="sd">        label_order: a list of labels in the right order in which they follow</span>
<span class="sd">        duration: duration of the corresponding labels, in frames (based on your imaging). Note that these are</span>
<span class="sd">            frames, not volumes !</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_order</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">],</span> <span class="n">duration</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>

        <span class="c1"># check that all labels are from the same group</span>
        <span class="n">label_group</span> <span class="o">=</span> <span class="n">label_order</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">group</span>
        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">label_order</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">label</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">label_group</span><span class="p">,</span> \
                <span class="sa">f</span><span class="s2">&quot;All labels should be from the same group, but got </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">group</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">label_group</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># check that timing is int</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">duration</span><span class="p">),</span> <span class="s2">&quot;duration should be a list of int&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">label_group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span> <span class="o">=</span> <span class="n">label_order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
        <span class="c1"># list the length of the cycle, each element is the TimeLabel</span>
        <span class="c1"># TODO : turn it into an index ?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_label_per_frame</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Timeline</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">label_order</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">full_length</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">per_frame_list</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Timeline</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="nf">get_label_per_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A list of labels per frame for the duration of the experiment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            labels per frame for the experiment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">per_frame_label_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
            <span class="n">per_frame_label_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_time</span> <span class="o">*</span> <span class="p">[</span><span class="n">label</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">per_frame_label_list</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Timeline : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Length: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Label </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: for </span><span class="si">{</span><span class="n">label_time</span><span class="si">}</span><span class="s2"> frames</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Timeline.get_label_per_frame" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_label_per_frame</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>A list of labels per frame for the duration of the experiment.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>labels per frame for the experiment.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_label_per_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A list of labels per frame for the duration of the experiment.</span>

<span class="sd">    Returns:</span>
<span class="sd">        labels per frame for the experiment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">per_frame_label_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
        <span class="n">per_frame_label_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_time</span> <span class="o">*</span> <span class="p">[</span><span class="n">label</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">per_frame_label_list</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.VolumeManager" class="doc doc-heading">
        <code>VolumeManager</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Figures out how to get full volumes for certain time points.</p>

<details class="learning-resourses">
  <summary>Learning Resourses</summary>
  <p>maybe I should do type checking automatically, something like here:
https://stackoverflow.com/questions/9305751/how-to-force-ensure-class-attributes-are-a-specific-type</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>fpv</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>frames per volume, number of frames in one volume</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>fgf</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>first good frame, the first frame in the imaging session that is at the top of a volume.
For example if you started imaging at the top of the volume, fgf = 0,
but if you started somewhere in the middle, the first good frame is , for example, 23 ...</p></td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>frame_manager</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.FrameManager" href="#src.vodex.core.FrameManager">FrameManager</a></code>
          </td>
          <td><p>the info about the frames</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VolumeManager</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Figures out how to get full volumes for certain time points.</span>

<span class="sd">    Learning Resourses:</span>
<span class="sd">        maybe I should do type checking automatically, something like here:</span>
<span class="sd">        https://stackoverflow.com/questions/9305751/how-to-force-ensure-class-attributes-are-a-specific-type</span>

<span class="sd">    Args:</span>
<span class="sd">        fpv: frames per volume, number of frames in one volume</span>
<span class="sd">        fgf: first good frame, the first frame in the imaging session that is at the top of a volume.</span>
<span class="sd">            For example if you started imaging at the top of the volume, fgf = 0,</span>
<span class="sd">            but if you started somewhere in the middle, the first good frame is , for example, 23 ...</span>
<span class="sd">        frame_manager: the info about the frames</span>

<span class="sd">    Attributes:</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fpv</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">frame_manager</span><span class="p">:</span> <span class="n">FrameManager</span><span class="p">,</span> <span class="n">fgf</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fpv</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fpv</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">fpv</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()),</span> <span class="s2">&quot;fpv must be an integer&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fgf</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fgf</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">fgf</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()),</span> <span class="s2">&quot;fgf must be an integer&quot;</span>

        <span class="c1"># frames per volume</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fpv</span><span class="p">)</span>

        <span class="c1"># get total number of frames</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_manager</span><span class="p">:</span> <span class="n">FrameManager</span> <span class="o">=</span> <span class="n">frame_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="p">:</span> <span class="n">FileManager</span> <span class="o">=</span> <span class="n">frame_manager</span><span class="o">.</span><span class="n">file_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">num_frames</span><span class="p">))</span>

        <span class="c1"># prepare info about frames at the beginning, full volumes and frames at the end</span>
        <span class="c1"># first good frame, start counting from 0 : 0, 1, 2, 3, ...</span>
        <span class="c1"># n_head is the number of frames before the first frame of the first full volume</span>
        <span class="c1"># n_tail is the number of frames after the last frame of the last full volume</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fgf</span><span class="p">)</span>
        <span class="n">full_volumes</span><span class="p">,</span> <span class="n">n_tail</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">full_volumes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n_tail</span><span class="p">)</span>

        <span class="c1"># map frames to slices an full volumes:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_z</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frames_to_z_mapping</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_vol</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frames_to_volumes_mapping</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VolumeManager</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">fpv</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_manager</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_manager</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">file_manager</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n_frames</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n_head</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">full_volumes</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n_tail</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_z</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_z</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_vol</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_vol</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">VolumeManager</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="nf">get_frames_to_z_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">z_per_frame_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fpv</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
        <span class="c1"># set at what z the imaging starts and ends</span>
        <span class="n">i_from</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span>
        <span class="n">i_to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span>
        <span class="c1"># map frames to z</span>
        <span class="n">frame_to_z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">z_per_frame_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)[</span><span class="n">i_from</span><span class="p">:</span><span class="n">i_to</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">frame_to_z</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_frames_to_volumes_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        maps frames to volumes</span>
<span class="sd">        -1 for head ( not full volume at the beginning )</span>
<span class="sd">        volume number for full volumes : 0, 1, ,2 3, ...</span>
<span class="sd">        -2 for tail (not full volume at the end )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO : make sure n_head is not larger than full volume?</span>
        <span class="n">frame_to_vol</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span>
        <span class="k">for</span> <span class="n">vol</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span><span class="p">):</span>
            <span class="n">frame_to_vol</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">vol</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span><span class="p">)</span>
        <span class="n">frame_to_vol</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">frame_to_vol</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Total frames : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Volumes start on frame : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_head</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Total good volumes : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Frames per volume : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fpv</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Tailing frames (not a full volume , at the end) : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">,</span> <span class="n">fpv</span><span class="p">,</span> <span class="n">fgf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">file_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a VolumeManager object from directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">file_manager</span> <span class="o">=</span> <span class="n">FileManager</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="o">=</span><span class="n">file_names</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="o">=</span><span class="n">frames_per_file</span><span class="p">)</span>
        <span class="n">frame_manager</span> <span class="o">=</span> <span class="n">FrameManager</span><span class="p">(</span><span class="n">file_manager</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">fpv</span><span class="p">,</span> <span class="n">frame_manager</span><span class="p">,</span> <span class="n">fgf</span><span class="o">=</span><span class="n">fgf</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.VolumeManager.from_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_dir</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">fpv</span><span class="p">,</span> <span class="n">fgf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">file_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates a VolumeManager object from directory.</p>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">,</span> <span class="n">fpv</span><span class="p">,</span> <span class="n">fgf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">file_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a VolumeManager object from directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file_manager</span> <span class="o">=</span> <span class="n">FileManager</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="o">=</span><span class="n">file_names</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="o">=</span><span class="n">frames_per_file</span><span class="p">)</span>
    <span class="n">frame_manager</span> <span class="o">=</span> <span class="n">FrameManager</span><span class="p">(</span><span class="n">file_manager</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">fpv</span><span class="p">,</span> <span class="n">frame_manager</span><span class="p">,</span> <span class="n">fgf</span><span class="o">=</span><span class="n">fgf</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.VolumeManager.get_frames_to_volumes_mapping" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_frames_to_volumes_mapping</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>maps frames to volumes
-1 for head ( not full volume at the beginning )
volume number for full volumes : 0, 1, ,2 3, ...
-2 for tail (not full volume at the end )</p>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_frames_to_volumes_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    maps frames to volumes</span>
<span class="sd">    -1 for head ( not full volume at the beginning )</span>
<span class="sd">    volume number for full volumes : 0, 1, ,2 3, ...</span>
<span class="sd">    -2 for tail (not full volume at the end )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO : make sure n_head is not larger than full volume?</span>
    <span class="n">frame_to_vol</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span>
    <span class="k">for</span> <span class="n">vol</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span><span class="p">):</span>
        <span class="n">frame_to_vol</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">vol</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span><span class="p">)</span>
    <span class="n">frame_to_vol</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">frame_to_vol</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
