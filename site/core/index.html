
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Core - VoDEx Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vodexcore-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="VoDEx Docs" class="md-header__button md-logo" aria-label="VoDEx Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            VoDEx Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Core
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="VoDEx Docs" class="md-nav__button md-logo" aria-label="VoDEx Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    VoDEx Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../how-to-guides/" class="md-nav__link">
        How-To Guides
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../loaders/" class="md-nav__link">
        Loaders
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Core
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Core
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core" class="md-nav__link">
    src.vodex.core
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.Annotation" class="md-nav__link">
    Annotation
  </a>
  
    <nav class="md-nav" aria-label="Annotation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Annotation.cycle_info" class="md-nav__link">
    cycle_info()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Annotation.get_timeline" class="md-nav__link">
    get_timeline()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle" class="md-nav__link">
    Cycle
  </a>
  
    <nav class="md-nav" aria-label="Cycle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle.fit_cycles_to_frames" class="md-nav__link">
    fit_cycles_to_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle.fit_frames" class="md-nav__link">
    fit_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle.fit_labels_to_frames" class="md-nav__link">
    fit_labels_to_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle.from_json" class="md-nav__link">
    from_json()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle.get_label_per_frame" class="md-nav__link">
    get_label_per_frame()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment" class="md-nav__link">
    Experiment
  </a>
  
    <nav class="md-nav" aria-label="Experiment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.add_annotations" class="md-nav__link">
    add_annotations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.choose_frames" class="md-nav__link">
    choose_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.choose_volumes" class="md-nav__link">
    choose_volumes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.close" class="md-nav__link">
    close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.create" class="md-nav__link">
    create()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.list_conditions_per_cycle" class="md-nav__link">
    list_conditions_per_cycle()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.list_cycle_iterations" class="md-nav__link">
    list_cycle_iterations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.list_volumes" class="md-nav__link">
    list_volumes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.load" class="md-nav__link">
    load()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.load_volumes" class="md-nav__link">
    load_volumes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.save" class="md-nav__link">
    save()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.summary" class="md-nav__link">
    summary()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.FileManager" class="md-nav__link">
    FileManager
  </a>
  
    <nav class="md-nav" aria-label="FileManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.FileManager.check_files" class="md-nav__link">
    check_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.FileManager.find_files" class="md-nav__link">
    find_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.FileManager.get_frames_per_file" class="md-nav__link">
    get_frames_per_file()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.FrameManager" class="md-nav__link">
    FrameManager
  </a>
  
    <nav class="md-nav" aria-label="FrameManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.FrameManager.get_frame_mapping" class="md-nav__link">
    get_frame_mapping()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.Labels" class="md-nav__link">
    Labels
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.TimeLabel" class="md-nav__link">
    TimeLabel
  </a>
  
    <nav class="md-nav" aria-label="TimeLabel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.TimeLabel.from_dict" class="md-nav__link">
    from_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.TimeLabel.to_dict" class="md-nav__link">
    to_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.Timeline" class="md-nav__link">
    Timeline
  </a>
  
    <nav class="md-nav" aria-label="Timeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Timeline.get_label_per_frame" class="md-nav__link">
    get_label_per_frame()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.VolumeManager" class="md-nav__link">
    VolumeManager
  </a>
  
    <nav class="md-nav" aria-label="VolumeManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.VolumeManager.get_frames_to_volumes_mapping" class="md-nav__link">
    get_frames_to_volumes_mapping()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dbmethods/" class="md-nav__link">
        DataBase methods
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../explanation/" class="md-nav__link">
        Explanation
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core" class="md-nav__link">
    src.vodex.core
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.Annotation" class="md-nav__link">
    Annotation
  </a>
  
    <nav class="md-nav" aria-label="Annotation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Annotation.cycle_info" class="md-nav__link">
    cycle_info()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Annotation.get_timeline" class="md-nav__link">
    get_timeline()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle" class="md-nav__link">
    Cycle
  </a>
  
    <nav class="md-nav" aria-label="Cycle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle.fit_cycles_to_frames" class="md-nav__link">
    fit_cycles_to_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle.fit_frames" class="md-nav__link">
    fit_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle.fit_labels_to_frames" class="md-nav__link">
    fit_labels_to_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle.from_json" class="md-nav__link">
    from_json()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Cycle.get_label_per_frame" class="md-nav__link">
    get_label_per_frame()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment" class="md-nav__link">
    Experiment
  </a>
  
    <nav class="md-nav" aria-label="Experiment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.add_annotations" class="md-nav__link">
    add_annotations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.choose_frames" class="md-nav__link">
    choose_frames()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.choose_volumes" class="md-nav__link">
    choose_volumes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.close" class="md-nav__link">
    close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.create" class="md-nav__link">
    create()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.list_conditions_per_cycle" class="md-nav__link">
    list_conditions_per_cycle()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.list_cycle_iterations" class="md-nav__link">
    list_cycle_iterations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.list_volumes" class="md-nav__link">
    list_volumes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.load" class="md-nav__link">
    load()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.load_volumes" class="md-nav__link">
    load_volumes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.save" class="md-nav__link">
    save()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Experiment.summary" class="md-nav__link">
    summary()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.FileManager" class="md-nav__link">
    FileManager
  </a>
  
    <nav class="md-nav" aria-label="FileManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.FileManager.check_files" class="md-nav__link">
    check_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.FileManager.find_files" class="md-nav__link">
    find_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.FileManager.get_frames_per_file" class="md-nav__link">
    get_frames_per_file()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.FrameManager" class="md-nav__link">
    FrameManager
  </a>
  
    <nav class="md-nav" aria-label="FrameManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.FrameManager.get_frame_mapping" class="md-nav__link">
    get_frame_mapping()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.Labels" class="md-nav__link">
    Labels
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.TimeLabel" class="md-nav__link">
    TimeLabel
  </a>
  
    <nav class="md-nav" aria-label="TimeLabel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.TimeLabel.from_dict" class="md-nav__link">
    from_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.TimeLabel.to_dict" class="md-nav__link">
    to_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.Timeline" class="md-nav__link">
    Timeline
  </a>
  
    <nav class="md-nav" aria-label="Timeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.Timeline.get_label_per_frame" class="md-nav__link">
    get_label_per_frame()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.vodex.core.VolumeManager" class="md-nav__link">
    VolumeManager
  </a>
  
    <nav class="md-nav" aria-label="VolumeManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.vodex.core.VolumeManager.get_frames_to_volumes_mapping" class="md-nav__link">
    get_frames_to_volumes_mapping()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="vodexcore-module">vodex.core module</h1>


<div class="doc doc-object doc-module">


<a id="src.vodex.core"></a>
  <div class="doc doc-contents first">
  
      <p>This module contains classes to specify the information about the imaging data, about the experimental conditions
and load the data based on the specified information.</p>
<p>The module contains the following classes:</p>
<ul>
<li>
<p><code>FileManager</code> - Figures out stuff concerning the many files. For example in what order do stacks go?
    Will grab all the files with the provided file_extension
    in the provided folder and order them alphabetically.</p>
</li>
<li>
<p><code>TimeLabel</code> - Describes a particular time-located event during the experiment.
        Any specific aspect of the experiment that you want to document :
        temperature|light|sound|image on the screen|drug|behaviour ... etc.</p>
</li>
<li>
<p><code>Labels</code> - Describes a particular group of time labels.</p>
</li>
<li>
<p><code>Cycle</code> - Information about the repeated cycle of labels. Use it when you have some periodic conditions, like : light
        on , light off, light on, light off... will be made of list of labels [light_on, light_off] that repeat ...</p>
</li>
<li>
<p><code>Timeline</code> - Information about the sequence of labels. Use it when you have non-periodic conditions.</p>
</li>
<li>
<p><code>FrameManager</code> - Deals with frames. Which frames correspond to a volume / cycle/ condition.</p>
</li>
<li>
<p><code>VolumeManager</code> - Figures out how to get full volumes for certain time points.</p>
</li>
<li>
<p><code>Annotation</code> - Time annotation of the experiment.</p>
</li>
<li>
<p><code>Experiment</code> - Information about the experiment.
        Will use all the information you provided to figure out what frames to give you based on your request.</p>
</li>
</ul>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.Annotation" class="doc doc-heading">
        <code>Annotation</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Time annotation of the experiment.</p>
<p>Either frame_to_label_dict or n_frames need to be provided to infer the number of frames.
If both are provided , they need to agree.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>labels</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.Labels" href="#src.vodex.core.Labels">Labels</a></code>
          </td>
          <td><p>Labels</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>info</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>str, description of the annotation</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>frame_to_label</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>what label it is for each frame</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>frame_to_cycle</code></td>
          <td>
                <code>list[int]</code>
          </td>
          <td><p>what cycle it is for each frame</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>cycle</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.Cycle" href="#src.vodex.core.Cycle">Cycle</a></code>
          </td>
          <td><p>for annotation from cycles keeps the cycle</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>total number of frames, will be inferred from frame_to_label if not provided</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Annotation</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Time annotation of the experiment.</span>

<span class="sd">    Either frame_to_label_dict or n_frames need to be provided to infer the number of frames.</span>
<span class="sd">    If both are provided , they need to agree.</span>

<span class="sd">    Args:</span>
<span class="sd">        labels: Labels</span>
<span class="sd">        info: str, description of the annotation</span>
<span class="sd">        frame_to_label: what label it is for each frame</span>
<span class="sd">        frame_to_cycle: what cycle it is for each frame</span>
<span class="sd">        cycle: for annotation from cycles keeps the cycle</span>
<span class="sd">        n_frames: total number of frames, will be inferred from frame_to_label if not provided</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">],</span> <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">cycle</span><span class="p">:</span> <span class="n">Cycle</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">frame_to_cycle</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="c1"># get total experiment length in frames, check that it is consistent</span>
        <span class="k">if</span> <span class="n">frame_to_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">frame_to_label</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;The number of frames in the frame_to_label,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frame_to_label</span><span class="p">)</span><span class="si">}</span><span class="s2">,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;and the number of frames provided,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n_frames</span><span class="si">}</span><span class="s2">, do not match.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">=</span> <span class="n">n_frames</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">frame_to_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="n">info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># None if the annotation is not from a cycle</span>
        <span class="k">assert</span> <span class="p">(</span><span class="n">frame_to_cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">),</span> <span class="s2">&quot;Creating Annotation: &quot;</span> \
                                                            <span class="s2">&quot;You have to provide both cycle and frame_to_cycle.&quot;</span>
        <span class="c1"># if cycle is provided , check the input and add the info</span>
        <span class="k">if</span> <span class="n">cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">frame_to_cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># check that frame_to_cycle is int</span>
            <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">frame_to_cycle</span><span class="p">),</span> <span class="s2">&quot;frame_to_cycle should be a list of int&quot;</span>
            <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">frame_to_cycle</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;The number of frames in the frame_to_cycle,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frame_to_cycle</span><span class="p">)</span><span class="si">}</span><span class="s2">,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;and the number of frames provided,&quot;</span> \
                                                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n_frames</span><span class="si">}</span><span class="s2">, do not match.&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">=</span> <span class="n">cycle</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_cycle</span> <span class="o">=</span> <span class="n">frame_to_cycle</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Annotation</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n_frames</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_label</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">labels</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">info</span>
            <span class="p">]</span>
            <span class="c1"># if one of the annotations has a cycle but the other doesn&#39;t</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">!=</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="c1"># if both have a cycle, compare cycles as well</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">is_same</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">cycle</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_cycle</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_cycle</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Annotation</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_cycle</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">fit_labels_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
        <span class="n">frame_to_cycle</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">fit_cycles_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span>
                   <span class="n">cycle</span><span class="o">=</span><span class="n">cycle</span><span class="p">,</span> <span class="n">frame_to_cycle</span><span class="o">=</span><span class="n">frame_to_cycle</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_timeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">timeline</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">n_frames</span> <span class="o">==</span> <span class="n">timeline</span><span class="o">.</span><span class="n">full_length</span><span class="p">,</span> <span class="s2">&quot;number of frames and total timing should be the same&quot;</span>
        <span class="c1"># make a fake cycle the length of the whole recording</span>
        <span class="n">frame_to_label</span> <span class="o">=</span> <span class="n">timeline</span><span class="o">.</span><span class="n">per_frame_list</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">n_frames</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">frame_to_label</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_timeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timeline</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transforms frame_to_label to Timeline</span>
<span class="sd">        Returns:</span>
<span class="sd">            timeline of the resulting annotation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span><span class="p">):</span>
            <span class="n">duration</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">group</span><span class="p">))</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Timeline</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cycle_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates and returns a description of a cycle.</span>
<span class="sd">        Returns:</span>
<span class="sd">            human-readable information about the cycle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cycle_info</span> <span class="o">=</span> <span class="s2">&quot;Annotation doesn&#39;t have a cycle&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cycle_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="p">)</span><span class="si">}</span><span class="s2"> full cycles&quot;</span> \
                         <span class="sa">f</span><span class="s2">&quot; [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">full_length</span><span class="si">}</span><span class="s2"> exactly]</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">cycle_info</span> <span class="o">=</span> <span class="n">cycle_info</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">cycle_info</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Annotation type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Total frames : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Annotation.cycle_info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cycle_info</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates and returns a description of a cycle.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td><p>human-readable information about the cycle.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">cycle_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates and returns a description of a cycle.</span>
<span class="sd">    Returns:</span>
<span class="sd">        human-readable information about the cycle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cycle_info</span> <span class="o">=</span> <span class="s2">&quot;Annotation doesn&#39;t have a cycle&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cycle_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="p">)</span><span class="si">}</span><span class="s2"> full cycles&quot;</span> \
                     <span class="sa">f</span><span class="s2">&quot; [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">full_length</span><span class="si">}</span><span class="s2"> exactly]</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">cycle_info</span> <span class="o">=</span> <span class="n">cycle_info</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">cycle_info</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Annotation.get_timeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_timeline</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Transforms frame_to_label to Timeline</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.Timeline" href="#src.vodex.core.Timeline">Timeline</a></code>
          </td>
          <td><p>timeline of the resulting annotation</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_timeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timeline</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transforms frame_to_label to Timeline</span>
<span class="sd">    Returns:</span>
<span class="sd">        timeline of the resulting annotation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_to_label</span><span class="p">):</span>
        <span class="n">duration</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">group</span><span class="p">))</span>
        <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Timeline</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.Cycle" class="doc doc-heading">
        <code>Cycle</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Information about the repeated cycle of labels. Use it when you have some periodic conditions, like : light
on , light off, light on, light off... will be made of list of labels [light_on, light_off]
that repeat to cover the whole tie of the experiment. All labels must be from the same label group!</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>label_order</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>a list of labels in the right order in which they follow</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>duration</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="numpy">np</span>.<span title="numpy.array">array</span>, list[int]]</code>
          </td>
          <td><p>duration of the corresponding labels, in frames (based on your imaging).
Note that these are frames, not volumes !</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Cycle</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information about the repeated cycle of labels. Use it when you have some periodic conditions, like : light</span>
<span class="sd">    on , light off, light on, light off... will be made of list of labels [light_on, light_off]</span>
<span class="sd">    that repeat to cover the whole tie of the experiment. All labels must be from the same label group!</span>
<span class="sd">    Args:</span>
<span class="sd">        label_order: a list of labels in the right order in which they follow</span>
<span class="sd">        duration: duration of the corresponding labels, in frames (based on your imaging).</span>
<span class="sd">            Note that these are frames, not volumes !</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_order</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">],</span> <span class="n">duration</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]):</span>
        <span class="c1"># check that all labels are from the same group</span>
        <span class="n">label_group</span> <span class="o">=</span> <span class="n">label_order</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">group</span>
        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">label_order</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">label</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">label_group</span><span class="p">,</span> \
                <span class="sa">f</span><span class="s2">&quot;All labels should be from the same group, but got </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">group</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">label_group</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># check that timing is int</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">duration</span><span class="p">),</span> <span class="s2">&quot;timing should be a list of int&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">label_group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span> <span class="o">=</span> <span class="n">label_order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">list_of_int</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
        <span class="c1"># list the length of the cycle, each element is the TimeLabel</span>
        <span class="c1"># TODO : turn it into an index ?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_label_per_frame</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Cycle</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">label_order</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">full_length</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">per_frame_list</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Cycle</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="nf">get_label_per_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A list of labels per frame for one cycle only.</span>
<span class="sd">        Returns:</span>
<span class="sd">            labels per frame for one full cycle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">per_frame_label_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
            <span class="n">per_frame_label_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_time</span> <span class="o">*</span> <span class="p">[</span><span class="n">label</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">per_frame_label_list</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cycle : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Length: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Label </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: for </span><span class="si">{</span><span class="n">label_time</span><span class="si">}</span><span class="s2"> frames</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates how many cycles you need to fully cover n_frames.</span>
<span class="sd">        Args:</span>
<span class="sd">            n_frames: number of frames to cover</span>
<span class="sd">        Returns:</span>
<span class="sd">            number of cycle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n_cycles</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">n_frames</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">n_cycles</span>

    <span class="k">def</span> <span class="nf">fit_labels_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a list of labels corresponding to each frame in the range of n_frames</span>
<span class="sd">        Args:</span>
<span class="sd">            n_frames: number of frames to fit labels to</span>
<span class="sd">        Returns:</span>
<span class="sd">            label_per_frame_list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
        <span class="n">label_per_frame_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span><span class="p">,</span> <span class="n">n_cycles</span><span class="p">)</span>
        <span class="c1"># crop the tail</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">label_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">fit_cycles_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a list of integers (what cycle iteration it is) corresponding to each frame in the range of n_frames</span>

<span class="sd">        Args:</span>
<span class="sd">            n_frames: number of frames to fit cycle iterations to</span>
<span class="sd">        Returns:</span>
<span class="sd">            cycle_per_frame_list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
        <span class="n">cycle_per_frame_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n_cycles</span><span class="p">):</span>
            <span class="n">cycle_per_frame_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="p">)</span>
        <span class="c1"># crop the tail</span>
        <span class="k">return</span> <span class="n">cycle_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">label_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">]</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;timing&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="s1">&#39;label_order&#39;</span><span class="p">:</span> <span class="n">label_order</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
        <span class="n">label_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">TimeLabel</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">ld</span><span class="p">)</span> <span class="k">for</span> <span class="n">ld</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;label_order&#39;</span><span class="p">]]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">label_order</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;timing&#39;</span><span class="p">])</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        j : json string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Cycle.fit_cycles_to_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fit_cycles_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a list of integers (what cycle iteration it is) corresponding to each frame in the range of n_frames</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>number of frames to fit cycle iterations to</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[int]</code>
          </td>
          <td><p>cycle_per_frame_list</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fit_cycles_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a list of integers (what cycle iteration it is) corresponding to each frame in the range of n_frames</span>

<span class="sd">    Args:</span>
<span class="sd">        n_frames: number of frames to fit cycle iterations to</span>
<span class="sd">    Returns:</span>
<span class="sd">        cycle_per_frame_list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
    <span class="n">cycle_per_frame_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n_cycles</span><span class="p">):</span>
        <span class="n">cycle_per_frame_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="p">)</span>
    <span class="c1"># crop the tail</span>
    <span class="k">return</span> <span class="n">cycle_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Cycle.fit_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculates how many cycles you need to fully cover n_frames.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>number of frames to cover</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td><p>number of cycle</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fit_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates how many cycles you need to fully cover n_frames.</span>
<span class="sd">    Args:</span>
<span class="sd">        n_frames: number of frames to cover</span>
<span class="sd">    Returns:</span>
<span class="sd">        number of cycle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n_cycles</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">n_frames</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">n_cycles</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Cycle.fit_labels_to_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fit_labels_to_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a list of labels corresponding to each frame in the range of n_frames</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>n_frames</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>number of frames to fit labels to</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>label_per_frame_list</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fit_labels_to_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a list of labels corresponding to each frame in the range of n_frames</span>
<span class="sd">    Args:</span>
<span class="sd">        n_frames: number of frames to fit labels to</span>
<span class="sd">    Returns:</span>
<span class="sd">        label_per_frame_list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n_cycles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_frames</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
    <span class="n">label_per_frame_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span><span class="p">,</span> <span class="n">n_cycles</span><span class="p">)</span>
    <span class="c1"># crop the tail</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">label_per_frame_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">n_frames</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Cycle.from_json" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">j</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>j : json string</p>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    j : json string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Cycle.get_label_per_frame" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_label_per_frame</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>A list of labels per frame for one cycle only.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>labels per frame for one full cycle</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_label_per_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A list of labels per frame for one cycle only.</span>
<span class="sd">    Returns:</span>
<span class="sd">        labels per frame for one full cycle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">per_frame_label_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
        <span class="n">per_frame_label_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_time</span> <span class="o">*</span> <span class="p">[</span><span class="n">label</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">per_frame_label_list</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.Experiment" class="doc doc-heading">
        <code>Experiment</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Information about the experiment.
Will use all the information you provided to figure out what frames to give you based on your request.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>db_reader</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.dbmethods.DbReader" href="../dbmethods/#src.vodex.dbmethods.DbReader">DbReader</a></code>
          </td>
          <td><p>a DbReader object connected to the database with the experiment description</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Experiment</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information about the experiment.</span>
<span class="sd">    Will use all the information you provided to figure out what frames to give you based on your request.</span>
<span class="sd">    Args:</span>
<span class="sd">        db_reader: a DbReader object connected to the database with the experiment description</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_reader</span><span class="p">:</span> <span class="n">DbReader</span><span class="p">):</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">db_reader</span><span class="p">,</span> <span class="n">DbReader</span><span class="p">),</span> <span class="s2">&quot;Need DbReader to initialise the Experiment&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_reader</span>
        <span class="c1"># will add the loader the first time you are loading anything</span>
        <span class="c1"># in load_frames() or load_volumes()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">volume_manager</span><span class="p">:</span> <span class="n">VolumeManager</span><span class="p">,</span> <span class="n">annotations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Annotation</span><span class="p">],</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a database instance and initialises the experiment.</span>
<span class="sd">        Args:</span>
<span class="sd">            volume_manager:</span>
<span class="sd">            annotations:</span>
<span class="sd">            verbose: whether to print the information about Filemanager, Volumemanager and Annotations on the screen.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">volume_manager</span><span class="o">.</span><span class="n">file_manager</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">volume_manager</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">annotations</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">annotation</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">annotation</span><span class="o">.</span><span class="n">cycle_info</span><span class="p">())</span>

        <span class="n">db</span> <span class="o">=</span> <span class="n">DbWriter</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
        <span class="n">db</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span><span class="n">volumes</span><span class="o">=</span><span class="n">volume_manager</span><span class="p">,</span> <span class="n">annotations</span><span class="o">=</span><span class="n">annotations</span><span class="p">)</span>
        <span class="n">db_reader</span> <span class="o">=</span> <span class="n">DbReader</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">db_reader</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves a database into a file.</span>
<span class="sd">        Args:</span>
<span class="sd">            file_name: full path to a file to save database.</span>
<span class="sd">                (Usually the filename would end with .db)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DbWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotations</span><span class="p">:</span> <span class="p">[</span><span class="n">Annotation</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds annotations to existing experiment.</span>
<span class="sd">        Does NOT save the changes to disc! run self.save() to save</span>
<span class="sd">        Args:</span>
<span class="sd">            annotations: a list of annotations to add to the database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DbWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span><span class="o">.</span><span class="n">add_annotations</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close database connection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves a database into a file.</span>
<span class="sd">        Args:</span>
<span class="sd">            file_name: full path to a file to load database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">db_reader</span> <span class="o">=</span> <span class="n">DbReader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">db_reader</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">choose_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditions</span><span class="p">:</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">],</span> <span class="n">logic</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;and&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects the frames that correspond to specified conditions;</span>
<span class="sd">        Uses &quot;or&quot; or &quot;and&quot; between the conditions depending on logic.</span>
<span class="sd">        To load the selected frames, use load_frames().</span>
<span class="sd">        Args:</span>
<span class="sd">            conditions: a list of conditions on the annotation labels</span>
<span class="sd">                in a form [(group, name),(group, name), ...] where group is a string for the annotation type</span>
<span class="sd">                and name is the name of the label of that annotation type. For example [(&#39;light&#39;, &#39;on&#39;), (&#39;shape&#39;,&#39;c&#39;)]</span>
<span class="sd">            logic: &quot;and&quot; or &quot;or&quot; , default is &quot;and&quot;.</span>
<span class="sd">        Returns:</span>
<span class="sd">            list of frame ids that were chosen. Remember that frame numbers start at 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;and&quot;</span> <span class="ow">or</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;or&quot;</span><span class="p">,</span> \
            <span class="s1">&#39;between_group_logic should be equal to &quot;and&quot; or &quot;or&quot;&#39;</span>
        <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;and&quot;</span><span class="p">:</span>
            <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_and_frames_per_annotations</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;or&quot;</span><span class="p">:</span>
            <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_or_frames_per_annotations</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">frames</span>

    <span class="k">def</span> <span class="nf">choose_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditions</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]],</span> <span class="n">logic</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects only full volumes that correspond to specified conditions;</span>
<span class="sd">        Uses &quot;or&quot; or &quot;and&quot; between the conditions depending on logic.</span>
<span class="sd">        To load the selected volumes, use load_volumes()</span>
<span class="sd">        Args:</span>
<span class="sd">            verbose: Whether to print the information about how many frames were chose/ dropped</span>
<span class="sd">            conditions: a list of conditions on the annotation labels</span>
<span class="sd">                in a form [(group, name),(group, name), ...] where group is a string for the annotation type</span>
<span class="sd">                and name is the name of the label of that annotation type. For example [(&#39;light&#39;, &#39;on&#39;), (&#39;shape&#39;,&#39;c&#39;)]</span>
<span class="sd">            logic: &quot;and&quot; or &quot;or&quot; , default is &quot;and&quot;.</span>
<span class="sd">        Returns:</span>
<span class="sd">            list of volumes and list of frame ids that were chosen.</span>
<span class="sd">            Remember that frame numbers start at 1, but volumes start at 0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO : make everything start at 1 ????</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;conditions must be a list or a tuple,&quot;</span> \
                                                                              <span class="sa">f</span><span class="s2">&quot; but got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="si">}</span><span class="s2"> instead&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">conditions</span> <span class="o">=</span> <span class="p">[</span><span class="n">conditions</span><span class="p">]</span>

        <span class="c1"># get all the frames that correspond to the conditions</span>
        <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">choose_frames</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">logic</span><span class="o">=</span><span class="n">logic</span><span class="p">)</span>
        <span class="n">n_frames</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
        <span class="c1"># leave only such frames that correspond to full volumes</span>
        <span class="c1"># TODO : why do I even need to return frames?</span>
        <span class="n">volumes</span><span class="p">,</span> <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">choose_full_volumes</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
        <span class="n">n_dropped</span> <span class="o">=</span> <span class="n">n_frames</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Choosing only full volumes. &quot;</span>
                  <span class="sa">f</span><span class="s2">&quot;Dropped </span><span class="si">{</span><span class="n">n_dropped</span><span class="si">}</span><span class="s2"> frames, kept </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">volumes</span>

    <span class="k">def</span> <span class="nf">load_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volumes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load volumes. Will load the specified full volumes.</span>
<span class="sd">        All the returned volumes or slices should have the same number of frames in them.</span>
<span class="sd">        Args:</span>
<span class="sd">            volumes: the indexes of volumes to load.</span>
<span class="sd">            verbose: Whether to print the information about the loading</span>
<span class="sd">        Returns:</span>
<span class="sd">            4D array with the loaded volumes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_frames_per_volumes</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span>

        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">prepare_frames_for_loading</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
        <span class="c1"># unpack</span>
        <span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">,</span> <span class="n">file_ids</span><span class="p">,</span> <span class="n">frame_in_file</span><span class="p">,</span> <span class="n">volumes</span> <span class="o">=</span> <span class="n">info</span>
        <span class="c1"># make full paths to files ( remember file ids start with 1 )</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="n">file_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">file_id</span> <span class="ow">in</span> <span class="n">file_ids</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="o">=</span> <span class="n">ImageLoader</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">volumes_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_volumes</span><span class="p">(</span><span class="n">frame_in_file</span><span class="p">,</span>
                                               <span class="n">files</span><span class="p">,</span>
                                               <span class="n">volumes</span><span class="p">,</span>
                                               <span class="n">show_file_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                               <span class="n">show_progress</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">volumes_img</span>

    <span class="k">def</span> <span class="nf">list_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of all the volumes IDs in the experiment.</span>
<span class="sd">        If partial volumes are present: for &quot;head&quot; returns -1, for &quot;tail&quot; returns -2.</span>
<span class="sd">        Returns:</span>
<span class="sd">            list of volume IDs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">volume_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_volume_list</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">volume_list</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The are some frames at the beginning of the recording &quot;</span>
                          <span class="sa">f</span><span class="s2">&quot;that don&#39;t correspond to a full volume.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">volume_list</span> <span class="o">==</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The are some frames at the end of the recording &quot;</span>
                          <span class="sa">f</span><span class="s2">&quot;that don&#39;t correspond to a full volume.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">volume_list</span>

    <span class="k">def</span> <span class="nf">list_conditions_per_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">as_volumes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of conditions per cycle.</span>
<span class="sd">        Args:</span>
<span class="sd">            annotation_type: The name of the annotation for which to get the conditions list</span>
<span class="sd">            as_volumes: weather to return conditions per frame (default) or per volume.</span>
<span class="sd">                If as_volumes is true, it is expected that the conditions are not changing in the middle of the volume.</span>
<span class="sd">                Will throw an error if it happens.</span>
<span class="sd">        Returns:</span>
<span class="sd">            list of the condition ids ( condition per frame or per volume) and corresponding condition names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO : check if empty</span>
        <span class="k">if</span> <span class="n">as_volumes</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">condition_ids</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_conditionIds_per_cycle_per_volumes</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
            <span class="n">fpv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_fpv</span><span class="p">()</span>
            <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">==</span> <span class="n">fpv</span><span class="p">),</span> <span class="s2">&quot;Can&#39;t list_conditions_per_cycle with as_volumes=True: &quot;</span> \
                                                   <span class="s2">&quot;some conditions don&#39;t cover the whole volume.&quot;</span> \
                                                   <span class="s2">&quot;You might want to get conditions per frame,&quot;</span> \
                                                   <span class="s2">&quot; by setting as_volumes=False&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">condition_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_conditionIds_per_cycle_per_frame</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
        <span class="n">names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">_get_Name_from_AnnotationTypeLabels</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">condition_ids</span><span class="p">,</span> <span class="n">names</span>

    <span class="k">def</span> <span class="nf">list_cycle_iterations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">as_volumes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of cycle iteratoins.</span>
<span class="sd">        Args:</span>
<span class="sd">            annotation_type: The name of the annotation for which to get the cycle iteratoins list</span>
<span class="sd">            as_volumes: weather to return cycle iteratoins per frame ( default) or per volume.</span>
<span class="sd">                If as_volumes is true, it is expected that the cycle iteratoins are not changing in the middle of the volume.</span>
<span class="sd">                Will throw an error if it happens.</span>
<span class="sd">            as_volumes: bool</span>
<span class="sd">        Returns:</span>
<span class="sd">            list of the condition ids (cycle iterations per frame or per volume)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO : check if empty</span>
        <span class="k">if</span> <span class="n">as_volumes</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">cycle_its</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_cycleIterations_per_volumes</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
            <span class="n">fpv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_fpv</span><span class="p">()</span>
            <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">==</span> <span class="n">fpv</span><span class="p">),</span> <span class="s2">&quot;Can&#39;t list_cycle_iteratoins with as_volumes=True: &quot;</span> \
                                                   <span class="s2">&quot;some iteratoins don&#39;t cover the whole volume.&quot;</span> \
                                                   <span class="s2">&quot;You might want to get iteratoins per frame,&quot;</span> \
                                                   <span class="s2">&quot; by setting as_volumes=False&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">cycle_its</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_cycleIterations_per_frame</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cycle_its</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">summary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints a detailed description of the experiment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.add_annotations" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_annotations</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Adds annotations to existing experiment.
Does NOT save the changes to disc! run self.save() to save</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>annotations</code></td>
          <td>
                <code>[<a class="autorefs autorefs-internal" title="src.vodex.core.Annotation" href="#src.vodex.core.Annotation">Annotation</a>]</code>
          </td>
          <td><p>a list of annotations to add to the database.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotations</span><span class="p">:</span> <span class="p">[</span><span class="n">Annotation</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds annotations to existing experiment.</span>
<span class="sd">    Does NOT save the changes to disc! run self.save() to save</span>
<span class="sd">    Args:</span>
<span class="sd">        annotations: a list of annotations to add to the database.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">DbWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span><span class="o">.</span><span class="n">add_annotations</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.choose_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">choose_frames</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">logic</span><span class="o">=</span><span class="s1">&#39;and&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Selects the frames that correspond to specified conditions;
Uses "or" or "and" between the conditions depending on logic.
To load the selected frames, use load_frames().</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>conditions</code></td>
          <td>
                <code>[tuple]</code>
          </td>
          <td><p>a list of conditions on the annotation labels
in a form [(group, name),(group, name), ...] where group is a string for the annotation type
and name is the name of the label of that annotation type. For example [('light', 'on'), ('shape','c')]</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>logic</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>"and" or "or" , default is "and".</p></td>
          <td>
                <code>&#39;and&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>list of frame ids that were chosen. Remember that frame numbers start at 1.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">choose_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditions</span><span class="p">:</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">],</span> <span class="n">logic</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;and&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Selects the frames that correspond to specified conditions;</span>
<span class="sd">    Uses &quot;or&quot; or &quot;and&quot; between the conditions depending on logic.</span>
<span class="sd">    To load the selected frames, use load_frames().</span>
<span class="sd">    Args:</span>
<span class="sd">        conditions: a list of conditions on the annotation labels</span>
<span class="sd">            in a form [(group, name),(group, name), ...] where group is a string for the annotation type</span>
<span class="sd">            and name is the name of the label of that annotation type. For example [(&#39;light&#39;, &#39;on&#39;), (&#39;shape&#39;,&#39;c&#39;)]</span>
<span class="sd">        logic: &quot;and&quot; or &quot;or&quot; , default is &quot;and&quot;.</span>
<span class="sd">    Returns:</span>
<span class="sd">        list of frame ids that were chosen. Remember that frame numbers start at 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;and&quot;</span> <span class="ow">or</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;or&quot;</span><span class="p">,</span> \
        <span class="s1">&#39;between_group_logic should be equal to &quot;and&quot; or &quot;or&quot;&#39;</span>
    <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;and&quot;</span><span class="p">:</span>
        <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_and_frames_per_annotations</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">logic</span> <span class="o">==</span> <span class="s2">&quot;or&quot;</span><span class="p">:</span>
        <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_or_frames_per_annotations</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">frames</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.choose_volumes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">choose_volumes</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">logic</span><span class="o">=</span><span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Selects only full volumes that correspond to specified conditions;
Uses "or" or "and" between the conditions depending on logic.
To load the selected volumes, use load_volumes()</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>verbose</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Whether to print the information about how many frames were chose/ dropped</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>conditions</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[tuple, list[tuple]]</code>
          </td>
          <td><p>a list of conditions on the annotation labels
in a form [(group, name),(group, name), ...] where group is a string for the annotation type
and name is the name of the label of that annotation type. For example [('light', 'on'), ('shape','c')]</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>logic</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>"and" or "or" , default is "and".</p></td>
          <td>
                <code>&#39;and&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>list of volumes and list of frame ids that were chosen.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Remember that frame numbers start at 1, but volumes start at 0.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">choose_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditions</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]],</span> <span class="n">logic</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Selects only full volumes that correspond to specified conditions;</span>
<span class="sd">    Uses &quot;or&quot; or &quot;and&quot; between the conditions depending on logic.</span>
<span class="sd">    To load the selected volumes, use load_volumes()</span>
<span class="sd">    Args:</span>
<span class="sd">        verbose: Whether to print the information about how many frames were chose/ dropped</span>
<span class="sd">        conditions: a list of conditions on the annotation labels</span>
<span class="sd">            in a form [(group, name),(group, name), ...] where group is a string for the annotation type</span>
<span class="sd">            and name is the name of the label of that annotation type. For example [(&#39;light&#39;, &#39;on&#39;), (&#39;shape&#39;,&#39;c&#39;)]</span>
<span class="sd">        logic: &quot;and&quot; or &quot;or&quot; , default is &quot;and&quot;.</span>
<span class="sd">    Returns:</span>
<span class="sd">        list of volumes and list of frame ids that were chosen.</span>
<span class="sd">        Remember that frame numbers start at 1, but volumes start at 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO : make everything start at 1 ????</span>

    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;conditions must be a list or a tuple,&quot;</span> \
                                                                          <span class="sa">f</span><span class="s2">&quot; but got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="si">}</span><span class="s2"> instead&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="n">conditions</span> <span class="o">=</span> <span class="p">[</span><span class="n">conditions</span><span class="p">]</span>

    <span class="c1"># get all the frames that correspond to the conditions</span>
    <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">choose_frames</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">logic</span><span class="o">=</span><span class="n">logic</span><span class="p">)</span>
    <span class="n">n_frames</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
    <span class="c1"># leave only such frames that correspond to full volumes</span>
    <span class="c1"># TODO : why do I even need to return frames?</span>
    <span class="n">volumes</span><span class="p">,</span> <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">choose_full_volumes</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
    <span class="n">n_dropped</span> <span class="o">=</span> <span class="n">n_frames</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Choosing only full volumes. &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;Dropped </span><span class="si">{</span><span class="n">n_dropped</span><span class="si">}</span><span class="s2"> frames, kept </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">volumes</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.close" class="doc doc-heading">
<code class="highlight language-python"><span class="n">close</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Close database connection.</p>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Close database connection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.create" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create</span><span class="p">(</span><span class="n">volume_manager</span><span class="p">,</span> <span class="n">annotations</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates a database instance and initialises the experiment.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>volume_manager</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.VolumeManager" href="#src.vodex.core.VolumeManager">VolumeManager</a></code>
          </td>
          <td></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>annotations</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="src.vodex.core.Annotation" href="#src.vodex.core.Annotation">Annotation</a>]</code>
          </td>
          <td></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>verbose</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>whether to print the information about Filemanager, Volumemanager and Annotations on the screen.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">volume_manager</span><span class="p">:</span> <span class="n">VolumeManager</span><span class="p">,</span> <span class="n">annotations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Annotation</span><span class="p">],</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a database instance and initialises the experiment.</span>
<span class="sd">    Args:</span>
<span class="sd">        volume_manager:</span>
<span class="sd">        annotations:</span>
<span class="sd">        verbose: whether to print the information about Filemanager, Volumemanager and Annotations on the screen.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">volume_manager</span><span class="o">.</span><span class="n">file_manager</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">volume_manager</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">annotations</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">annotation</span><span class="o">.</span><span class="n">cycle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">annotation</span><span class="o">.</span><span class="n">cycle_info</span><span class="p">())</span>

    <span class="n">db</span> <span class="o">=</span> <span class="n">DbWriter</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span><span class="n">volumes</span><span class="o">=</span><span class="n">volume_manager</span><span class="p">,</span> <span class="n">annotations</span><span class="o">=</span><span class="n">annotations</span><span class="p">)</span>
    <span class="n">db_reader</span> <span class="o">=</span> <span class="n">DbReader</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">db_reader</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.list_conditions_per_cycle" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_conditions_per_cycle</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">,</span> <span class="n">as_volumes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a list of conditions per cycle.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>annotation_type</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>The name of the annotation for which to get the conditions list</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>as_volumes</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>weather to return conditions per frame (default) or per volume.
If as_volumes is true, it is expected that the conditions are not changing in the middle of the volume.
Will throw an error if it happens.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[int], list[str]</code>
          </td>
          <td><p>list of the condition ids ( condition per frame or per volume) and corresponding condition names.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">list_conditions_per_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">as_volumes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of conditions per cycle.</span>
<span class="sd">    Args:</span>
<span class="sd">        annotation_type: The name of the annotation for which to get the conditions list</span>
<span class="sd">        as_volumes: weather to return conditions per frame (default) or per volume.</span>
<span class="sd">            If as_volumes is true, it is expected that the conditions are not changing in the middle of the volume.</span>
<span class="sd">            Will throw an error if it happens.</span>
<span class="sd">    Returns:</span>
<span class="sd">        list of the condition ids ( condition per frame or per volume) and corresponding condition names.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO : check if empty</span>
    <span class="k">if</span> <span class="n">as_volumes</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">condition_ids</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_conditionIds_per_cycle_per_volumes</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
        <span class="n">fpv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_fpv</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">==</span> <span class="n">fpv</span><span class="p">),</span> <span class="s2">&quot;Can&#39;t list_conditions_per_cycle with as_volumes=True: &quot;</span> \
                                               <span class="s2">&quot;some conditions don&#39;t cover the whole volume.&quot;</span> \
                                               <span class="s2">&quot;You might want to get conditions per frame,&quot;</span> \
                                               <span class="s2">&quot; by setting as_volumes=False&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">condition_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_conditionIds_per_cycle_per_frame</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
    <span class="n">names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">_get_Name_from_AnnotationTypeLabels</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">condition_ids</span><span class="p">,</span> <span class="n">names</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.list_cycle_iterations" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_cycle_iterations</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">,</span> <span class="n">as_volumes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a list of cycle iteratoins.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>annotation_type</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>The name of the annotation for which to get the cycle iteratoins list</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>as_volumes</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>weather to return cycle iteratoins per frame ( default) or per volume.
If as_volumes is true, it is expected that the cycle iteratoins are not changing in the middle of the volume.
Will throw an error if it happens.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>as_volumes</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>bool</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[int]</code>
          </td>
          <td><p>list of the condition ids (cycle iterations per frame or per volume)</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">list_cycle_iterations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">as_volumes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of cycle iteratoins.</span>
<span class="sd">    Args:</span>
<span class="sd">        annotation_type: The name of the annotation for which to get the cycle iteratoins list</span>
<span class="sd">        as_volumes: weather to return cycle iteratoins per frame ( default) or per volume.</span>
<span class="sd">            If as_volumes is true, it is expected that the cycle iteratoins are not changing in the middle of the volume.</span>
<span class="sd">            Will throw an error if it happens.</span>
<span class="sd">        as_volumes: bool</span>
<span class="sd">    Returns:</span>
<span class="sd">        list of the condition ids (cycle iterations per frame or per volume)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO : check if empty</span>
    <span class="k">if</span> <span class="n">as_volumes</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">cycle_its</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_cycleIterations_per_volumes</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>
        <span class="n">fpv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_fpv</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">==</span> <span class="n">fpv</span><span class="p">),</span> <span class="s2">&quot;Can&#39;t list_cycle_iteratoins with as_volumes=True: &quot;</span> \
                                               <span class="s2">&quot;some iteratoins don&#39;t cover the whole volume.&quot;</span> \
                                               <span class="s2">&quot;You might want to get iteratoins per frame,&quot;</span> \
                                               <span class="s2">&quot; by setting as_volumes=False&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">cycle_its</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_cycleIterations_per_frame</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">cycle_its</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.list_volumes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_volumes</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a list of all the volumes IDs in the experiment.
If partial volumes are present: for "head" returns -1, for "tail" returns -2.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span>[int]</code>
          </td>
          <td><p>list of volume IDs</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span>
<span class="normal">984</span>
<span class="normal">985</span>
<span class="normal">986</span>
<span class="normal">987</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">list_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of all the volumes IDs in the experiment.</span>
<span class="sd">    If partial volumes are present: for &quot;head&quot; returns -1, for &quot;tail&quot; returns -2.</span>
<span class="sd">    Returns:</span>
<span class="sd">        list of volume IDs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">volume_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_volume_list</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">volume_list</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The are some frames at the beginning of the recording &quot;</span>
                      <span class="sa">f</span><span class="s2">&quot;that don&#39;t correspond to a full volume.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">volume_list</span> <span class="o">==</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The are some frames at the end of the recording &quot;</span>
                      <span class="sa">f</span><span class="s2">&quot;that don&#39;t correspond to a full volume.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">volume_list</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.load" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Saves a database into a file.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_name</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="pathlib.Path">Path</span>, str]</code>
          </td>
          <td><p>full path to a file to load database.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves a database into a file.</span>
<span class="sd">    Args:</span>
<span class="sd">        file_name: full path to a file to load database.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">db_reader</span> <span class="o">=</span> <span class="n">DbReader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">db_reader</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.load_volumes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_volumes</span><span class="p">(</span><span class="n">volumes</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Load volumes. Will load the specified full volumes.
All the returned volumes or slices should have the same number of frames in them.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>volumes</code></td>
          <td>
                <code>list[int]</code>
          </td>
          <td><p>the indexes of volumes to load.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>verbose</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Whether to print the information about the loading</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td><p>4D array with the loaded volumes.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volumes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load volumes. Will load the specified full volumes.</span>
<span class="sd">    All the returned volumes or slices should have the same number of frames in them.</span>
<span class="sd">    Args:</span>
<span class="sd">        volumes: the indexes of volumes to load.</span>
<span class="sd">        verbose: Whether to print the information about the loading</span>
<span class="sd">    Returns:</span>
<span class="sd">        4D array with the loaded volumes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_frames_per_volumes</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span>

    <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">prepare_frames_for_loading</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
    <span class="c1"># unpack</span>
    <span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">,</span> <span class="n">file_ids</span><span class="p">,</span> <span class="n">frame_in_file</span><span class="p">,</span> <span class="n">volumes</span> <span class="o">=</span> <span class="n">info</span>
    <span class="c1"># make full paths to files ( remember file ids start with 1 )</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="n">file_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">file_id</span> <span class="ow">in</span> <span class="n">file_ids</span><span class="p">]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="o">=</span> <span class="n">ImageLoader</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="n">volumes_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_volumes</span><span class="p">(</span><span class="n">frame_in_file</span><span class="p">,</span>
                                           <span class="n">files</span><span class="p">,</span>
                                           <span class="n">volumes</span><span class="p">,</span>
                                           <span class="n">show_file_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                           <span class="n">show_progress</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">volumes_img</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.save" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Saves a database into a file.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_name</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="pathlib.Path">Path</span>, str]</code>
          </td>
          <td><p>full path to a file to save database.
(Usually the filename would end with .db)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves a database into a file.</span>
<span class="sd">    Args:</span>
<span class="sd">        file_name: full path to a file to save database.</span>
<span class="sd">            (Usually the filename would end with .db)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">DbWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Experiment.summary" class="doc doc-heading">
<code class="highlight language-python"><span class="n">summary</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Prints a detailed description of the experiment.</p>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">summary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Prints a detailed description of the experiment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.FileManager" class="doc doc-heading">
        <code>FileManager</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Collects and stores the information about all the image files.
By default, it will search for all the files with the provided file extension
in the provided data director and order them alphabetically.
If a list of file names is provided, will use these files in the provided order.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data_dir</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="pathlib.Path">Path</span>]</code>
          </td>
          <td><p>path to the folder with the files, ends with "/" or "\"</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>file_names</code></td>
          <td>
                <code>list[str]</code>
          </td>
          <td><p>names of files relative to the data_dir (TODO:?)</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>frames_per_file</code></td>
          <td>
                <code>list[int]</code>
          </td>
          <td><p>number of frames in each file.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>file_extension</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>file extension to search for (if files are not provided)</p></td>
          <td>
                <code>&#39;.tif&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data_dir</code></td>
          <td>
                <code><span title="pathlib.Path">Path</span></code>
          </td>
          <td><p>the directory with all the imaging data</p></td>
        </tr>
        <tr>
          <td><code>file_names</code></td>
          <td>
                <code>list[str]</code>
          </td>
          <td><p>names of files relative to the data_dir (TODO:?)</p></td>
        </tr>
        <tr>
          <td><code>loader</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.loaders.ImageLoader" href="../loaders/#src.vodex.loaders.ImageLoader">ImageLoader</a></code>
          </td>
          <td><p>initialised image loader (see loaders.ImageLoader for more details)</p></td>
        </tr>
        <tr>
          <td><code>num_frames</code></td>
          <td>
                <code>list[int]</code>
          </td>
          <td><p>a number of frames per file</p></td>
        </tr>
        <tr>
          <td><code>n_files</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>total number of image files</p></td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">FileManager</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Collects and stores the information about all the image files.</span>
<span class="sd">    By default, it will search for all the files with the provided file extension</span>
<span class="sd">    in the provided data director and order them alphabetically.</span>
<span class="sd">    If a list of file names is provided, will use these files in the provided order.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_dir: path to the folder with the files, ends with &quot;/&quot; or &quot;\\&quot;</span>
<span class="sd">        file_names: names of files relative to the data_dir (TODO:?)</span>
<span class="sd">        frames_per_file: number of frames in each file.</span>
<span class="sd">        file_extension: file extension to search for (if files are not provided)</span>

<span class="sd">    Attributes:</span>
<span class="sd">        data_dir: the directory with all the imaging data</span>
<span class="sd">        file_names: names of files relative to the data_dir (TODO:?)</span>
<span class="sd">        loader: initialised image loader (see loaders.ImageLoader for more details)</span>
<span class="sd">        num_frames: a number of frames per file</span>
<span class="sd">        n_files: total number of image files</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span> <span class="n">file_extension</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;.tif&quot;</span><span class="p">,</span>
                 <span class="n">file_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="c1"># 1. get data_dir and check it exists</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">is_dir</span><span class="p">(),</span> <span class="sa">f</span><span class="s2">&quot;No directory </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># 2. get files</span>
        <span class="k">if</span> <span class="n">file_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># if files are not provided , search for tiffs in the data_dir</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_files</span><span class="p">(</span><span class="n">file_extension</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># if a list of files is provided, check it&#39;s in the folder</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_files</span><span class="p">(</span><span class="n">file_names</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># 3. Initialise ImageLoader</span>
        <span class="c1">#    will pick the image loader that works with the provided file type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="p">:</span> <span class="n">ImageLoader</span> <span class="o">=</span> <span class="n">ImageLoader</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

        <span class="c1"># 4. Get number of frames per file</span>
        <span class="k">if</span> <span class="n">frames_per_file</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># if number of frames not provided , search for tiffs in the data_dir</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frames_per_file</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># if provided ... we&#39;ll trust you - hope these numbers are correct</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">frames_per_file</span>
        <span class="c1"># check that the type is int</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span><span class="p">),</span> \
            <span class="s2">&quot;self.num_frames should be a list of int&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">n_files</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Image files information :</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;files directory: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;files [number of frames]: </span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">i_file</span><span class="p">,</span> <span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">num_frames</span><span class="p">))</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span><span class="p">)):</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i_file</span><span class="si">}</span><span class="s2">) </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> [</span><span class="si">{</span><span class="n">num_frames</span><span class="si">}</span><span class="s2">]</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">FileManager</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">data_dir</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">file_names</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">loader</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">num_frames</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">num_frames</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n_files</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n_files</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">FileManager</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="nf">find_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_extension</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches for files ending with the provided file extension in the data directory.</span>
<span class="sd">        Args:</span>
<span class="sd">            file_extension: extension of files to search for</span>
<span class="sd">        Returns:</span>
<span class="sd">            A list of file names. File names are with the extension, relative to the data directory</span>
<span class="sd">            (names only, not full paths to files)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;*</span><span class="si">{</span><span class="n">file_extension</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
        <span class="n">file_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">file_names</span>

    <span class="c1"># TODO : probably rename it?</span>
    <span class="k">def</span> <span class="nf">check_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a list of files checks that files are in the data directory.</span>
<span class="sd">        Args:</span>
<span class="sd">            file_names: list of filenames to check.</span>
<span class="sd">        Returns:</span>
<span class="sd">            If the files are all present in the directory,</span>
<span class="sd">            returns the files ( full paths to the files ) and file_names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_names</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">file</span><span class="o">.</span><span class="n">is_file</span><span class="p">(),</span> <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> is not found&quot;</span>
        <span class="k">return</span> <span class="n">files</span><span class="p">,</span> <span class="n">file_names</span>

    <span class="k">def</span> <span class="nf">get_frames_per_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the number of frames per file.</span>
<span class="sd">        Returns:</span>
<span class="sd">            a list with number of frames per file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frames_per_file</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">:</span>
            <span class="n">n_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">get_frames_in_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
            <span class="n">frames_per_file</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">frames_per_file</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.FileManager.check_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_files</span><span class="p">(</span><span class="n">file_names</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Given a list of files checks that files are in the data directory.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_names</code></td>
          <td>
                <code>list[str]</code>
          </td>
          <td><p>list of filenames to check.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Union">Union</span>[list[str], list[<span title="pathlib.Path">Path</span>]], list[str]</code>
          </td>
          <td><p>If the files are all present in the directory,</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="typing.Union">Union</span>[list[str], list[<span title="pathlib.Path">Path</span>]], list[str]</code>
          </td>
          <td><p>returns the files ( full paths to the files ) and file_names.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a list of files checks that files are in the data directory.</span>
<span class="sd">    Args:</span>
<span class="sd">        file_names: list of filenames to check.</span>
<span class="sd">    Returns:</span>
<span class="sd">        If the files are all present in the directory,</span>
<span class="sd">        returns the files ( full paths to the files ) and file_names.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_names</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">file</span><span class="o">.</span><span class="n">is_file</span><span class="p">(),</span> <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> is not found&quot;</span>
    <span class="k">return</span> <span class="n">files</span><span class="p">,</span> <span class="n">file_names</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.FileManager.find_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_files</span><span class="p">(</span><span class="n">file_extension</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Searches for files ending with the provided file extension in the data directory.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_extension</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>extension of files to search for</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[str]</code>
          </td>
          <td><p>A list of file names. File names are with the extension, relative to the data directory</p></td>
        </tr>
        <tr>
          <td>
                <code>list[str]</code>
          </td>
          <td><p>(names only, not full paths to files)</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">find_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_extension</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Searches for files ending with the provided file extension in the data directory.</span>
<span class="sd">    Args:</span>
<span class="sd">        file_extension: extension of files to search for</span>
<span class="sd">    Returns:</span>
<span class="sd">        A list of file names. File names are with the extension, relative to the data directory</span>
<span class="sd">        (names only, not full paths to files)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;*</span><span class="si">{</span><span class="n">file_extension</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
    <span class="n">file_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">file_names</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.FileManager.get_frames_per_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_frames_per_file</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get the number of frames per file.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[int]</code>
          </td>
          <td><p>a list with number of frames per file.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_frames_per_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the number of frames per file.</span>
<span class="sd">    Returns:</span>
<span class="sd">        a list with number of frames per file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">frames_per_file</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_names</span><span class="p">:</span>
        <span class="n">n_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">get_frames_in_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
        <span class="n">frames_per_file</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n_frames</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">frames_per_file</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.FrameManager" class="doc doc-heading">
        <code>FrameManager</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Deals with frames. Which frames correspond to a volume / cycle/ condition.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_manager</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.FileManager" href="#src.vodex.core.FileManager">FileManager</a></code>
          </td>
          <td><p>info about the files.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">FrameManager</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deals with frames. Which frames correspond to a volume / cycle/ condition.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_manager: info about the files.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_manager</span><span class="p">:</span> <span class="n">FileManager</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span> <span class="o">=</span> <span class="n">file_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_in_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_mapping</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">FrameManager</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">file_manager</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_file</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_file</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_in_file</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_in_file</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">FrameManager</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">file_manager</span> <span class="o">=</span> <span class="n">FileManager</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="o">=</span><span class="n">file_names</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="o">=</span><span class="n">frames_per_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">file_manager</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_frame_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates frame range in each file and returns a file index for each frame and frame index in the file.</span>
<span class="sd">        Used to figure out in which stack the requested frames is.</span>
<span class="sd">        Frame number starts at 0.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Two lists mapping frames to files. &#39;frame_to_file&#39; is a list of length equal to the total number of</span>
<span class="sd">            frames in all the files, where each element corresponds to a frame and contains the file index,</span>
<span class="sd">            of the file where that frame can be found. &#39;in_file_frame&#39; is a list of length equal to the total number of</span>
<span class="sd">            frames in all the files, where each element corresponds to the index of the frame inside the file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frame_to_file</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">frame_in_file</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">file_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">n_files</span><span class="p">):</span>
            <span class="n">n_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">num_frames</span><span class="p">[</span><span class="n">file_idx</span><span class="p">]</span>
            <span class="n">frame_to_file</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">n_frames</span> <span class="o">*</span> <span class="p">[</span><span class="n">file_idx</span><span class="p">])</span>
            <span class="n">frame_in_file</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n_frames</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">frame_to_file</span><span class="p">,</span> <span class="n">frame_in_file</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Total </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">num_frames</span><span class="p">)</span><span class="si">}</span><span class="s2"> frames.&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.FrameManager.get_frame_mapping" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_frame_mapping</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculates frame range in each file and returns a file index for each frame and frame index in the file.
Used to figure out in which stack the requested frames is.
Frame number starts at 0.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[int], list[int]</code>
          </td>
          <td><p>Two lists mapping frames to files. 'frame_to_file' is a list of length equal to the total number of</p></td>
        </tr>
        <tr>
          <td>
                <code>list[int], list[int]</code>
          </td>
          <td><p>frames in all the files, where each element corresponds to a frame and contains the file index,</p></td>
        </tr>
        <tr>
          <td>
                <code>list[int], list[int]</code>
          </td>
          <td><p>of the file where that frame can be found. 'in_file_frame' is a list of length equal to the total number of</p></td>
        </tr>
        <tr>
          <td>
                <code>list[int], list[int]</code>
          </td>
          <td><p>frames in all the files, where each element corresponds to the index of the frame inside the file.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_frame_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates frame range in each file and returns a file index for each frame and frame index in the file.</span>
<span class="sd">    Used to figure out in which stack the requested frames is.</span>
<span class="sd">    Frame number starts at 0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Two lists mapping frames to files. &#39;frame_to_file&#39; is a list of length equal to the total number of</span>
<span class="sd">        frames in all the files, where each element corresponds to a frame and contains the file index,</span>
<span class="sd">        of the file where that frame can be found. &#39;in_file_frame&#39; is a list of length equal to the total number of</span>
<span class="sd">        frames in all the files, where each element corresponds to the index of the frame inside the file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">frame_to_file</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">frame_in_file</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">file_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">n_files</span><span class="p">):</span>
        <span class="n">n_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">num_frames</span><span class="p">[</span><span class="n">file_idx</span><span class="p">]</span>
        <span class="n">frame_to_file</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">n_frames</span> <span class="o">*</span> <span class="p">[</span><span class="n">file_idx</span><span class="p">])</span>
        <span class="n">frame_in_file</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n_frames</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">frame_to_file</span><span class="p">,</span> <span class="n">frame_in_file</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.Labels" class="doc doc-heading">
        <code>Labels</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Describes a particular group of time labels.
TODO : also responsible for colors for plotting these labels?</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>group</code></td>
          <td>
          </td>
          <td><p>the name of the group</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>group_info</code></td>
          <td>
          </td>
          <td><p>description of what this group is about. Just for storing the information.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>state_names</code></td>
          <td>
                <code>list[str]</code>
          </td>
          <td><p>the state names</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>state_info</code></td>
          <td>
                <code>dict</code>
          </td>
          <td><p>description of each individual state {state name : description}. Just for storing the information.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>group</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>the name of the group</p></td>
        </tr>
        <tr>
          <td><code>group_info</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>description of what this group is about. Just for storing the information.</p></td>
        </tr>
        <tr>
          <td><code>state_names</code></td>
          <td>
                <code>list[str]</code>
          </td>
          <td><p>the state names</p></td>
        </tr>
        <tr>
          <td><code>states</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>list of states, each state as a TimeLabel object</p></td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Labels</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Describes a particular group of time labels.</span>
<span class="sd">    TODO : also responsible for colors for plotting these labels?</span>

<span class="sd">    Args:</span>
<span class="sd">        group : the name of the group</span>
<span class="sd">        group_info : description of what this group is about. Just for storing the information.</span>
<span class="sd">        state_names: the state names</span>
<span class="sd">        state_info: description of each individual state {state name : description}. Just for storing the information.</span>
<span class="sd">    Attributes:</span>
<span class="sd">        group (str): the name of the group</span>
<span class="sd">        group_info (str): description of what this group is about. Just for storing the information.</span>
<span class="sd">        state_names (list[str]): the state names</span>
<span class="sd">        states (list[TimeLabel]): list of states, each state as a TimeLabel object</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">state_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">group_info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">state_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">state_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">state_info</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">group_info</span> <span class="o">=</span> <span class="n">group_info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state_names</span> <span class="o">=</span> <span class="n">state_names</span>
        <span class="c1"># create states</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">states</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">state_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">state_name</span> <span class="ow">in</span> <span class="n">state_info</span><span class="p">:</span>
                <span class="n">state</span> <span class="o">=</span> <span class="n">TimeLabel</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">state_info</span><span class="p">[</span><span class="n">state_name</span><span class="p">],</span> <span class="n">group</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">)</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state_name</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">state</span> <span class="o">=</span> <span class="n">TimeLabel</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">)</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state_name</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Labels</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">group</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">group_info</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">group_info</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state_names</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">state_names</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">states</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">states</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Labels</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Label group : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;States:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">state_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_names</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state_name</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.TimeLabel" class="doc doc-heading">
        <code>TimeLabel</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Describes a particular time-located event during the experiment.
Any specific aspect of the experiment that you may want to document :
temperature|light|sound|image on the screen|drug|behaviour ... etc.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>the name for the time label. This is a unique identifier of the label.
        Different labels must have different names.
        Different labels are compared based on their names, so the same name means it is the same event.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>description</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>a detailed description of the label. This is to give you more info, but it is not used for
anything else.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>group</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>the group that the label belongs to.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>the name for the time label. This is a unique identifier of the label.
        Different labels must have different names.
        Different labels are compared based on their names, so the same name means it is the same event.</p></td>
        </tr>
        <tr>
          <td><code>description</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>a detailed description of the label. This is to give you more info, but it is not used for
anything else.</p></td>
        </tr>
        <tr>
          <td><code>group</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>the group that the label belongs to.</p></td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">TimeLabel</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Describes a particular time-located event during the experiment.</span>
<span class="sd">    Any specific aspect of the experiment that you may want to document :</span>
<span class="sd">    temperature|light|sound|image on the screen|drug|behaviour ... etc.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: the name for the time label. This is a unique identifier of the label.</span>
<span class="sd">                    Different labels must have different names.</span>
<span class="sd">                    Different labels are compared based on their names, so the same name means it is the same event.</span>
<span class="sd">        description: a detailed description of the label. This is to give you more info, but it is not used for</span>
<span class="sd">            anything else.</span>
<span class="sd">        group: the group that the label belongs to.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name: the name for the time label. This is a unique identifier of the label.</span>
<span class="sd">                    Different labels must have different names.</span>
<span class="sd">                    Different labels are compared based on their names, so the same name means it is the same event.</span>
<span class="sd">        description: a detailed description of the label. This is to give you more info, but it is not used for</span>
<span class="sd">            anything else.</span>
<span class="sd">        group: the group that the label belongs to.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="s2">&quot; : &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="s2">&quot;. Group: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># necessary for instances to behave sanely in dicts and sets.</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeLabel</span><span class="p">):</span>
            <span class="c1"># comparing by name</span>
            <span class="n">same_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">same_group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">group</span>
                <span class="k">return</span> <span class="n">same_name</span> <span class="ow">and</span> <span class="n">same_group</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">same_name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">TimeLabel</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Put all the information about a TimeLabel object into a dictionary.</span>
<span class="sd">        Returns:</span>
<span class="sd">            a dictionary with fields &#39;name&#39;, &#39;group&#39;, &#39;description&#39; storing the corresponding attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
        <span class="k">return</span> <span class="n">d</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a TimeLabel object from a dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (TimeLabel): a TimeLabel object with attributes &#39;name&#39;, &#39;group&#39;, &#39;description&#39;</span>
<span class="sd">            filled from the dictionary fields.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">group</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s1">&#39;description&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;group&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.TimeLabel.from_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a TimeLabel object from a dictionary.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a></code>
          </td>
          <td><p>a TimeLabel object with attributes 'name', 'group', 'description'</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>filled from the dictionary fields.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a TimeLabel object from a dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (TimeLabel): a TimeLabel object with attributes &#39;name&#39;, &#39;group&#39;, &#39;description&#39;</span>
<span class="sd">        filled from the dictionary fields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">group</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s1">&#39;description&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">&#39;group&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.TimeLabel.to_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Put all the information about a TimeLabel object into a dictionary.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td><p>a dictionary with fields 'name', 'group', 'description' storing the corresponding attributes.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Put all the information about a TimeLabel object into a dictionary.</span>
<span class="sd">    Returns:</span>
<span class="sd">        a dictionary with fields &#39;name&#39;, &#39;group&#39;, &#39;description&#39; storing the corresponding attributes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
    <span class="k">return</span> <span class="n">d</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.Timeline" class="doc doc-heading">
        <code>Timeline</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Information about the sequence of labels. Use it when you have non-periodic conditions.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>label_order</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>a list of labels in the right order in which they follow</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>duration</code></td>
          <td>
                <code>list[int]</code>
          </td>
          <td><p>duration of the corresponding labels, in frames (based on your imaging). Note that these are
frames, not volumes !</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Timeline</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information about the sequence of labels. Use it when you have non-periodic conditions.</span>
<span class="sd">    Args:</span>
<span class="sd">        label_order: a list of labels in the right order in which they follow</span>
<span class="sd">        duration: duration of the corresponding labels, in frames (based on your imaging). Note that these are</span>
<span class="sd">            frames, not volumes !</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_order</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">],</span> <span class="n">duration</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>

        <span class="c1"># check that all labels are from the same group</span>
        <span class="n">label_group</span> <span class="o">=</span> <span class="n">label_order</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">group</span>
        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">label_order</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">label</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">label_group</span><span class="p">,</span> \
                <span class="sa">f</span><span class="s2">&quot;All labels should be from the same group, but got </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">group</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">label_group</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># check that timing is int</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">duration</span><span class="p">),</span> <span class="s2">&quot;duration should be a list of int&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">label_group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span> <span class="o">=</span> <span class="n">label_order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
        <span class="c1"># list the length of the cycle, each element is the TimeLabel</span>
        <span class="c1"># TODO : turn it into an index ?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_label_per_frame</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Timeline</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">label_order</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_length</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">full_length</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">per_frame_list</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">per_frame_list</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">Timeline</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="nf">get_label_per_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A list of labels per frame for the duration of the experiment.</span>
<span class="sd">        Returns:</span>
<span class="sd">            labels per frame for the experiment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">per_frame_label_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
            <span class="n">per_frame_label_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_time</span> <span class="o">*</span> <span class="p">[</span><span class="n">label</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">per_frame_label_list</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Timeline : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Length: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">full_length</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Label </span><span class="si">{</span><span class="n">label</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: for </span><span class="si">{</span><span class="n">label_time</span><span class="si">}</span><span class="s2"> frames</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.Timeline.get_label_per_frame" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_label_per_frame</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>A list of labels per frame for the duration of the experiment.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="src.vodex.core.TimeLabel" href="#src.vodex.core.TimeLabel">TimeLabel</a>]</code>
          </td>
          <td><p>labels per frame for the experiment.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_label_per_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TimeLabel</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A list of labels per frame for the duration of the experiment.</span>
<span class="sd">    Returns:</span>
<span class="sd">        labels per frame for the experiment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">per_frame_label_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">label_time</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_order</span><span class="p">):</span>
        <span class="n">per_frame_label_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">label_time</span> <span class="o">*</span> <span class="p">[</span><span class="n">label</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">per_frame_label_list</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.vodex.core.VolumeManager" class="doc doc-heading">
        <code>VolumeManager</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Figures out how to get full volumes for certain time points.</p>

<details class="learning-resourses">
  <summary>Learning Resourses</summary>
  <p>maybe I should do type checking automatically, something like here:
https://stackoverflow.com/questions/9305751/how-to-force-ensure-class-attributes-are-a-specific-type</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>fpv</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>frames per volume, number of frames in one volume</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>fgf</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>first good frame, the first frame in the imaging session that is at the top of a volume.
For example if you started imaging at the top of the volume, fgf = 0,
but if you started somewhere in the middle, the first good frame is , for example, 23 ...</p></td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>frame_manager</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.vodex.core.FrameManager" href="#src.vodex.core.FrameManager">FrameManager</a></code>
          </td>
          <td><p>the info about the frames</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src\vodex\core.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VolumeManager</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Figures out how to get full volumes for certain time points.</span>

<span class="sd">    Learning Resourses:</span>
<span class="sd">        maybe I should do type checking automatically, something like here:</span>
<span class="sd">        https://stackoverflow.com/questions/9305751/how-to-force-ensure-class-attributes-are-a-specific-type</span>
<span class="sd">    Args:</span>
<span class="sd">        fpv: frames per volume, number of frames in one volume</span>
<span class="sd">        fgf: first good frame, the first frame in the imaging session that is at the top of a volume.</span>
<span class="sd">            For example if you started imaging at the top of the volume, fgf = 0,</span>
<span class="sd">            but if you started somewhere in the middle, the first good frame is , for example, 23 ...</span>
<span class="sd">        frame_manager: the info about the frames</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fpv</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">frame_manager</span><span class="p">:</span> <span class="n">FrameManager</span><span class="p">,</span> <span class="n">fgf</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fpv</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fpv</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">fpv</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()),</span> <span class="s2">&quot;fpv must be an integer&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fgf</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fgf</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">fgf</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()),</span> <span class="s2">&quot;fgf must be an integer&quot;</span>

        <span class="c1"># frames per volume</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fpv</span><span class="p">)</span>

        <span class="c1"># get total number of frames</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_manager</span> <span class="o">=</span> <span class="n">frame_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span> <span class="o">=</span> <span class="n">frame_manager</span><span class="o">.</span><span class="n">file_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span><span class="o">.</span><span class="n">num_frames</span><span class="p">)</span>

        <span class="c1"># prepare info about frames at the beginning, full volumes and frames at the end</span>
        <span class="c1"># first good frame, start counting from 0 : 0, 1, 2, 3, ...</span>
        <span class="c1"># n_head is the number of frames before the first frame of the first full volume</span>
        <span class="c1"># n_tail is the number of frames after the last frame of the last full volume</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fgf</span><span class="p">)</span>
        <span class="n">full_volumes</span><span class="p">,</span> <span class="n">n_tail</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">full_volumes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n_tail</span><span class="p">)</span>

        <span class="c1"># map frames to slices an full volumes:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frames_to_z_mapping</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_vol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frames_to_volumes_mapping</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VolumeManager</span><span class="p">):</span>
            <span class="n">is_same</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">fpv</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_manager</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_manager</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_manager</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">file_manager</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n_frames</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n_head</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">full_volumes</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">n_tail</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_z</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_z</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame_to_vol</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">frame_to_vol</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is_same</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;__eq__ is Not Implemented for </span><span class="si">{</span><span class="n">VolumeManager</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="nf">get_frames_to_z_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">z_per_frame_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fpv</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
        <span class="c1"># set at what z the imaging starts and ends</span>
        <span class="n">i_from</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span>
        <span class="n">i_to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span>
        <span class="c1"># map frames to z</span>
        <span class="n">frame_to_z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">z_per_frame_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)[</span><span class="n">i_from</span><span class="p">:</span><span class="n">i_to</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">frame_to_z</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_frames_to_volumes_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        maps frames to volumes</span>
<span class="sd">        -1 for head ( not full volume at the beginning )</span>
<span class="sd">        volume number for full volumes : 0, 1, ,2 3, ...</span>
<span class="sd">        -2 for tail (not full volume at the end )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO : make sure n_head is not larger than full volume?</span>
        <span class="n">frame_to_vol</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span>
        <span class="k">for</span> <span class="n">vol</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span><span class="p">):</span>
            <span class="n">frame_to_vol</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">vol</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span><span class="p">)</span>
        <span class="n">frame_to_vol</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">frame_to_vol</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Total frames : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_frames</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Volumes start on frame : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_head</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Total good volumes : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Frames per volume : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fpv</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Tailing frames (not a full volume , at the end) : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">,</span> <span class="n">fpv</span><span class="p">,</span> <span class="n">fgf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">file_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">file_manager</span> <span class="o">=</span> <span class="n">FileManager</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">file_names</span><span class="o">=</span><span class="n">file_names</span><span class="p">,</span> <span class="n">frames_per_file</span><span class="o">=</span><span class="n">frames_per_file</span><span class="p">)</span>
        <span class="n">frame_manager</span> <span class="o">=</span> <span class="n">FrameManager</span><span class="p">(</span><span class="n">file_manager</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">fpv</span><span class="p">,</span> <span class="n">frame_manager</span><span class="p">,</span> <span class="n">fgf</span><span class="o">=</span><span class="n">fgf</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.vodex.core.VolumeManager.get_frames_to_volumes_mapping" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_frames_to_volumes_mapping</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>maps frames to volumes
-1 for head ( not full volume at the beginning )
volume number for full volumes : 0, 1, ,2 3, ...
-2 for tail (not full volume at the end )</p>

      <details class="quote">
        <summary>Source code in <code>src\vodex\core.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_frames_to_volumes_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    maps frames to volumes</span>
<span class="sd">    -1 for head ( not full volume at the beginning )</span>
<span class="sd">    volume number for full volumes : 0, 1, ,2 3, ...</span>
<span class="sd">    -2 for tail (not full volume at the end )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO : make sure n_head is not larger than full volume?</span>
    <span class="n">frame_to_vol</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_head</span>
    <span class="k">for</span> <span class="n">vol</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_volumes</span><span class="p">):</span>
        <span class="n">frame_to_vol</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">vol</span><span class="p">)]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">fpv</span><span class="p">)</span>
    <span class="n">frame_to_vol</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_tail</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">frame_to_vol</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../loaders/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Loaders" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Loaders
            </div>
          </div>
        </a>
      
      
        
        <a href="../dbmethods/" class="md-footer__link md-footer__link--next" aria-label="Next: DataBase methods" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              DataBase methods
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>